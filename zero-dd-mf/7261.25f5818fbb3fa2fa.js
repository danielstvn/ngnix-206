(self.webpackChunkzero_dd_mf=self.webpackChunkzero_dd_mf||[]).push([[7261,6772],{47261:(w,l,o)=>{o.r(l),o.d(l,{KNOB_VALUE_ACCESSOR:()=>u,Knob:()=>m,KnobModule:()=>p});var t=o(45449),d=o(90944);function c(n,h){if(1&n&&(t.\u0275\u0275namespaceSVG(),t.\u0275\u0275elementStart(0,"text",5),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()),2&n){const e=t.\u0275\u0275nextContext();t.\u0275\u0275attribute("x",50)("y",57)("fill",e.textColor)("name",e.name),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate(e.valueToDisplay())}}const u={provide:o(93071).NG_VALUE_ACCESSOR,useExisting:(0,t.forwardRef)(()=>m),multi:!0};let m=(()=>{class n{constructor(e,s){this.cd=e,this.el=s,this.valueColor="var(--primary-color, Black)",this.rangeColor="var(--surface-border, LightGray)",this.textColor="var(--text-color-secondary, Black)",this.valueTemplate="{value}",this.size=100,this.step=1,this.min=0,this.max=100,this.strokeWidth=14,this.showValue=!0,this.readonly=!1,this.onChange=new t.EventEmitter,this.radius=40,this.midX=50,this.midY=50,this.minRadians=4*Math.PI/3,this.maxRadians=-Math.PI/3,this.value=null,this.onModelChange=()=>{},this.onModelTouched=()=>{}}mapRange(e,s,a,i,r){return(e-s)*(r-i)/(a-s)+i}onClick(e){!this.disabled&&!this.readonly&&this.updateValue(e.offsetX,e.offsetY)}updateValue(e,s){let r=Math.atan2(this.size/2-s,e-this.size/2),f=-Math.PI/2-Math.PI/6;this.updateModel(r,f)}updateModel(e,s){let a;if(e>this.maxRadians)a=this.mapRange(e,this.minRadians,this.maxRadians,this.min,this.max);else{if(!(e<s))return;a=this.mapRange(e+2*Math.PI,this.minRadians,this.maxRadians,this.min,this.max)}let i=Math.round((a-this.min)/this.step)*this.step+this.min;this.value=i,this.onModelChange(this.value),this.onChange.emit(this.value)}onMouseDown(e){!this.disabled&&!this.readonly&&(this.windowMouseMoveListener=this.onMouseMove.bind(this),this.windowMouseUpListener=this.onMouseUp.bind(this),window.addEventListener("mousemove",this.windowMouseMoveListener),window.addEventListener("mouseup",this.windowMouseUpListener),e.preventDefault())}onMouseUp(e){!this.disabled&&!this.readonly&&(window.removeEventListener("mousemove",this.windowMouseMoveListener),window.removeEventListener("mouseup",this.windowMouseUpListener),this.windowMouseUpListener=null,this.windowMouseMoveListener=null,e.preventDefault())}onTouchStart(e){!this.disabled&&!this.readonly&&(this.windowTouchMoveListener=this.onTouchMove.bind(this),this.windowTouchEndListener=this.onTouchEnd.bind(this),window.addEventListener("touchmove",this.windowTouchMoveListener),window.addEventListener("touchend",this.windowTouchEndListener),e.preventDefault())}onTouchEnd(e){!this.disabled&&!this.readonly&&(window.removeEventListener("touchmove",this.windowTouchMoveListener),window.removeEventListener("touchend",this.windowTouchEndListener),this.windowTouchMoveListener=null,this.windowTouchEndListener=null,e.preventDefault())}onMouseMove(e){!this.disabled&&!this.readonly&&(this.updateValue(e.offsetX,e.offsetY),e.preventDefault())}onTouchMove(e){if(!this.disabled&&!this.readonly&&1==e.touches.length){const s=this.el.nativeElement.children[0].getBoundingClientRect(),a=e.targetTouches.item(0);this.updateValue(a.clientX-s.left,a.clientY-s.top)}}writeValue(e){this.value=e,this.cd.markForCheck()}registerOnChange(e){this.onModelChange=e}registerOnTouched(e){this.onModelTouched=e}setDisabledState(e){this.disabled=e,this.cd.markForCheck()}containerClass(){return{"p-knob p-component":!0,"p-disabled":this.disabled}}rangePath(){return`M ${this.minX()} ${this.minY()} A ${this.radius} ${this.radius} 0 1 1 ${this.maxX()} ${this.maxY()}`}valuePath(){return`M ${this.zeroX()} ${this.zeroY()} A ${this.radius} ${this.radius} 0 ${this.largeArc()} ${this.sweep()} ${this.valueX()} ${this.valueY()}`}zeroRadians(){return this.mapRange(this.min>0&&this.max>0?this.min:0,this.min,this.max,this.minRadians,this.maxRadians)}valueRadians(){return this.mapRange(this._value,this.min,this.max,this.minRadians,this.maxRadians)}minX(){return this.midX+Math.cos(this.minRadians)*this.radius}minY(){return this.midY-Math.sin(this.minRadians)*this.radius}maxX(){return this.midX+Math.cos(this.maxRadians)*this.radius}maxY(){return this.midY-Math.sin(this.maxRadians)*this.radius}zeroX(){return this.midX+Math.cos(this.zeroRadians())*this.radius}zeroY(){return this.midY-Math.sin(this.zeroRadians())*this.radius}valueX(){return this.midX+Math.cos(this.valueRadians())*this.radius}valueY(){return this.midY-Math.sin(this.valueRadians())*this.radius}largeArc(){return Math.abs(this.zeroRadians()-this.valueRadians())<Math.PI?0:1}sweep(){return this.valueRadians()>this.zeroRadians()?0:1}valueToDisplay(){return this.valueTemplate.replace("{value}",this._value.toString())}get _value(){return null!=this.value?this.value:this.min}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275directiveInject(t.ChangeDetectorRef),t.\u0275\u0275directiveInject(t.ElementRef))},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["p-knob"]],hostAttrs:[1,"p-element"],inputs:{styleClass:"styleClass",style:"style",severity:"severity",valueColor:"valueColor",rangeColor:"rangeColor",textColor:"textColor",valueTemplate:"valueTemplate",name:"name",size:"size",step:"step",min:"min",max:"max",strokeWidth:"strokeWidth",disabled:"disabled",showValue:"showValue",readonly:"readonly"},outputs:{onChange:"onChange"},features:[t.\u0275\u0275ProvidersFeature([u])],decls:5,vars:15,consts:[[3,"ngClass","ngStyle"],["viewBox","0 0 100 100",3,"click","mousedown","mouseup","touchstart","touchend"],[1,"p-knob-range"],[1,"p-knob-value"],["text-anchor","middle","class","p-knob-text",4,"ngIf"],["text-anchor","middle",1,"p-knob-text"]],template:function(e,s){1&e&&(t.\u0275\u0275elementStart(0,"div",0),t.\u0275\u0275namespaceSVG(),t.\u0275\u0275elementStart(1,"svg",1),t.\u0275\u0275listener("click",function(i){return s.onClick(i)})("mousedown",function(i){return s.onMouseDown(i)})("mouseup",function(i){return s.onMouseUp(i)})("touchstart",function(i){return s.onTouchStart(i)})("touchend",function(i){return s.onTouchEnd(i)}),t.\u0275\u0275element(2,"path",2)(3,"path",3),t.\u0275\u0275template(4,c,2,5,"text",4),t.\u0275\u0275elementEnd()()),2&e&&(t.\u0275\u0275classMap(s.styleClass),t.\u0275\u0275property("ngClass",s.containerClass())("ngStyle",s.style),t.\u0275\u0275advance(1),t.\u0275\u0275styleProp("width",s.size+"px")("height",s.size+"px"),t.\u0275\u0275advance(1),t.\u0275\u0275attribute("d",s.rangePath())("stroke-width",s.strokeWidth)("stroke",s.rangeColor),t.\u0275\u0275advance(1),t.\u0275\u0275attribute("d",s.valuePath())("stroke-width",s.strokeWidth)("stroke",s.valueColor),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",s.showValue))},dependencies:[d.NgClass,d.NgIf,d.NgStyle],styles:["@keyframes dash-frame{to{stroke-dashoffset:0}}.p-knob-range{fill:none;transition:stroke .1s ease-in}.p-knob-value{animation-name:dash-frame;animation-fill-mode:forwards;fill:none}.p-knob-text{font-size:1.3rem;text-align:center}\n"],encapsulation:2,changeDetection:0}),n})(),p=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=t.\u0275\u0275defineInjector({imports:[d.CommonModule]}),n})()}}]);