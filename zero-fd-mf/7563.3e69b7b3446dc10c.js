(self.webpackChunkzero_fd_mf=self.webpackChunkzero_fd_mf||[]).push([[7563],{11481:(Pe,J,M)=>{M.d(J,{Dx:()=>s,H7:()=>Se,b2:()=>Fe,q6:()=>we,se:()=>b});var u=M(90944),d=M(45449);class T extends u.\u0275DomAdapter{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class F extends T{static makeCurrent(){(0,u.\u0275setRootDomAdapter)(new F)}onAndCancel(i,o,a){return i.addEventListener(o,a,!1),()=>{i.removeEventListener(o,a,!1)}}dispatchEvent(i,o){i.dispatchEvent(o)}remove(i){i.parentNode&&i.parentNode.removeChild(i)}createElement(i,o){return(o=o||this.getDefaultDocument()).createElement(i)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(i){return i.nodeType===Node.ELEMENT_NODE}isShadowRoot(i){return i instanceof DocumentFragment}getGlobalEventTarget(i,o){return"window"===o?window:"document"===o?i:"body"===o?i.body:null}getBaseHref(i){const o=function he(){return I=I||document.querySelector("base"),I?I.getAttribute("href"):null}();return null==o?null:function me(l){$=$||document.createElement("a"),$.setAttribute("href",l);const i=$.pathname;return"/"===i.charAt(0)?i:`/${i}`}(o)}resetBaseElement(){I=null}getUserAgent(){return window.navigator.userAgent}getCookie(i){return(0,u.\u0275parseCookieValue)(document.cookie,i)}}let $,I=null;const q=new d.InjectionToken("TRANSITION_ID"),ee=[{provide:d.APP_INITIALIZER,useFactory:function ge(l,i,o){return()=>{o.get(d.ApplicationInitStatus).donePromise.then(()=>{const a=(0,u.\u0275getDOM)(),p=i.querySelectorAll(`style[ng-transition="${l}"]`);for(let m=0;m<p.length;m++)a.remove(p[m])})}},deps:[q,u.DOCUMENT,d.Injector],multi:!0}];let ve=(()=>{class l{build(){return new XMLHttpRequest}}return l.\u0275fac=function(o){return new(o||l)},l.\u0275prov=d.\u0275\u0275defineInjectable({token:l,factory:l.\u0275fac}),l})();const v=new d.InjectionToken("EventManagerPlugins");let D=(()=>{class l{constructor(o,a){this._zone=a,this._eventNameToPlugin=new Map,o.forEach(p=>p.manager=this),this._plugins=o.slice().reverse()}addEventListener(o,a,p){return this._findPluginFor(a).addEventListener(o,a,p)}addGlobalEventListener(o,a,p){return this._findPluginFor(a).addGlobalEventListener(o,a,p)}getZone(){return this._zone}_findPluginFor(o){const a=this._eventNameToPlugin.get(o);if(a)return a;const p=this._plugins;for(let m=0;m<p.length;m++){const y=p[m];if(y.supports(o))return this._eventNameToPlugin.set(o,y),y}throw new Error(`No event manager plugin found for event ${o}`)}}return l.\u0275fac=function(o){return new(o||l)(d.\u0275\u0275inject(v),d.\u0275\u0275inject(d.NgZone))},l.\u0275prov=d.\u0275\u0275defineInjectable({token:l,factory:l.\u0275fac}),l})();class W{constructor(i){this._doc=i}addGlobalEventListener(i,o,a){const p=(0,u.\u0275getDOM)().getGlobalEventTarget(this._doc,i);if(!p)throw new Error(`Unsupported event target ${p} for event ${o}`);return this.addEventListener(p,o,a)}}let j=(()=>{class l{constructor(){this._stylesSet=new Set}addStyles(o){const a=new Set;o.forEach(p=>{this._stylesSet.has(p)||(this._stylesSet.add(p),a.add(p))}),this.onStylesAdded(a)}onStylesAdded(o){}getAllStyles(){return Array.from(this._stylesSet)}}return l.\u0275fac=function(o){return new(o||l)},l.\u0275prov=d.\u0275\u0275defineInjectable({token:l,factory:l.\u0275fac}),l})(),H=(()=>{class l extends j{constructor(o){super(),this._doc=o,this._hostNodes=new Map,this._hostNodes.set(o.head,[])}_addStylesToHost(o,a,p){o.forEach(m=>{const y=this._doc.createElement("style");y.textContent=m,p.push(a.appendChild(y))})}addHost(o){const a=[];this._addStylesToHost(this._stylesSet,o,a),this._hostNodes.set(o,a)}removeHost(o){const a=this._hostNodes.get(o);a&&a.forEach(k),this._hostNodes.delete(o)}onStylesAdded(o){this._hostNodes.forEach((a,p)=>{this._addStylesToHost(o,p,a)})}ngOnDestroy(){this._hostNodes.forEach(o=>o.forEach(k))}}return l.\u0275fac=function(o){return new(o||l)(d.\u0275\u0275inject(u.DOCUMENT))},l.\u0275prov=d.\u0275\u0275defineInjectable({token:l,factory:l.\u0275fac}),l})();function k(l){(0,u.\u0275getDOM)().remove(l)}const P={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},S=/%COMP%/g;function w(l,i,o){for(let a=0;a<i.length;a++){let p=i[a];Array.isArray(p)?w(l,p,o):(p=p.replace(S,l),o.push(p))}return o}function E(l){return i=>{if("__ngUnwrap__"===i)return l;!1===l(i)&&(i.preventDefault(),i.returnValue=!1)}}let b=(()=>{class l{constructor(o,a,p){this.eventManager=o,this.sharedStylesHost=a,this.appId=p,this.rendererByCompId=new Map,this.defaultRenderer=new K(o)}createRenderer(o,a){if(!o||!a)return this.defaultRenderer;switch(a.encapsulation){case d.ViewEncapsulation.Emulated:{let p=this.rendererByCompId.get(a.id);return p||(p=new G(this.eventManager,this.sharedStylesHost,a,this.appId),this.rendererByCompId.set(a.id,p)),p.applyToHost(o),p}case 1:case d.ViewEncapsulation.ShadowDom:return new X(this.eventManager,this.sharedStylesHost,o,a);default:if(!this.rendererByCompId.has(a.id)){const p=w(a.id,a.styles,[]);this.sharedStylesHost.addStyles(p),this.rendererByCompId.set(a.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return l.\u0275fac=function(o){return new(o||l)(d.\u0275\u0275inject(D),d.\u0275\u0275inject(H),d.\u0275\u0275inject(d.APP_ID))},l.\u0275prov=d.\u0275\u0275defineInjectable({token:l,factory:l.\u0275fac}),l})();class K{constructor(i){this.eventManager=i,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(i,o){return o?document.createElementNS(P[o]||o,i):document.createElement(i)}createComment(i){return document.createComment(i)}createText(i){return document.createTextNode(i)}appendChild(i,o){(A(i)?i.content:i).appendChild(o)}insertBefore(i,o,a){i&&(A(i)?i.content:i).insertBefore(o,a)}removeChild(i,o){i&&i.removeChild(o)}selectRootElement(i,o){let a="string"==typeof i?document.querySelector(i):i;if(!a)throw new Error(`The selector "${i}" did not match any elements`);return o||(a.textContent=""),a}parentNode(i){return i.parentNode}nextSibling(i){return i.nextSibling}setAttribute(i,o,a,p){if(p){o=p+":"+o;const m=P[p];m?i.setAttributeNS(m,o,a):i.setAttribute(o,a)}else i.setAttribute(o,a)}removeAttribute(i,o,a){if(a){const p=P[a];p?i.removeAttributeNS(p,o):i.removeAttribute(`${a}:${o}`)}else i.removeAttribute(o)}addClass(i,o){i.classList.add(o)}removeClass(i,o){i.classList.remove(o)}setStyle(i,o,a,p){p&(d.RendererStyleFlags2.DashCase|d.RendererStyleFlags2.Important)?i.style.setProperty(o,a,p&d.RendererStyleFlags2.Important?"important":""):i.style[o]=a}removeStyle(i,o,a){a&d.RendererStyleFlags2.DashCase?i.style.removeProperty(o):i.style[o]=""}setProperty(i,o,a){i[o]=a}setValue(i,o){i.nodeValue=o}listen(i,o,a){return"string"==typeof i?this.eventManager.addGlobalEventListener(i,o,E(a)):this.eventManager.addEventListener(i,o,E(a))}}function A(l){return"TEMPLATE"===l.tagName&&void 0!==l.content}class G extends K{constructor(i,o,a,p){super(i),this.component=a;const m=w(p+"-"+a.id,a.styles,[]);o.addStyles(m),this.contentAttr=function R(l){return"_ngcontent-%COMP%".replace(S,l)}(p+"-"+a.id),this.hostAttr=function be(l){return"_nghost-%COMP%".replace(S,l)}(p+"-"+a.id)}applyToHost(i){super.setAttribute(i,this.hostAttr,"")}createElement(i,o){const a=super.createElement(i,o);return super.setAttribute(a,this.contentAttr,""),a}}class X extends K{constructor(i,o,a,p){super(i),this.sharedStylesHost=o,this.hostEl=a,this.shadowRoot=a.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const m=w(p.id,p.styles,[]);for(let y=0;y<m.length;y++){const O=document.createElement("style");O.textContent=m[y],this.shadowRoot.appendChild(O)}}nodeOrShadowRoot(i){return i===this.hostEl?this.shadowRoot:i}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(i,o){return super.appendChild(this.nodeOrShadowRoot(i),o)}insertBefore(i,o,a){return super.insertBefore(this.nodeOrShadowRoot(i),o,a)}removeChild(i,o){return super.removeChild(this.nodeOrShadowRoot(i),o)}parentNode(i){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(i)))}}let se=(()=>{class l extends W{constructor(o){super(o)}supports(o){return!0}addEventListener(o,a,p){return o.addEventListener(a,p,!1),()=>this.removeEventListener(o,a,p)}removeEventListener(o,a,p){return o.removeEventListener(a,p)}}return l.\u0275fac=function(o){return new(o||l)(d.\u0275\u0275inject(u.DOCUMENT))},l.\u0275prov=d.\u0275\u0275defineInjectable({token:l,factory:l.\u0275fac}),l})();const Q=["alt","control","meta","shift"],L={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},oe={alt:l=>l.altKey,control:l=>l.ctrlKey,meta:l=>l.metaKey,shift:l=>l.shiftKey};let ie=(()=>{class l extends W{constructor(o){super(o)}supports(o){return null!=l.parseEventName(o)}addEventListener(o,a,p){const m=l.parseEventName(a),y=l.eventCallback(m.fullKey,p,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,u.\u0275getDOM)().onAndCancel(o,m.domEventName,y))}static parseEventName(o){const a=o.toLowerCase().split("."),p=a.shift();if(0===a.length||"keydown"!==p&&"keyup"!==p)return null;const m=l._normalizeKey(a.pop());let y="",O=a.indexOf("code");if(O>-1&&(a.splice(O,1),y="code."),Q.forEach(xe=>{const ke=a.indexOf(xe);ke>-1&&(a.splice(ke,1),y+=xe+".")}),y+=m,0!=a.length||0===m.length)return null;const x={};return x.domEventName=p,x.fullKey=y,x}static matchEventFullKeyCode(o,a){let p=L[o.key]||o.key,m="";return a.indexOf("code.")>-1&&(p=o.code,m="code."),!(null==p||!p)&&(p=p.toLowerCase()," "===p?p="space":"."===p&&(p="dot"),Q.forEach(y=>{y!==p&&(0,oe[y])(o)&&(m+=y+".")}),m+=p,m===a)}static eventCallback(o,a,p){return m=>{l.matchEventFullKeyCode(m,o)&&p.runGuarded(()=>a(m))}}static _normalizeKey(o){return"esc"===o?"escape":o}}return l.\u0275fac=function(o){return new(o||l)(d.\u0275\u0275inject(u.DOCUMENT))},l.\u0275prov=d.\u0275\u0275defineInjectable({token:l,factory:l.\u0275fac}),l})();const we=179==M.j?(0,d.createPlatformFactory)(d.platformCore,"browser",[{provide:d.PLATFORM_ID,useValue:u.\u0275PLATFORM_BROWSER_ID},{provide:d.PLATFORM_INITIALIZER,useValue:function ce(){F.makeCurrent()},multi:!0},{provide:u.DOCUMENT,useFactory:function _e(){return(0,d.\u0275setDocument)(document),document},deps:[]}]):null,de=new d.InjectionToken(""),fe=[{provide:d.\u0275TESTABILITY_GETTER,useClass:class ye{addToWindow(i){d.\u0275global.getAngularTestability=(a,p=!0)=>{const m=i.findTestabilityInTree(a,p);if(null==m)throw new Error("Could not find testability for element.");return m},d.\u0275global.getAllAngularTestabilities=()=>i.getAllTestabilities(),d.\u0275global.getAllAngularRootElements=()=>i.getAllRootElements(),d.\u0275global.frameworkStabilizers||(d.\u0275global.frameworkStabilizers=[]),d.\u0275global.frameworkStabilizers.push(a=>{const p=d.\u0275global.getAllAngularTestabilities();let m=p.length,y=!1;const O=function(x){y=y||x,m--,0==m&&a(y)};p.forEach(function(x){x.whenStable(O)})})}findTestabilityInTree(i,o,a){return null==o?null:i.getTestability(o)??(a?(0,u.\u0275getDOM)().isShadowRoot(o)?this.findTestabilityInTree(i,o.host,!0):this.findTestabilityInTree(i,o.parentElement,!0):null)}},deps:[]},{provide:d.\u0275TESTABILITY,useClass:d.Testability,deps:[d.NgZone,d.TestabilityRegistry,d.\u0275TESTABILITY_GETTER]},{provide:d.Testability,useClass:d.Testability,deps:[d.NgZone,d.TestabilityRegistry,d.\u0275TESTABILITY_GETTER]}],pe=[{provide:d.\u0275INJECTOR_SCOPE,useValue:"root"},{provide:d.ErrorHandler,useFactory:function Ce(){return new d.ErrorHandler},deps:[]},{provide:v,useClass:se,multi:!0,deps:[u.DOCUMENT,d.NgZone,d.PLATFORM_ID]},{provide:v,useClass:ie,multi:!0,deps:[u.DOCUMENT]},{provide:b,useClass:b,deps:[D,H,d.APP_ID]},{provide:d.RendererFactory2,useExisting:b},{provide:j,useExisting:H},{provide:H,useClass:H,deps:[u.DOCUMENT]},{provide:D,useClass:D,deps:[v,d.NgZone]},{provide:u.XhrFactory,useClass:ve,deps:[]},[]];let Fe=179==M.j?(()=>{class l{constructor(o){}static withServerTransition(o){return{ngModule:l,providers:[{provide:d.APP_ID,useValue:o.appId},{provide:q,useExisting:d.APP_ID},ee]}}}return l.\u0275fac=function(o){return new(o||l)(d.\u0275\u0275inject(de,12))},l.\u0275mod=d.\u0275\u0275defineNgModule({type:l}),l.\u0275inj=d.\u0275\u0275defineInjector({providers:[...pe,...fe],imports:[u.CommonModule,d.ApplicationModule]}),l})():null,s=(()=>{class l{constructor(o){this._doc=o}getTitle(){return this._doc.title}setTitle(o){this._doc.title=o||""}}return l.\u0275fac=function(o){return new(o||l)(d.\u0275\u0275inject(u.DOCUMENT))},l.\u0275prov=d.\u0275\u0275defineInjectable({token:l,factory:function(o){let a=null;return a=o?new o:function Oe(){return new s((0,d.\u0275\u0275inject)(u.DOCUMENT))}(),a},providedIn:"root"}),l})();typeof window<"u"&&window;let Se=(()=>{class l{}return l.\u0275fac=function(o){return new(o||l)},l.\u0275prov=d.\u0275\u0275defineInjectable({token:l,factory:function(o){let a=null;return a=o?new(o||l):d.\u0275\u0275inject(Ae),a},providedIn:"root"}),l})(),Ae=(()=>{class l extends Se{constructor(o){super(),this._doc=o}sanitize(o,a){if(null==a)return null;switch(o){case d.SecurityContext.NONE:return a;case d.SecurityContext.HTML:return(0,d.\u0275allowSanitizationBypassAndThrow)(a,"HTML")?(0,d.\u0275unwrapSafeValue)(a):(0,d.\u0275_sanitizeHtml)(this._doc,String(a)).toString();case d.SecurityContext.STYLE:return(0,d.\u0275allowSanitizationBypassAndThrow)(a,"Style")?(0,d.\u0275unwrapSafeValue)(a):a;case d.SecurityContext.SCRIPT:if((0,d.\u0275allowSanitizationBypassAndThrow)(a,"Script"))return(0,d.\u0275unwrapSafeValue)(a);throw new Error("unsafe value used in a script context");case d.SecurityContext.URL:return(0,d.\u0275allowSanitizationBypassAndThrow)(a,"URL")?(0,d.\u0275unwrapSafeValue)(a):(0,d.\u0275_sanitizeUrl)(String(a));case d.SecurityContext.RESOURCE_URL:if((0,d.\u0275allowSanitizationBypassAndThrow)(a,"ResourceURL"))return(0,d.\u0275unwrapSafeValue)(a);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${o} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(o){return(0,d.\u0275bypassSanitizationTrustHtml)(o)}bypassSecurityTrustStyle(o){return(0,d.\u0275bypassSanitizationTrustStyle)(o)}bypassSecurityTrustScript(o){return(0,d.\u0275bypassSanitizationTrustScript)(o)}bypassSecurityTrustUrl(o){return(0,d.\u0275bypassSanitizationTrustUrl)(o)}bypassSecurityTrustResourceUrl(o){return(0,d.\u0275bypassSanitizationTrustResourceUrl)(o)}}return l.\u0275fac=function(o){return new(o||l)(d.\u0275\u0275inject(u.DOCUMENT))},l.\u0275prov=d.\u0275\u0275defineInjectable({token:l,factory:function(o){let a=null;return a=o?new o:function Ne(l){return new Ae(l.get(u.DOCUMENT))}(d.\u0275\u0275inject(d.Injector)),a},providedIn:"root"}),l})()},76212:(Pe,J,M)=>{M.r(J),M.d(J,{FORMLY_CONFIG:()=>N,FieldArrayType:()=>_e,FieldType:()=>Z,FieldWrapper:()=>ue,FormlyConfig:()=>A,FormlyField:()=>ae,FormlyForm:()=>Re,FormlyFormBuilder:()=>G,FormlyModule:()=>Oe,\u0275FormlyAttributes:()=>le,\u0275FormlyGroup:()=>ce,\u0275FormlyTemplate:()=>ie,\u0275FormlyValidationMessage:()=>Ce,\u0275clone:()=>w,\u0275defineHiddenProp:()=>E,\u0275getFieldValue:()=>k,\u0275hasKey:()=>v,\u0275observe:()=>b,\u0275reverseDeepMerge:()=>P});var u=M(45449),d=M(93071),T=M(13406),F=M(60097),I=M(90944),he=M(11481);const $=["container"];function me(s,t){}function q(s,t){1&s&&u.\u0275\u0275element(0,"formly-field",1),2&s&&u.\u0275\u0275property("field",t.$implicit)}const ge=["*"],ee=["fieldComponent"];function ve(s,t,e){if(t.id)return t.id;let n=t.type;return!n&&t.template&&(n="template"),n instanceof u.Type&&(n=n.prototype.constructor.name),[s,n,t.key,e].join("_")}function v(s){return!S(s.key)&&""!==s.key}function D(s){if(!v(s))return[];if(s._keyPath?.key!==s.key){let t=[];if("string"==typeof s.key){const e=-1===s.key.indexOf("[")?s.key:s.key.replace(/\[(\w+)\]/g,".$1");t=-1!==e.indexOf(".")?e.split("."):[e]}else t=Array.isArray(s.key)?s.key.slice(0):[`${s.key}`];E(s,"_keyPath",{key:s.key,path:t})}return s._keyPath.path.slice(0)}const W=["required","pattern","minLength","maxLength","min","max"];function j(s,t){let e=D(s);if(0===e.length)return;let n=s;for(;n.parent;)n=n.parent,e=[...D(n),...e];if(void 0===t&&s.resetOnHide){const r=e.pop();delete e.reduce((f,h)=>f[h]||{},n.model)[r]}else!function H(s,t,e){for(let n=0;n<t.length-1;n++){const r=t[n];(!s[r]||!R(s[r]))&&(s[r]=/^\d+$/.test(t[n+1])?[]:{}),s=s[r]}s[t[t.length-1]]=w(e)}(n.model,e,t)}function k(s){let t=s.parent?s.parent.model:s.model;for(const e of D(s)){if(!t)return t;t=t[e]}return t}function P(s,...t){return t.forEach(e=>{for(const n in e)S(s[n])||te(s[n])?s[n]=w(e[n]):Ee(s[n],e[n])&&P(s[n],e[n])}),s}function S(s){return null==s}function V(s){return void 0===s}function te(s){return""===s}function Y(s){return"function"==typeof s}function Ee(s,t){return R(s)&&R(t)&&Object.getPrototypeOf(s)===Object.getPrototypeOf(t)&&!(Array.isArray(s)||Array.isArray(t))}function R(s){return null!=s&&"object"==typeof s}function w(s){if(!R(s)||(0,T.isObservable)(s)||s instanceof u.TemplateRef||s.changingThisBreaksApplicationSecurity||-1!==["RegExp","FileList","File","Blob"].indexOf(s.constructor.name))return s;if(s instanceof Set)return new Set(s);if(s instanceof Map)return new Map(s);if(s._isAMomentObject&&Y(s.clone))return s.clone();if(s instanceof d.AbstractControl)return null;if(s instanceof Date)return new Date(s.getTime());if(Array.isArray(s))return s.slice(0).map(n=>w(n));const t=Object.getPrototypeOf(s);let e=Object.create(t);return e=Object.setPrototypeOf(e,t),Object.keys(s).reduce((n,r)=>{const c=Object.getOwnPropertyDescriptor(s,r);return c.get?Object.defineProperty(n,r,c):n[r]=w(s[r]),n},e)}function E(s,t,e){Object.defineProperty(s,t,{enumerable:!1,writable:!0,configurable:!0}),s[t]=e}function ne(s,t,e){let n=[];const r=()=>{n.forEach(f=>f()),n=[]},c=b(s,t,({firstChange:f,currentValue:h})=>{!f&&e(),r(),R(h)&&"Object"===h.constructor.name&&Object.keys(h).forEach(g=>{n.push(ne(s,[...t,g],e))})});return()=>{c.unsubscribe(),r()}}function b(s,t,e){s._observers||E(s,"_observers",{});let n=s;for(let h=0;h<t.length-1;h++)(!n[t[h]]||!R(n[t[h]]))&&(n[t[h]]=/^\d+$/.test(t[h+1])?[]:{}),n=n[t[h]];const r=t[t.length-1],c=t.join(".");s._observers[c]||(s._observers[c]={value:n[r],onChange:[]});const f=s._observers[c];if(n[r]!==f.value&&(f.value=n[r]),-1===f.onChange.indexOf(e)&&(f.onChange.push(e),e({currentValue:f.value,firstChange:!0}),f.onChange.length>=1&&R(n))){const{enumerable:h}=Object.getOwnPropertyDescriptor(n,r)||{enumerable:!0};Object.defineProperty(n,r,{enumerable:h,configurable:!0,get:()=>f.value,set:g=>{if(g!==f.value){const _=f.value;f.value=g,f.onChange.forEach(C=>C({previousValue:_,currentValue:g,firstChange:!1}))}}})}return{setValue(h){if(h===f.value)return;const g=f.value;f.value=h,f.onChange.forEach(_=>{_!==e&&_({previousValue:g,currentValue:h,firstChange:!1})})},unsubscribe(){f.onChange=f.onChange.filter(h=>h!==e),0===f.onChange.length&&delete s._observers[c]}}}function K(s,t){if(t=Array.isArray(t)?t.join("."):t,s.fieldGroup)for(let e=0,n=s.fieldGroup.length;e<n;e++){const r=s.fieldGroup[e],c=Array.isArray(r.key)?r.key.join("."):r.key;if(c===t)return r;if(r.fieldGroup&&(S(c)||0===t.indexOf(`${c}.`))){const f=K(r,S(c)?t:t.slice(c.length+1));if(f)return f}}}function re(s){s._componentRefs?.forEach(t=>{t instanceof u.ComponentRef?t.injector.get(u.ChangeDetectorRef).markForCheck():t.markForCheck()})}const N=new u.InjectionToken("FORMLY_CONFIG");let A=(()=>{class s{constructor(){this.types={},this.validators={},this.wrappers={},this.messages={},this.extras={checkExpressionOn:"modelChange",lazyRender:!0,resetFieldOnHide:!0,renderFormlyFieldElement:!0,showError:e=>e.formControl?.invalid&&(e.formControl?.touched||e.options.parentForm?.submitted||!!e.field.validation?.show)},this.extensions={},this.presets={},this.extensionsByPriority={}}addConfig(e){e.types&&e.types.forEach(n=>this.setType(n)),e.validators&&e.validators.forEach(n=>this.setValidator(n)),e.wrappers&&e.wrappers.forEach(n=>this.setWrapper(n)),e.validationMessages&&e.validationMessages.forEach(n=>this.addValidatorMessage(n.name,n.message)),e.extensions&&this.setSortedExtensions(e.extensions),e.extras&&(this.extras={...this.extras,...e.extras}),e.presets&&(this.presets={...this.presets,...e.presets.reduce((n,r)=>({...n,[r.name]:r.config}),{})})}setType(e){Array.isArray(e)?e.forEach(n=>this.setType(n)):(this.types[e.name]||(this.types[e.name]={name:e.name}),["component","extends","defaultOptions","wrappers"].forEach(n=>{e.hasOwnProperty(n)&&(this.types[e.name][n]=e[n])}))}getType(e,n=!1){if(e instanceof u.Type)return{component:e,name:e.prototype.constructor.name};if(!this.types[e]){if(n)throw new Error(`[Formly Error] The type "${e}" could not be found. Please make sure that is registered through the FormlyModule declaration.`);return null}return this.mergeExtendedType(e),this.types[e]}getMergedField(e={}){const n=this.getType(e.type);if(!n)return;n.defaultOptions&&P(e,n.defaultOptions);const r=n.extends&&this.getType(n.extends).defaultOptions;r&&P(e,r),e?.optionsTypes&&e.optionsTypes.forEach(f=>{const h=this.getType(f).defaultOptions;h&&P(e,h)});const c=this.resolveFieldTypeRef(e);c?.instance?.defaultOptions&&P(e,c.instance.defaultOptions),!e.wrappers&&n.wrappers&&(e.wrappers=[...n.wrappers])}resolveFieldTypeRef(e={}){const n=this.getType(e.type);if(!n)return null;if(!n.component||n._componentRef)return n._componentRef;const{_viewContainerRef:r,_injector:c}=e.options;if(!r||!c)return null;const f=r.createComponent(n.component,{injector:c});E(n,"_componentRef",f);try{f.destroy()}catch(h){console.error(`An error occurred while destroying the Formly component type "${e.type}"`,h)}return n._componentRef}setWrapper(e){this.wrappers[e.name]=e,e.types&&e.types.forEach(n=>{this.setTypeWrapper(n,e.name)})}getWrapper(e){if(e instanceof u.Type)return{component:e,name:e.prototype.constructor.name};if(!this.wrappers[e])throw new Error(`[Formly Error] The wrapper "${e}" could not be found. Please make sure that is registered through the FormlyModule declaration.`);return this.wrappers[e]}setTypeWrapper(e,n){this.types[e]||(this.types[e]={}),this.types[e].wrappers||(this.types[e].wrappers=[]),-1===this.types[e].wrappers.indexOf(n)&&this.types[e].wrappers.push(n)}setValidator(e){this.validators[e.name]=e}getValidator(e){if(!this.validators[e])throw new Error(`[Formly Error] The validator "${e}" could not be found. Please make sure that is registered through the FormlyModule declaration.`);return this.validators[e]}addValidatorMessage(e,n){this.messages[e]=n}getValidatorMessage(e){return this.messages[e]}setSortedExtensions(e){e.forEach(n=>{const r=n.priority??1;this.extensionsByPriority[r]={...this.extensionsByPriority[r],[n.name]:n.extension}}),this.extensions=Object.keys(this.extensionsByPriority).map(Number).sort((n,r)=>n-r).reduce((n,r)=>({...n,...this.extensionsByPriority[r]}),{})}mergeExtendedType(e){if(!this.types[e].extends)return;const n=this.getType(this.types[e].extends);this.types[e].component||(this.types[e].component=n.component),this.types[e].wrappers||(this.types[e].wrappers=n.wrappers)}}return s.\u0275fac=function(e){return new(e||s)},s.\u0275prov=u.\u0275\u0275defineInjectable({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),G=(()=>{class s{constructor(e,n,r,c){this.config=e,this.injector=n,this.viewContainerRef=r,this.parentForm=c}buildForm(e,n=[],r,c){this.build({fieldGroup:n,model:r,form:e,options:c})}build(e){if(!this.config.extensions.core)throw new Error("NgxFormly: missing `forRoot()` call. use `forRoot()` when registering the `FormlyModule`.");e.parent?this._build(e):(this._setOptions(e),function ye(s,t){const e=s._updateTreeValidity.bind(s);s._updateTreeValidity=()=>{},t(),s._updateTreeValidity=e}(e.form,()=>{this._build(e);const n=e.options;n.checkExpressions?.(e,!0),n.detectChanges?.(e)}))}_build(e){if(!e)return;const n=Object.values(this.config.extensions);n.forEach(r=>r.prePopulate?.(e)),n.forEach(r=>r.onPopulate?.(e)),e.fieldGroup?.forEach(r=>this._build(r)),n.forEach(r=>r.postPopulate?.(e))}_setOptions(e){e.form=e.form||new d.FormGroup({}),e.model=e.model||{},e.options=e.options||{};const n=e.options;n._viewContainerRef||E(n,"_viewContainerRef",this.viewContainerRef),n._injector||E(n,"_injector",this.injector),n.build||(n._buildForm=()=>{console.warn("Formly: 'options._buildForm' is deprecated since v6.0, use 'options.build' instead."),this.build(e)},n.build=(r=e)=>(this.build(r),r)),!n.parentForm&&this.parentForm&&(E(n,"parentForm",this.parentForm),b(n,["parentForm","submitted"],({firstChange:r})=>{r||(n.checkExpressions(e),n.detectChanges(e))}))}}return s.\u0275fac=function(e){return new(e||s)(u.\u0275\u0275inject(A),u.\u0275\u0275inject(u.Injector),u.\u0275\u0275inject(u.ViewContainerRef,8),u.\u0275\u0275inject(d.FormGroupDirective,8))},s.\u0275prov=u.\u0275\u0275defineInjectable({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();function X(s,t=!1){const e=s.formControl,n=e._fields?e._fields.indexOf(s):-1;-1!==n&&e._fields.splice(n,1);const r=e.parent;if(!r)return;const c={emitEvent:t};if(r instanceof d.FormArray){const f=r.controls.findIndex(h=>h===e);-1!==f&&r.removeAt(f,c)}else if(r instanceof d.FormGroup){const f=D(s),h=f[f.length-1];r.get([h])===e&&r.removeControl(h,c)}e.setParent(null)}function se(s){return s.formControl?s.formControl:!1===s.shareFormControl?null:s.form?.get(D(s))}function Q(s,t,e=!1){if((t=t||s.formControl)._fields||E(t,"_fields",[]),-1===t._fields.indexOf(s)&&t._fields.push(s),!s.formControl&&t){E(s,"formControl",t),t.setValidators(null),t.setAsyncValidators(null),s.props.disabled=!!s.props.disabled;const h=b(s,["props","disabled"],({firstChange:g,currentValue:_})=>{g||(_?s.formControl.disable():s.formControl.enable())});t instanceof d.FormControl&&t.registerOnDisabledChange(h.setValue)}if(!s.form||!v(s))return;let n=s.form;const r=D(s),c=k(s);(!S(t.value)||!S(c))&&t.value!==c&&t instanceof d.FormControl&&t.patchValue(c);for(let h=0;h<r.length-1;h++){const g=r[h];n.get([g])||n.setControl(g,new d.FormGroup({}),{emitEvent:e}),n=n.get([g])}const f=r[r.length-1];!s._hide&&n.get([f])!==t&&n.setControl(f,t,{emitEvent:e})}function L(s,t=!1){const e=s.status,n=s.value;s.updateValueAndValidity({emitEvent:!1,onlySelf:t}),e!==s.status&&s.statusChanges.emit(s.status),n!==s.value&&s.valueChanges.emit(s.value)}function oe(s){delete s?._fields,s.setValidators(null),s.setAsyncValidators(null),(s instanceof d.FormGroup||s instanceof d.FormArray)&&Object.values(s.controls).forEach(t=>oe(t))}let ie=(()=>{class s{constructor(e){this.ref=e}ngOnChanges(){this.name=this.name||"formly-group"}}return s.\u0275fac=function(e){return new(e||s)(u.\u0275\u0275directiveInject(u.TemplateRef))},s.\u0275dir=u.\u0275\u0275defineDirective({type:s,selectors:[["","formlyTemplate",""]],inputs:{name:["formlyTemplate","name"]},features:[u.\u0275\u0275NgOnChangesFeature]}),s})(),B=(()=>{class s{}return s.\u0275fac=function(e){return new(e||s)},s.\u0275prov=u.\u0275\u0275defineInjectable({token:s,factory:s.\u0275fac}),s})(),ae=(()=>{class s{constructor(e,n,r,c,f){this.config=e,this.renderer=n,this._elementRef=r,this.hostContainerRef=c,this.form=f,this.hostObservers=[],this.componentRefs=[],this.hooksObservers=[],this.detectFieldBuild=!1,this.valueChangesUnsubscribe=()=>{}}get containerRef(){return this.config.extras.renderFormlyFieldElement?this.viewContainerRef:this.hostContainerRef}get elementRef(){return this.config.extras.renderFormlyFieldElement?this._elementRef:this.componentRefs?.[0]instanceof u.ComponentRef?this.componentRefs[0].location:null}ngAfterContentInit(){this.triggerHook("afterContentInit")}ngAfterViewInit(){this.triggerHook("afterViewInit")}ngDoCheck(){this.detectFieldBuild&&this.field&&this.field.options&&this.render()}ngOnInit(){this.triggerHook("onInit")}ngOnChanges(e){this.triggerHook("onChanges",e)}ngOnDestroy(){this.resetRefs(this.field),this.hostObservers.forEach(e=>e.unsubscribe()),this.hooksObservers.forEach(e=>e()),this.valueChangesUnsubscribe(),this.triggerHook("onDestroy")}renderField(e,n,r=[]){if(this.containerRef===e&&(this.resetRefs(this.field),this.containerRef.clear(),r=this.field?.wrappers),r?.length>0){const[c,...f]=r,{component:h}=this.config.getWrapper(c),g=e.createComponent(h);this.attachComponentRef(g,n),b(g.instance,["fieldComponent"],({currentValue:_,previousValue:C,firstChange:U})=>{if(_){if(C&&C._lContainer===_._lContainer)return;const z=C?C.detach():null;z&&!z.destroyed?_.insert(z):this.renderField(_,n,f),!U&&g.changeDetectorRef.detectChanges()}})}else if(n?.type){const c=this.form?.templates?.find(h=>h.name===n.type);let f;if(c)f=e.createEmbeddedView(c.ref,{$implicit:n});else{const{component:h}=this.config.getType(n.type,!0);f=e.createComponent(h)}this.attachComponentRef(f,n)}}triggerHook(e,n){if(("onInit"===e||"onChanges"===e&&n.field&&!n.field.firstChange)&&(this.valueChangesUnsubscribe=this.fieldChanges(this.field)),this.field?.hooks?.[e]&&(!n||n.field)){const r=this.field.hooks[e](this.field);if((0,T.isObservable)(r)&&-1!==["onInit","afterContentInit","afterViewInit"].indexOf(e)){const c=r.subscribe();this.hooksObservers.push(()=>c.unsubscribe())}}"onChanges"===e&&n.field&&(this.resetRefs(n.field.previousValue),this.render())}attachComponentRef(e,n){this.componentRefs.push(e),n._componentRefs.push(e),e instanceof u.ComponentRef&&Object.assign(e.instance,{field:n})}render(){if(this.field){if(!this.field.options)return void(this.detectFieldBuild=!0);this.detectFieldBuild=!1,this.hostObservers.forEach(e=>e.unsubscribe()),this.hostObservers=[b(this.field,["hide"],({firstChange:e,currentValue:n})=>{const r=this.containerRef;!1===this.config.extras.lazyRender?(e&&this.renderField(r,this.field),(!e||e&&n)&&this.elementRef&&this.renderer.setStyle(this.elementRef.nativeElement,"display",n?"none":"")):n?(r.clear(),this.field.className&&this.renderer.removeAttribute(this.elementRef.nativeElement,"class")):(this.renderField(r,this.field),this.field.className&&this.renderer.setAttribute(this.elementRef.nativeElement,"class",this.field.className)),!e&&this.field.options.detectChanges(this.field)}),b(this.field,["className"],({firstChange:e,currentValue:n})=>{(!e||e&&n)&&(!this.config.extras.lazyRender||!0!==this.field.hide)&&this.elementRef&&this.renderer.setAttribute(this.elementRef.nativeElement,"class",n)}),...["touched","pristine","status"].map(e=>b(this.field,["formControl",e],({firstChange:n})=>!n&&re(this.field)))]}}resetRefs(e){e&&(e._localFields?e._localFields=[]:E(this.field,"_localFields",[]),e._componentRefs?e._componentRefs=e._componentRefs.filter(n=>-1===this.componentRefs.indexOf(n)):E(this.field,"_componentRefs",[])),this.componentRefs=[]}fieldChanges(e){if(this.valueChangesUnsubscribe(),!e)return()=>{};const n=[ne(e,["props"],()=>e.options.detectChanges(e))];e.options&&n.push(ne(e.options,["formState"],()=>e.options.detectChanges(e)));for(const c of Object.keys(e._expressions||{})){const f=b(e,["_expressions",c],({currentValue:h,previousValue:g})=>{g?.subscription&&(g.subscription.unsubscribe(),g.subscription=null),(0,T.isObservable)(h.value$)&&(h.subscription=h.value$.subscribe())});n.push(()=>{e._expressions[c]?.subscription&&e._expressions[c].subscription.unsubscribe(),f.unsubscribe()})}for(const c of[["focus"],["template"],["fieldGroupClassName"],["validation","show"]]){const f=b(e,c,({firstChange:h})=>!h&&e.options.detectChanges(e));n.push(()=>f.unsubscribe())}if(e.formControl&&!e.fieldGroup){const c=e.formControl;let f=c.valueChanges.pipe((0,F.distinctUntilChanged)((C,U)=>!(C!==U||Array.isArray(C)||R(C))));c.value!==k(e)&&(f=f.pipe((0,F.startWith)(c.value)));const{updateOn:h,debounce:g}=e.modelOptions;(!h||"change"===h)&&g?.default>0&&(f=c.valueChanges.pipe((0,F.debounceTime)(g.default)));const _=f.subscribe(C=>{c._fields?.length>1&&c instanceof d.FormControl&&c.patchValue(C,{emitEvent:!1,onlySelf:!0}),e.parsers?.forEach(U=>C=U(C)),C===e.formControl.value?(v(e)&&j(e,C),e.options.fieldChanges.next({value:C,field:e,type:"valueChanges"})):e.formControl.setValue(C)});n.push(()=>_.unsubscribe())}let r=[];return b(e,["_localFields"],({currentValue:c})=>{r.forEach(f=>f()),r=(c||[]).map(f=>this.fieldChanges(f))}),()=>{n.forEach(c=>c()),r.forEach(c=>c())}}}return s.\u0275fac=function(e){return new(e||s)(u.\u0275\u0275directiveInject(A),u.\u0275\u0275directiveInject(u.Renderer2),u.\u0275\u0275directiveInject(u.ElementRef),u.\u0275\u0275directiveInject(u.ViewContainerRef),u.\u0275\u0275directiveInject(B,8))},s.\u0275cmp=u.\u0275\u0275defineComponent({type:s,selectors:[["formly-field"]],viewQuery:function(e,n){if(1&e&&u.\u0275\u0275viewQuery($,7,u.ViewContainerRef),2&e){let r;u.\u0275\u0275queryRefresh(r=u.\u0275\u0275loadQuery())&&(n.viewContainerRef=r.first)}},inputs:{field:"field"},features:[u.\u0275\u0275NgOnChangesFeature],decls:2,vars:0,consts:[["container",""]],template:function(e,n){1&e&&u.\u0275\u0275template(0,me,0,0,"ng-template",null,0,u.\u0275\u0275templateRefExtractor)},styles:["[_nghost-%COMP%]:empty{display:none}"]}),s})(),Re=(()=>{class s{constructor(e,n,r,c){this.builder=e,this.config=n,this.ngZone=r,this.fieldTemplates=c,this.modelChange=new u.EventEmitter,this.field={type:"formly-group"},this._modelChangeValue={},this.valueChangesUnsubscribe=()=>{}}set form(e){this.field.form=e}get form(){return this.field.form}set model(e){this.config.extras.immutable&&this._modelChangeValue===e||this.setField({model:e})}get model(){return this.field.model}set fields(e){this.setField({fieldGroup:e})}get fields(){return this.field.fieldGroup}set options(e){this.setField({options:e})}get options(){return this.field.options}set templates(e){this.fieldTemplates.templates=e}ngDoCheck(){"changeDetectionCheck"===this.config.extras.checkExpressionOn&&this.checkExpressionChange()}ngOnChanges(e){e.fields&&this.form&&oe(this.form),(e.fields||e.form||e.model&&this._modelChangeValue!==e.model.currentValue)&&(this.valueChangesUnsubscribe(),this.builder.build(this.field),this.valueChangesUnsubscribe=this.valueChanges())}ngOnDestroy(){this.valueChangesUnsubscribe()}checkExpressionChange(){this.field.options.checkExpressions?.(this.field)}valueChanges(){this.valueChangesUnsubscribe();const e=this.field.options.fieldChanges.pipe((0,F.filter)(({field:n,type:r})=>v(n)&&"valueChanges"===r),(0,F.switchMap)(()=>this.ngZone.onStable.asObservable().pipe((0,F.take)(1)))).subscribe(()=>this.ngZone.runGuarded(()=>{this.checkExpressionChange(),this.modelChange.emit(this._modelChangeValue=w(this.model))}));return()=>e.unsubscribe()}setField(e){this.config.extras.immutable?this.field={...this.field,...w(e)}:Object.keys(e).forEach(n=>this.field[n]=e[n])}}return s.\u0275fac=function(e){return new(e||s)(u.\u0275\u0275directiveInject(G),u.\u0275\u0275directiveInject(A),u.\u0275\u0275directiveInject(u.NgZone),u.\u0275\u0275directiveInject(B))},s.\u0275cmp=u.\u0275\u0275defineComponent({type:s,selectors:[["formly-form"]],contentQueries:function(e,n,r){if(1&e&&u.\u0275\u0275contentQuery(r,ie,4),2&e){let c;u.\u0275\u0275queryRefresh(c=u.\u0275\u0275loadQuery())&&(n.templates=c)}},inputs:{form:"form",model:"model",fields:"fields",options:"options"},outputs:{modelChange:"modelChange"},features:[u.\u0275\u0275ProvidersFeature([G,B]),u.\u0275\u0275NgOnChangesFeature],decls:1,vars:1,consts:[[3,"field"]],template:function(e,n){1&e&&u.\u0275\u0275element(0,"formly-field",0),2&e&&u.\u0275\u0275property("field",n.field)},dependencies:[ae],encapsulation:2,changeDetection:0}),s})(),le=(()=>{class s{constructor(e,n,r){this.renderer=e,this.elementRef=n,this.uiAttributesCache={},this.uiEvents={listeners:[],events:["click","keyup","keydown","keypress","focus","blur","change"],callback:(c,f)=>{switch(c){case"focus":return this.onFocus(f);case"blur":return this.onBlur(f);case"change":return this.onChange(f);default:return this.props[c](this.field,f)}}},this.document=r}get props(){return this.field.props||{}}get fieldAttrElements(){return this.field?._elementRefs||[]}ngOnChanges(e){e.field&&(this.field.name&&this.setAttribute("name",this.field.name),this.uiEvents.listeners.forEach(n=>n()),this.uiEvents.events.forEach(n=>{(this.props?.[n]||-1!==["focus","blur","change"].indexOf(n))&&this.uiEvents.listeners.push(this.renderer.listen(this.elementRef.nativeElement,n,r=>this.uiEvents.callback(n,r)))}),this.props?.attributes&&b(this.field,["props","attributes"],({currentValue:n,previousValue:r})=>{r&&Object.keys(r).forEach(c=>this.removeAttribute(c)),n&&Object.keys(n).forEach(c=>{null!=n[c]&&this.setAttribute(c,n[c])})}),this.detachElementRef(e.field.previousValue),this.attachElementRef(e.field.currentValue),1===this.fieldAttrElements.length&&(!this.id&&this.field.id&&this.setAttribute("id",this.field.id),this.focusObserver=b(this.field,["focus"],({currentValue:n})=>{this.toggleFocus(n)}))),e.id&&this.setAttribute("id",this.id)}ngDoCheck(){if(!this.uiAttributes){const e=this.elementRef.nativeElement;this.uiAttributes=[...W,"tabindex","placeholder","readonly","disabled","step"].filter(n=>!e.hasAttribute||!e.hasAttribute(n))}this.uiAttributes.forEach(e=>{const n=this.props[e];this.uiAttributesCache[e]!==n&&(!this.props.attributes||!this.props.attributes.hasOwnProperty(e.toLowerCase()))&&(this.uiAttributesCache[e]=n,n||0===n?this.setAttribute(e,!0===n?e:`${n}`):this.removeAttribute(e))})}ngOnDestroy(){this.uiEvents.listeners.forEach(e=>e()),this.detachElementRef(this.field),this.focusObserver?.unsubscribe()}toggleFocus(e){const n=this.fieldAttrElements?this.fieldAttrElements[0]:null;if(!n||!n.nativeElement.focus)return;const r=!!this.document.activeElement&&this.fieldAttrElements.some(({nativeElement:c})=>this.document.activeElement===c||c.contains(this.document.activeElement));e&&!r?Promise.resolve().then(()=>n.nativeElement.focus()):!e&&r&&Promise.resolve().then(()=>n.nativeElement.blur())}onFocus(e){this.focusObserver?.setValue(!0),this.props.focus?.(this.field,e)}onBlur(e){this.focusObserver?.setValue(!1),this.props.blur?.(this.field,e)}onHostChange(e){e instanceof Event||this.onChange(e)}onChange(e){this.props.change?.(this.field,e),this.field.formControl?.markAsDirty()}attachElementRef(e){!e||(-1===e._elementRefs?.indexOf(this.elementRef)?e._elementRefs.push(this.elementRef):E(e,"_elementRefs",[this.elementRef]))}detachElementRef(e){const n=e?._elementRefs?this.fieldAttrElements.indexOf(this.elementRef):-1;-1!==n&&e._elementRefs.splice(n,1)}setAttribute(e,n){this.renderer.setAttribute(this.elementRef.nativeElement,e,n)}removeAttribute(e){this.renderer.removeAttribute(this.elementRef.nativeElement,e)}}return s.\u0275fac=function(e){return new(e||s)(u.\u0275\u0275directiveInject(u.Renderer2),u.\u0275\u0275directiveInject(u.ElementRef),u.\u0275\u0275directiveInject(I.DOCUMENT))},s.\u0275dir=u.\u0275\u0275defineDirective({type:s,selectors:[["","formlyAttributes",""]],hostBindings:function(e,n){1&e&&u.\u0275\u0275listener("change",function(c){return n.onHostChange(c)})},inputs:{field:["formlyAttributes","field"],id:"id"},features:[u.\u0275\u0275NgOnChangesFeature]}),s})(),Z=(()=>{class s{constructor(){this.field={}}set controls(e){this.field._localFields=e.map(r=>r.control._fields||[]).flat().filter(r=>r.formControl!==this.field.formControl)}get model(){return this.field.model}get form(){return this.field.form}get options(){return this.field.options}get key(){return this.field.key}get formControl(){return this.field.formControl}get props(){return this.field.props||{}}get to(){return this.props}get showError(){return this.options.showError(this)}get id(){return this.field.id}get formState(){return this.options?.formState||{}}}return s.\u0275fac=function(e){return new(e||s)},s.\u0275dir=u.\u0275\u0275defineDirective({type:s,viewQuery:function(e,n){if(1&e&&u.\u0275\u0275viewQuery(d.NgControl,5),2&e){let r;u.\u0275\u0275queryRefresh(r=u.\u0275\u0275loadQuery())&&(n.controls=r)}},inputs:{field:"field"}}),s})(),ce=(()=>{class s extends Z{}return s.\u0275fac=function(){let t;return function(n){return(t||(t=u.\u0275\u0275getInheritedFactory(s)))(n||s)}}(),s.\u0275cmp=u.\u0275\u0275defineComponent({type:s,selectors:[["formly-group"]],hostVars:2,hostBindings:function(e,n){2&e&&u.\u0275\u0275classMap(n.field.fieldGroupClassName||"")},features:[u.\u0275\u0275InheritDefinitionFeature],ngContentSelectors:ge,decls:2,vars:1,consts:[[3,"field",4,"ngFor","ngForOf"],[3,"field"]],template:function(e,n){1&e&&(u.\u0275\u0275projectionDef(),u.\u0275\u0275template(0,q,1,1,"formly-field",0),u.\u0275\u0275projection(1)),2&e&&u.\u0275\u0275property("ngForOf",n.field.fieldGroup)},dependencies:[ae,I.NgForOf],encapsulation:2,changeDetection:0}),s})(),Ce=(()=>{class s{constructor(e){this.config=e}ngOnChanges(){const e=W.map(n=>`templateOptions.${n}`);this.errorMessage$=(0,T.merge)(this.field.formControl.statusChanges,this.field.options?this.field.options.fieldChanges.pipe((0,F.filter)(({field:n,type:r,property:c})=>n===this.field&&"expressionChanges"===r&&(-1!==c.indexOf("validation")||-1!==e.indexOf(c)))):(0,T.of)(null)).pipe((0,F.startWith)(null),(0,F.switchMap)(()=>(0,T.isObservable)(this.errorMessage)?this.errorMessage:(0,T.of)(this.errorMessage)))}get errorMessage(){const e=this.field.formControl;for(const n in e.errors)if(e.errors.hasOwnProperty(n)){let r=this.config.getValidatorMessage(n);if(R(e.errors[n])){if(e.errors[n].errorPath)return;e.errors[n].message&&(r=e.errors[n].message)}return this.field.validation?.messages?.[n]&&(r=this.field.validation.messages[n]),this.field.validators?.[n]?.message&&(r=this.field.validators[n].message),this.field.asyncValidators?.[n]?.message&&(r=this.field.asyncValidators[n].message),"function"==typeof r?r(e.errors[n],this.field):r}}}return s.\u0275fac=function(e){return new(e||s)(u.\u0275\u0275directiveInject(A))},s.\u0275cmp=u.\u0275\u0275defineComponent({type:s,selectors:[["formly-validation-message"]],inputs:{field:"field"},features:[u.\u0275\u0275NgOnChangesFeature],decls:2,vars:3,template:function(e,n){1&e&&(u.\u0275\u0275text(0),u.\u0275\u0275pipe(1,"async")),2&e&&u.\u0275\u0275textInterpolate(u.\u0275\u0275pipeBind1(1,1,n.errorMessage$))},dependencies:[I.AsyncPipe],encapsulation:2,changeDetection:0}),s})(),_e=(()=>{class s extends Z{onPopulate(e){v(e)&&Q(e,se(e)||new d.FormArray([],{updateOn:e.modelOptions.updateOn})),e.fieldGroup=e.fieldGroup||[];const n=Array.isArray(e.model)?e.model.length:0;if(e.fieldGroup.length>n)for(let r=e.fieldGroup.length-1;r>=n;--r)X(e.fieldGroup[r],!0),e.fieldGroup.splice(r,1);for(let r=e.fieldGroup.length;r<n;r++){const c={...w("function"==typeof e.fieldArray?e.fieldArray(e):e.fieldArray),key:`${r}`};e.fieldGroup.push(c)}}add(e,n,{markAsDirty:r}={markAsDirty:!0}){e=e??this.field.fieldGroup.length,this.model||j(this.field,[]),this.model.splice(e,0,n?w(n):void 0),this._build(),r&&this.formControl.markAsDirty()}remove(e,{markAsDirty:n}={markAsDirty:!0}){this.model.splice(e,1);const r=this.field.fieldGroup[e];this.field.fieldGroup.splice(e,1),this.field.fieldGroup.forEach((c,f)=>c.key=`${f}`),X(r,!0),this._build(),n&&this.formControl.markAsDirty()}_build(){(this.field.formControl._fields??[this.field]).forEach(n=>this.options.build(n)),this.options.fieldChanges.next({field:this.field,value:k(this.field),type:"valueChanges"})}}return s.\u0275fac=function(){let t;return function(n){return(t||(t=u.\u0275\u0275getInheritedFactory(s)))(n||s)}}(),s.\u0275dir=u.\u0275\u0275defineDirective({type:s,features:[u.\u0275\u0275InheritDefinitionFeature]}),s})(),ue=(()=>{class s extends Z{set _staticContent(e){this.fieldComponent=e}}return s.\u0275fac=function(){let t;return function(n){return(t||(t=u.\u0275\u0275getInheritedFactory(s)))(n||s)}}(),s.\u0275dir=u.\u0275\u0275defineDirective({type:s,viewQuery:function(e,n){if(1&e&&(u.\u0275\u0275viewQuery(ee,5,u.ViewContainerRef),u.\u0275\u0275viewQuery(ee,7,u.ViewContainerRef)),2&e){let r;u.\u0275\u0275queryRefresh(r=u.\u0275\u0275loadQuery())&&(n.fieldComponent=r.first),u.\u0275\u0275queryRefresh(r=u.\u0275\u0275loadQuery())&&(n._staticContent=r.first)}},features:[u.\u0275\u0275InheritDefinitionFeature]}),s})(),we=(()=>{class s extends Z{constructor(e){super(),this.sanitizer=e,this.innerHtml={}}get template(){return this.field&&this.field.template!==this.innerHtml.template&&(this.innerHtml={template:this.field.template,content:this.props.safeHtml?this.sanitizer.bypassSecurityTrustHtml(this.field.template):this.field.template}),this.innerHtml.content}}return s.\u0275fac=function(e){return new(e||s)(u.\u0275\u0275directiveInject(he.H7))},s.\u0275cmp=u.\u0275\u0275defineComponent({type:s,selectors:[["formly-template"]],features:[u.\u0275\u0275InheritDefinitionFeature],decls:1,vars:1,consts:[[3,"innerHtml"]],template:function(e,n){1&e&&u.\u0275\u0275element(0,"div",0),2&e&&u.\u0275\u0275property("innerHtml",n.template,u.\u0275\u0275sanitizeHtml)},encapsulation:2,changeDetection:0}),s})();class pe{onPopulate(t){if(t._expressions)return;E(t,"_expressions",{}),b(t,["hide"],({currentValue:n,firstChange:r})=>{E(t,"_hide",!!n),(!r||r&&!0===n)&&(t.props.hidden=n,t.options._hiddenFieldsForCheck.push(t))}),t.hideExpression&&b(t,["hideExpression"],({currentValue:n})=>{t._expressions.hide=this.parseExpressions(t,"hide","boolean"==typeof n?()=>n:n)});const e=(n,r)=>{"string"==typeof r||Y(r)?t._expressions[n]=this.parseExpressions(t,n,r):r instanceof T.Observable&&(t._expressions[n]={value$:r.pipe((0,F.tap)(c=>{this.evalExpr(t,n,c),t.options.detectChanges(t)}))})};t.expressions=t.expressions||{};for(const n of Object.keys(t.expressions))b(t,["expressions",n],({currentValue:r})=>{e(n,Y(r)?(...c)=>r(t,c[3]):r)});t.expressionProperties=t.expressionProperties||{};for(const n of Object.keys(t.expressionProperties))b(t,["expressionProperties",n],({currentValue:r})=>e(n,r))}postPopulate(t){if(!t.parent&&!t.options.checkExpressions){let e=!1;t.options.checkExpressions=(n,r)=>{if(e)return;e=!0;const c=this.checkExpressions(n,r),f=t.options;f._hiddenFieldsForCheck.sort(h=>h.hide?-1:1).forEach(h=>this.changeHideState(h,h.hide,!r)),f._hiddenFieldsForCheck=[],c&&(this.checkExpressions(t),t.options&&t.options.detectChanges&&t.options.detectChanges(t)),e=!1},t.options._checkField=(n,r)=>{console.warn("Formly: 'options._checkField' is deprecated since v6.0, use 'options.checkExpressions' instead."),t.options.checkExpressions(n,r)}}}parseExpressions(t,e,n){let r,c;if(t.parent&&["hide","props.disabled"].includes(e)){const f=h=>"hide"===e?h.hide:h.props.disabled;r=()=>{let h=t.parent;for(;h.parent&&!f(h);)h=h.parent;return f(h)}}return"string"==typeof(n=n||(()=>!1))&&(n=function de(s,t){try{return Function(...t,`return ${s};`)}catch(e){console.error(e)}}(n,["model","formState","field"])),{callback:f=>{try{const h=function fe(s,t,e){return"function"==typeof s?s.apply(t,e):!!s}(r?(...g)=>r(t)||n(...g):n,{field:t},[t.model,t.options.formState,t,f]);return!(!f&&(c===h||R(h)&&!(0,T.isObservable)(h)&&JSON.stringify(h)===JSON.stringify(c))||(c=h,this.evalExpr(t,e,h),0))}catch(h){throw h.message=`[Formly Error] [Expression "${e}"] ${h.message}`,h}}}}checkExpressions(t,e=!1){if(!t)return!1;let n=!1;if(t._expressions)for(const r of Object.keys(t._expressions))t._expressions[r].callback?.(e)&&(n=!0);return t.fieldGroup?.forEach(r=>this.checkExpressions(r,e)&&(n=!0)),n}changeDisabledState(t,e){t.fieldGroup&&t.fieldGroup.filter(n=>!n._expressions.hasOwnProperty("props.disabled")).forEach(n=>this.changeDisabledState(n,e)),v(t)&&t.props.disabled!==e&&(t.props.disabled=e)}changeHideState(t,e,n){if(t.fieldGroup&&t.fieldGroup.filter(r=>!r._expressions.hide).forEach(r=>this.changeHideState(r,e,n)),t.formControl&&v(t)){E(t,"_hide",!(!e&&!t.hide));const r=t.formControl;r._fields?.length>1&&L(r),!0!==e||r._fields&&!r._fields.every(c=>!!c._hide)?!1===e&&(t.resetOnHide&&!V(t.defaultValue)&&V(k(t))&&j(t,t.defaultValue),Q(t,void 0,!0),t.resetOnHide&&t.fieldArray&&t.fieldGroup?.length!==t.model?.length&&t.options.build(t)):(X(t,!0),n&&t.resetOnHide&&(j(t,void 0),t.formControl.reset({value:void 0,disabled:t.formControl.disabled}),t.options.fieldChanges.next({value:void 0,field:t,type:"valueChanges"}),t.fieldGroup&&t.formControl instanceof d.FormArray&&(t.fieldGroup.length=0)))}t.options.fieldChanges&&t.options.fieldChanges.next({field:t,type:"hidden",value:e})}evalExpr(t,e,n){if(0===e.indexOf("model.")){const r=e.replace(/^model\./,""),c=t.fieldGroup?t:t.parent;let f=t?.key===r?t.formControl:t.form.get(r);!f&&t.get(r)&&(f=t.get(r).formControl),j({key:r,parent:c,model:t.model},n),f&&(!S(f.value)||!S(n))&&f.value!==n&&f.patchValue(n)}else{try{let r=t;const c=this._evalExpressionPath(t,e),f=c.length-1;for(let h=0;h<f;h++)r=r[c[h]];r[c[f]]=n}catch(r){throw r.message=`[Formly Error] [Expression "${e}"] ${r.message}`,r}["templateOptions.disabled","props.disabled"].includes(e)&&v(t)&&this.changeDisabledState(t,n)}this.emitExpressionChanges(t,e,n)}emitExpressionChanges(t,e,n){!t.options.fieldChanges||t.options.fieldChanges.next({field:t,type:"expressionChanges",property:e,value:n})}_evalExpressionPath(t,e){if(t._expressions[e]&&t._expressions[e].paths)return t._expressions[e].paths;let n=[];return-1===e.indexOf("[")?n=e.split("."):e.split(/[[\]]{1,2}/).filter(r=>r).forEach(r=>{const c=r.match(/['|"](.*?)['|"]/);c?n.push(c[1]):n.push(...r.split(".").filter(f=>f))}),t._expressions[e]&&(t._expressions[e].paths=n),n}}class Fe{constructor(t){this.config=t}onPopulate(t){this.initFieldValidation(t,"validators"),this.initFieldValidation(t,"asyncValidators")}initFieldValidation(t,e){const n=[];if("validators"===e&&!(t.hasOwnProperty("fieldGroup")&&!v(t))&&n.push(this.getPredefinedFieldValidation(t)),t[e])for(const r of Object.keys(t[e]))"validation"===r?n.push(...t[e].validation.map(c=>this.wrapNgValidatorFn(t,c))):n.push(this.wrapNgValidatorFn(t,t[e][r],r));E(t,"_"+e,n)}getPredefinedFieldValidation(t){let e=[];return W.forEach(n=>b(t,["props",n],({currentValue:r,firstChange:c})=>{e=e.filter(f=>f!==n),null!=r&&!1!==r&&e.push(n),!c&&t.formControl&&L(t.formControl)})),n=>0===e.length?null:d.Validators.compose(e.map(r=>()=>{const c=t.props[r];switch(r){case"required":return d.Validators.required(n);case"pattern":return d.Validators.pattern(c)(n);case"minLength":const f=d.Validators.minLength(c)(n),h=this.config.getValidatorMessage("minlength")||t.validation?.messages?.minlength?"minlength":"minLength";return f?{[h]:f.minlength}:null;case"maxLength":const g=d.Validators.maxLength(c)(n),_=this.config.getValidatorMessage("maxlength")||t.validation?.messages?.maxlength?"maxlength":"maxLength";return g?{[_]:g.maxlength}:null;case"min":return d.Validators.min(c)(n);case"max":return d.Validators.max(c)(n);default:return null}}))(n)}wrapNgValidatorFn(t,e,n){let r;if("string"==typeof e&&(r=w(this.config.getValidator(e))),"object"==typeof e&&e.name&&(r=w(this.config.getValidator(e.name)),e.options&&(r.options=e.options)),"object"==typeof e&&e.expression){const{expression:c,...f}=e;r={name:n,validation:c,options:Object.keys(f).length>0?f:null}}return"function"==typeof e&&(r={name:n,validation:e}),c=>{const f=r.validation(c,t,r.options);return function be(s){return!!s&&"function"==typeof s.then}(f)?f.then(h=>this.handleAsyncResult(t,n?!!h:h,r)):(0,T.isObservable)(f)?f.pipe((0,F.map)(h=>this.handleAsyncResult(t,n?!!h:h,r))):this.handleResult(t,n?!!f:f,r)}}handleAsyncResult(t,e,n){return t.options.detectChanges(t),this.handleResult(t,e,n)}handleResult(t,e,{name:n,options:r}){"boolean"==typeof e&&(e=e?null:{[n]:r||!0});const c=t.formControl;return c?._childrenErrors?.[n]?.(),R(e)&&Object.keys(e).forEach(f=>{const h=e[f].errorPath?e[f].errorPath:r?.errorPath,g=h?t.formControl.get(h):null;if(g){const{errorPath:_,...C}=e[f];g.setErrors({...g.errors||{},[f]:C}),!c._childrenErrors&&E(c,"_childrenErrors",{}),c._childrenErrors[f]=()=>{const{[f]:U,...z}=g.errors||{};g.setErrors(0===Object.keys(z).length?null:z)}}}),e}}class De{prePopulate(t){this.root||(this.root=t),t.parent&&Object.defineProperty(t,"form",{get:()=>t.parent.formControl,configurable:!0})}onPopulate(t){t.hasOwnProperty("fieldGroup")&&!v(t)?E(t,"formControl",t.form):this.addFormControl(t)}postPopulate(t){if(this.root===t&&(this.root=null,this.setValidators(t)&&t.parent)){let n=t.parent;for(;n;)(v(n)||!n.parent)&&L(n.formControl,!0),n=n.parent}}addFormControl(t){let e=se(t);if(!t.fieldArray){if(!e){const n={updateOn:t.modelOptions.updateOn};if(t.fieldGroup)e=new d.FormGroup({},n);else{const r=v(t)?k(t):t.defaultValue;e=new d.FormControl({value:r,disabled:!!t.props.disabled},{...n,initialValueIsDefault:!0})}}Q(t,e)}}setValidators(t,e=!1){!1===e&&v(t)&&t.props?.disabled&&(e=!0);let n=!1;if(t.fieldGroup?.forEach(r=>r&&this.setValidators(r,e)&&(n=!0)),v(t)||!t.parent||!v(t)&&!t.fieldGroup){const{formControl:r}=t;if(r&&(v(t)&&r instanceof d.FormControl&&(e&&r.enabled&&(r.disable({emitEvent:!1,onlySelf:!0}),n=!0),!e&&r.disabled&&(r.enable({emitEvent:!1,onlySelf:!0}),n=!0)),(null===r.validator||null===r.asyncValidator)&&(r.setValidators(()=>{const c=d.Validators.compose(this.mergeValidators(t,"_validators"));return c?c(r):null}),r.setAsyncValidators(()=>{const c=d.Validators.composeAsync(this.mergeValidators(t,"_asyncValidators"));return c?c(r):(0,T.of)(null)}),n=!0),n)){L(r,!0);let c=r.parent;for(let f=1;f<D(t).length;f++)c&&(L(c,!0),c=c.parent)}}return n}mergeValidators(t,e){const n=[],r=t.formControl;return r?._fields?.length>1?r._fields.filter(c=>!c._hide).forEach(c=>n.push(...c[e])):t[e]&&n.push(...t[e]),t.fieldGroup&&t.fieldGroup.filter(c=>c?.fieldGroup&&!v(c)).forEach(c=>n.push(...this.mergeValidators(c,e))),n}}class Me{constructor(t){this.config=t,this.formId=0}prePopulate(t){const e=t.parent;this.initRootOptions(t),this.initFieldProps(t),e&&(Object.defineProperty(t,"options",{get:()=>e.options,configurable:!0}),Object.defineProperty(t,"model",{get:()=>v(t)&&t.fieldGroup?k(t):e.model,configurable:!0})),Object.defineProperty(t,"get",{value:n=>K(t,n),configurable:!0}),this.getFieldComponentInstance(t).prePopulate?.(t)}onPopulate(t){this.initFieldOptions(t),this.getFieldComponentInstance(t).onPopulate?.(t),t.fieldGroup&&t.fieldGroup.forEach((e,n)=>{e&&(Object.defineProperty(e,"parent",{get:()=>t,configurable:!0}),Object.defineProperty(e,"index",{get:()=>n,configurable:!0})),this.formId++})}postPopulate(t){this.getFieldComponentInstance(t).postPopulate?.(t)}initFieldProps(t){t.props??(t.props=t.templateOptions),Object.defineProperty(t,"templateOptions",{get:()=>t.props,set:e=>t.props=e,configurable:!0})}initRootOptions(t){if(t.parent)return;const e=t.options;t.options.formState=t.options.formState||{},e.showError||(e.showError=this.config.extras.showError),e.fieldChanges||E(e,"fieldChanges",new T.Subject),e._hiddenFieldsForCheck||(e._hiddenFieldsForCheck=[]),e._markForCheck=n=>{console.warn("Formly: 'options._markForCheck' is deprecated since v6.0, use 'options.detectChanges' instead."),e.detectChanges(n)},e.detectChanges=n=>{n._componentRefs&&(n.options.checkExpressions(n),re(n)),n.fieldGroup?.forEach(r=>r&&e.detectChanges(r))},e.resetModel=n=>{n=w(n??e._initialModel),t.model&&(Object.keys(t.model).forEach(r=>delete t.model[r]),Object.assign(t.model,n||{})),e.build(t),t.form.reset(t.model),e.parentForm&&e.parentForm.control===t.formControl&&(e.parentForm.submitted=!1)},e.updateInitialValue=n=>e._initialModel=w(n??t.model),t.options.updateInitialValue()}initFieldOptions(t){if(P(t,{id:ve(`formly_${this.formId}`,t,t.index),hooks:{},modelOptions:{},validation:{messages:{}},props:t.type&&v(t)?{label:"",placeholder:"",disabled:!1}:{}}),this.config.extras.resetFieldOnHide&&!1!==t.resetOnHide&&(t.resetOnHide=!0),"formly-template"!==t.type&&(t.template||t.expressions?.template||t.expressionProperties?.template)&&(t.type="formly-template"),!t.type&&t.fieldGroup&&(t.type="formly-group"),t.type&&this.config.getMergedField(t),v(t)&&!V(t.defaultValue)&&V(k(t))){const e=r=>r.hide||r.expressions?.hide||r.hideExpression;let n=!t.resetOnHide||!e(t);if(!e(t)&&t.resetOnHide){let r=t.parent;for(;r&&!e(r);)r=r.parent;n=!r||!e(r)}n&&j(t,t.defaultValue)}t.wrappers=t.wrappers||[]}getFieldComponentInstance(t){const e=()=>{let n=this.config.resolveFieldTypeRef(t);const r=t._componentRefs?.slice(-1)[0];return r instanceof u.ComponentRef&&r?.componentType===n?.componentType&&(n=r),n?.instance};return t._proxyInstance||E(t,"_proxyInstance",new Proxy({},{get:(n,r)=>e()?.[r],set:(n,r,c)=>e()[r]=c})),t._proxyInstance}}function Te(s){return{types:[{name:"formly-group",component:ce},{name:"formly-template",component:we}],extensions:[{name:"core",extension:new Me(s),priority:-250},{name:"field-validation",extension:new Fe(s),priority:-200},{name:"field-form",extension:new De,priority:-150},{name:"field-expression",extension:new pe,priority:-100}]}}let Oe=(()=>{class s{constructor(e,n=[]){!n||n.forEach(r=>e.addConfig(r))}static forRoot(e={}){return{ngModule:s,providers:[{provide:N,multi:!0,useFactory:Te,deps:[A]},{provide:N,useValue:e,multi:!0},A,G]}}static forChild(e={}){return{ngModule:s,providers:[{provide:N,multi:!0,useFactory:Te,deps:[A]},{provide:N,useValue:e,multi:!0},G]}}}return s.\u0275fac=function(e){return new(e||s)(u.\u0275\u0275inject(A),u.\u0275\u0275inject(N,8))},s.\u0275mod=u.\u0275\u0275defineNgModule({type:s}),s.\u0275inj=u.\u0275\u0275defineInjector({imports:[[I.CommonModule]]}),s})()}}]);