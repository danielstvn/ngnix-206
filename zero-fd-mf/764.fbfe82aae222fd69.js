(self.webpackChunkzero_fd_mf=self.webpackChunkzero_fd_mf||[]).push([[764],{4735:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{CanvasComponent:()=>CanvasComponent});var _home_cmelo_git_fd_zero_fd_mf_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__(15861),_angular_cdk_drag_drop__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__(6075),_angular_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(45449),_angular_core__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_angular_core__WEBPACK_IMPORTED_MODULE_0__),_angular_forms__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(93071),_angular_forms__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(_angular_forms__WEBPACK_IMPORTED_MODULE_1__),lodash__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(17489),lodash__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_2__),rxjs__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(13406),rxjs__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(rxjs__WEBPACK_IMPORTED_MODULE_3__),primeng_dynamicdialog__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(11177),primeng_dynamicdialog__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(primeng_dynamicdialog__WEBPACK_IMPORTED_MODULE_4__),_library_library_component__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(39858),_template_template_component__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(86361),_const_json__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(23491),primeng_api__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(60859),primeng_api__WEBPACK_IMPORTED_MODULE_8___default=__webpack_require__.n(primeng_api__WEBPACK_IMPORTED_MODULE_8__),src_app_shared_services_zmc_designer_service__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(82019),src_app_shared_common_common_values_service__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(74243),src_app_shared_services_value_list_service__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(75341),src_app_shared_services_library_service__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(19511),src_app_shared_services_cache_service__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(87602),src_app_shared_services_template_service__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(23733),src_app_shared_i18n_services_i18n_service__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(86116),_angular_router__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(10730),_angular_router__WEBPACK_IMPORTED_MODULE_16___default=__webpack_require__.n(_angular_router__WEBPACK_IMPORTED_MODULE_16__),_angular_common__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__(90944),_angular_common__WEBPACK_IMPORTED_MODULE_17___default=__webpack_require__.n(_angular_common__WEBPACK_IMPORTED_MODULE_17__),gallery_lib__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__(57303),_preview_preview_component__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__(81603);function CanvasComponent_div_0_Template(t,i){if(1&t){const e=_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275getCurrentView();_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275elementStart(0,"div",2)(1,"form",3),_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275element(2,"gallery-lib",4),_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275elementEnd(),_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275elementStart(3,"button",5),_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275listener("click",function(){_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275restoreView(e);const n=_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275nextContext();return _angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275resetView(n.requestFullScreen())}),_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275element(4,"span",6),_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275elementEnd()()}if(2&t){const e=_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275nextContext();_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275advance(1),_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275property("formGroup",e.formInstance),_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275advance(1),_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275property("model",e.modelForm)("fields",e.fieldsForm)("form",e.formInstance)}}function CanvasComponent_div_1_Template(t,i){if(1&t&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275elementStart(0,"div",7),_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275element(1,"app-preview",8),_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275elementEnd()),2&t){const e=_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275nextContext();_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275advance(1),_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275property("model",e.modelFormPre)("fields",e.formPreview)("form",e.formInstancePre)("preview",e.activePreview)}}let CanvasComponent=(()=>{class CanvasComponent{constructor(t,i,e,a,n,_,d,P,h,M,u){this._messageService=t,this.cd=i,this._designerService=e,this._commonValues=a,this._valueListService=n,this._libraryService=_,this._cacheService=d,this._dialogService=P,this._templateService=h,this._i18n=M,this.router=u,this.contField=1,this.formInstance=new _angular_forms__WEBPACK_IMPORTED_MODULE_1__.FormGroup({}),this.formInstancePre=new _angular_forms__WEBPACK_IMPORTED_MODULE_1__.FormGroup({}),this.previewsPath=[],this.activePreview=!1,this.showGalleryPanel=!0,this.isFullScreen=!1,this.destroy$=new rxjs__WEBPACK_IMPORTED_MODULE_3__.Subject,this.moduleId="89af8961-d90d-46a2-a058-c1cfd45c73cc"}ngOnInit(){this.dropListConnectedTo=["fd-panel-container-0","fd-group-container-0","fields"],this.maxNumOfCols=12,this.formInstance=new _angular_forms__WEBPACK_IMPORTED_MODULE_1__.FormGroup({}),this.modelForm={};const{id:t}=this.getActiveRouteParams(this.router.routerState.root.snapshot)??"64383a394888205018fb17b8";this._designerService.getLstComponent(t).subscribe({next:i=>{this.designerComponents=i.components,this.createFormly(),this.cd.markForCheck()},error:i=>{this._messageService.add({severity:"error",summary:this._i18n.getI18nResource("x-common-elements.error.label"),detail:i.error.message})}}),this.getCategoryLibraries()}createFormly(){this.fieldsForm=[{id:"fields",type:"fd-form-container",className:"mt-5",templateOptions:{deleteWarnTitle:this._i18n.getI18nResource("zmr-fd_management.confDeleteContainer.label"),deleteWarnDetail:this._i18n.getI18nResource("zmr-fd_management.confDeleteContainer.message"),yesLabel:this._i18n.getI18nResource("x-common-elements.yes.label"),noLabel:this._i18n.getI18nResource("x-common-elements.no.label"),onClick:this.onClickComponent.bind(this),mode:"design",onClickDelete:this.delete.bind(this),onClickAdd:this.add.bind(this),decreaseColumns:this.decreaseColumn.bind(this),increaseColumns:this.increaseColumn.bind(this),showButtons:!0,saveLibrary:this.saveLibrary.bind(this),dropListConnectedTo:this.dropListConnectedTo},exppresionProperties:{"templateOptions.dropListConnectedTo":()=>this.dropListConnectedTo},fieldGroup:[{id:"fd-panel-container-0",type:"fd-panel-container",componentInfo:this.designerComponents?.find(t=>t.code==_const_json__WEBPACK_IMPORTED_MODULE_7__.HM),templateOptions:{deleteWarnTitle:this._i18n.getI18nResource("zmr-fd_management.confDeleteContainer.label"),deleteWarnDetail:this._i18n.getI18nResource("zmr-fd_management.confDeleteContainer.message"),yesLabel:this._i18n.getI18nResource("x-common-elements.yes.label"),noLabel:this._i18n.getI18nResource("x-common-elements.no.label"),onClick:this.onClickComponent.bind(this),onClickDelete:this.delete.bind(this),onClickAdd:this.add.bind(this),increaseSize:this.increaseComponentSize.bind(this),decreaseSize:this.decreaseComponentSize.bind(this),saveLibrary:this.saveLibrary.bind(this),dropListConnectedTo:this.dropListConnectedTo,mode:"design",label:"Datos personales"},fieldGroup:[{id:"fd-group-container-0",type:"fd-group-container",componentInfo:this.designerComponents?.find(t=>t.code==_const_json__WEBPACK_IMPORTED_MODULE_7__.V),templateOptions:{deleteWarnTitle:this._i18n.getI18nResource("zmr-fd_management.confDeleteComponent.label"),deleteWarnDetail:this._i18n.getI18nResource("zmr-fd_management.confDeleteComponent.message"),yesLabel:this._i18n.getI18nResource("x-common-elements.yes.label"),noLabel:this._i18n.getI18nResource("x-common-elements.no.label"),containerCols:12,mode:"design",dropListConnectedTo:this.dropListConnectedTo,onClick:this.onClickComponent.bind(this),onClickAdd:this.add.bind(this)},fieldGroup:[]}]}]}]}getActiveRouteParams(t){return t.firstChild?this.getActiveRouteParams(t.firstChild):t.params}updateDropList(){this.dropListConnectedTo.splice(0,this.dropListConnectedTo.length);for(let t of this.fieldsForm[0].fieldGroup)this.dropListConnectedTo.push(t.id);this.dropListConnectedTo.push("fields")}cdkDragDropped(t){t.item.data.library?this.dropLibrary(t):this.dropComponent(t)}delete(t){if(t instanceof Array)return void t.forEach(e=>{const a=this.dropListConnectedTo.findIndex(n=>n===e);a>-1&&(this.dropListConnectedTo.splice(a,1),this.cd.detectChanges())});const i=this.dropListConnectedTo.findIndex(e=>e===t);i>-1&&(this.dropListConnectedTo.splice(i,1),this.cd.detectChanges())}add(t,i=!1){t instanceof Array?t.forEach(e=>{this.dropListConnectedTo.unshift(e),this.cd.detectChanges()}):i||(this.dropListConnectedTo.unshift(t),this.cd.detectChanges()),this.cd.detectChanges(),this.fieldsForm=[...this.fieldsForm],this.cd.detectChanges()}dropComponent(t){let{componentInfo:i,properties:e}=t.item.data,a=t.item.data;a.type=i.galleryType,a.isForm=!0,a.templateOptions=this.mapTemplateOptions(e),i?.code.includes(this._commonValues.GENERAL_CONTAINER_NAME)?this.dragContainer(a):(t&&(t.item.data.key=this.generateRandomUniqueId()),this.updateId(t),a.templateOptions.appendTo=document.querySelector("app-zero-modeler-interface"),"x-password"===a.type&&(a.templateOptions.appendTo="body"),"x-calendar"===a.type&&(a.templateOptions.minDate=new Date(a.templateOptions.minDate),a.templateOptions.maxDate=new Date(a.templateOptions.maxDate),a.templateOptions.appendTo=document.querySelector("app-zero-modeler-interface")),this.cd.detectChanges(),this.fieldsForm=[...this.fieldsForm])}getAppendTo(){return this.isFullScreen?document.querySelector("app-zero-modeler-interface"):"body"}updateId(t){t.item.data.id=`${t.item.data.type}-${this.generateRandomUniqueId()}`}getCategoryLibraries(){this.filterLibraryTree?this.getTree(this.filterLibraryTree):this._cacheService.getContext().subscribe({next:t=>{this.filterLibraryTree=this.createFilterQueryTree(t,"LIBRARY"),this.getTree(this.filterLibraryTree)},error:t=>{this._messageService.add({severity:"error",summary:this._i18n.getI18nResource("x-common-elements.error.label"),detail:t.err})}})}getTree(t){this._libraryService.generateTree(t).subscribe({next:i=>{let e=this.mapCategories(i),a=new CustomEvent("updateLibraries",{detail:{libraries:e}});dispatchEvent(a)},error:i=>{}})}mapCategories(t){if(t)return(t=this.sortList(t)).map(e=>({label:e.name,code:e.code,icon:"fas fa-file-alt",status:"ACTIVE",libraries:this.mapLibraries(e.elements),showLabel:!0,labelPosition:"END",documentation:e.name}));console.log("Error")}mapLibraries(t){return(t=this.sortList(t))?.map(i=>({componentInfo:{id:i.data?.id,code:i.data?.code,label:i.data?.label,icon:i.data?.icon,status:i.data?.status,showLabel:i.data?.showLabel,labelPosition:i.data?.labelPosition||i.data?.labelPosition,documentation:i.data?.documentation},fieldGroup:i.data?.sourceModel,library:!0}))}sortList(t,i="order"){return t?.sort((e,a)=>e[i]<a[i]?-1:1)}createFilterQueryTree(t,i){let d,e=t.account.organizationId,a=t.account.id,n=t.account.activeProfile.organizationalUnitId,_=t.account.activeProfile.id;d={resourceAction:{executeMethod:"findAll"},canal:"zero-ge",component:"Category",params:[{value:{organizationId:{equals:e},predecessorId:{equals:null},status:{equals:"ACTIVE"},moduleId:{equals:this.moduleId}}},{value:null}],producerCanal:"zero-fd"};let P={request:d,type:i};return e&&(P.organizationId=e),a&&(P.userId=a),n&&(P.organizationUnitId=n),_&&(P.groupId=_),P}dropLibrary(t){if(t.container.id===t.previousContainer.id)return;let a,e=t.item.data.fieldGroup[0];e=this.updateLibrary(e),this.addIdToDropListConnectedTo(e.id),e.fieldGroup.forEach(n=>{this.addIdToDropListConnectedTo(n.id)}),a="fd-accordion"==e.type||"fd-panel-container"==e.type||"fd-tabs"==e.type?this.fieldsForm.map(n=>{const _=((n,_,...d)=>[...n.slice(0,_),...d,...n.slice(_)])(n.fieldGroup,t.currentIndex,e);return{...n,fieldGroup:_}}):this.fieldsForm,this.fieldsForm=[...a],this.cd.markForCheck()}addIdToDropListConnectedTo(t){this.dropListConnectedTo.includes(t)||(this.dropListConnectedTo.pop(),this.dropListConnectedTo.push(t),this.dropListConnectedTo.push("fields"))}loadLibraryItem(t){let i=this.generateRandomUniqueId();return t.id=`${t.type}-${i}`,t.key=`${t.type}-${i}`,t.templateOptions.dropListConnectedTo=this.dropListConnectedTo,t.fieldGroup&&t.fieldGroup.forEach(e=>{i=this.generateRandomUniqueId(),e.id=`${e.type}-${i}`,e.key=`${e.type}-${i}`,t.templateOptions.dropListConnectedTo=this.dropListConnectedTo,"fd-accordion"==t.type||"fd-tabs"==t.type?e.fieldGroup.forEach(a=>{i=this.generateRandomUniqueId(),e.id=`${a.type}-${i}`,e.key=`${a.type}-${i}`,t.templateOptions.dropListConnectedTo=this.dropListConnectedTo}):e.fieldGroup.map(a=>{"x-calendar"===a.type&&(a.templateOptions.minDate=new Date(a.templateOptions.minDate),a.templateOptions.maxDate=new Date(a.templateOptions.maxDate)),i=this.generateRandomUniqueId(),a.id=`${a.type}-${i}`,a.key=`${a.type}-${i}`})}),t.templateOptions.onClick=this.onClickComponent.bind(this),t.templateOptions.onClickDelete=this.deleteComponent.bind(this),t.templateOptions.onClickDuplicateItem=this.duplicateComponent.bind(this),t.templateOptions.increaseSize=this.increaseComponentSize.bind(this),t.templateOptions.decreaseSize=this.decreaseComponentSize.bind(this),t}updateLibrary(t){let a,n,_,i=t.fieldGroup,e=i?.length;("fd-accordion"==t.type||"fd-tabs"==t.type||"fd-group-container"==t.type||"fd-panel-container"==t.type)&&(_=this.generateRandomUniqueId(),t.id=`${t.type}-${_}`,t.key=`${t.type}-${_}`,this.addIdToDropListConnectedTo(t.id),t.templateOptions.dropListConnectedTo=this.dropListConnectedTo,t.templateOptions.onClick=this.onClickComponent.bind(this),t.templateOptions.onClickDelete=this.deleteComponent.bind(this),t.templateOptions.onClickDuplicateItem=this.duplicateComponent.bind(this),t.templateOptions.saveLibrary=this.saveLibrary.bind(this),t.templateOptions.onClickAccordion=this.onClickAccordion.bind(this),t.templateOptions.onAdd=this.add.bind(this),t.templateOptions.mode="design");for(let d=0;d<e;d++){switch(n=i[d],a=n.type,n.id=a+"-"+this.generateRandomUniqueId(),_=this.generateRandomUniqueId(),n.id=`${n.type}-${_}`,n.key=`${n.type}-${_}`,this.addIdToDropListConnectedTo(n.id),n.templateOptions.dropListConnectedTo=this.dropListConnectedTo,n.type){case"fd-group-container":_=this.generateRandomUniqueId(),n.id=`${n.type}-${_}`,n.key=`${n.type}-${_}`,this.addIdToDropListConnectedTo(n.id),n.templateOptions.dropListConnectedTo=this.dropListConnectedTo,n.templateOptions.onClick=this.onClickComponent.bind(this),n.templateOptions.onClickDelete=this.deleteComponent.bind(this),n.templateOptions.onClickDuplicateItem=this.duplicateComponent.bind(this),n.templateOptions.saveLibrary=this.saveLibrary.bind(this),n.templateOptions.onClickAdd=this.add.bind(this);break;case"fd-panel-container":case"fd-form-container":case"fd-accordion":_=this.generateRandomUniqueId(),n.id=`${n.type}-${_}`,n.key=`${n.type}-${_}`,this.addIdToDropListConnectedTo(n.id),n.templateOptions.dropListConnectedTo=this.dropListConnectedTo,n.templateOptions.onClick=this.onClickComponent.bind(this);break;default:"x-calendar"===n.type&&(n.templateOptions.minDate=new Date(n.templateOptions.minDate),n.templateOptions.maxDate=new Date(n.templateOptions.maxDate)),_=this.generateRandomUniqueId(),n.id=`${n.type}-${_}`,n.key=`${n.type}-${_}`}n.fieldGroup&&this.updateLibrary(n)}return t}exited(t){t.container.data.findIndex(e=>e.key===t.item.data.key)}onClickComponent(t){this.componentField=t;let i=t.propertiesValues??[],e=t.propertiesValues?.find(_=>"form-id"===_.name);e?e.value=t.id:(e={name:"form-id",value:t.id},i.push(e));let a=t.propertiesValues?.find(_=>"form-key"===_.name);a?a.value=t.key:(a={name:"form-key",value:t.key},i.push(a));let n=new CustomEvent("showPropertiesPanel",{detail:{field:t,properties:i}});dispatchEvent(n)}deleteRow(t){if(this.fieldsForm[0].fieldGroup.length>1){const i=this.fieldsForm[0].fieldGroup.indexOf(t);-1!==i&&this.fieldsForm[0].fieldGroup.splice(i,1);const e=this.dropListConnectedTo.indexOf(t.id);-1!==e&&this.dropListConnectedTo.splice(e,1),this.updateDropList()}else this._messageService.add({severity:"error",summary:"Error",detail:"Se necesita al menos un contenedor"})}deleteComponent(t){let i=this.fieldsForm[0].fieldGroup;for(let e of i){let a=e.fieldGroup;const n=a.indexOf(t);-1!==n&&a.splice(n,1)}}addContainer(t=!1,i){let e;e=t?i:{id:"x-forms-container"+this.contField,type:"x-forms-container",templateOptions:{childIsToggleable:!1,onClick:this.onClickComponent.bind(this),onClickDelete:this.deleteComponent.bind(this),onClickDuplicateItem:this.duplicateComponent.bind(this),increaseSize:this.increaseComponentSize.bind(this),decreaseSize:this.decreaseComponentSize.bind(this),dropListConnectedTo:this.dropListConnectedTo},fieldGroup:[]},this.fieldsForm[0].fieldGroup.push(e),this.fieldsForm=lodash__WEBPACK_IMPORTED_MODULE_2__.cloneDeep(this.fieldsForm),this.contField++,this.dropListConnectedTo.pop(),this.dropListConnectedTo.push(e.id),this.dropListConnectedTo.push("fields")}duplicateContainer(t){const i=`x-forms-container-${this.generateRandomUniqueId()}`;let e={fieldGroup:lodash__WEBPACK_IMPORTED_MODULE_2__.cloneDeep(t.fieldGroup),templateOptions:t.templateOptions,type:"x-forms-container"};e.id=i;let a=e.fieldGroup;for(let n of a){const _=Number(getComputedStyle(document.getElementById(n.id)).getPropertyValue("--column-size")),d=this.generateRandomUniqueId();n.id=`${n.type}-${d}`,n.key=d,setTimeout(()=>{document.getElementById(n.id).style.setProperty("--column-size",`${_}`)},1)}this.dropListConnectedTo.pop(),this.dropListConnectedTo.push(i),this.dropListConnectedTo.push("fields"),this.addContainer(!0,e),this.duplicateProperty(t,e,"--container-columns")}duplicateComponent(t){let i=lodash__WEBPACK_IMPORTED_MODULE_2__.cloneDeep(t);const a=document.getElementById(t.id).offsetParent,n=this.fieldsForm[0].fieldGroup;for(let _ of n)if(_.id==a.id){let d=document.getElementById(t.id).offsetParent;const P=Number(getComputedStyle(d).getPropertyValue("--container-columns"));let h=0;for(let u of Array.from(d.children))h+=Number(getComputedStyle(u).getPropertyValue("--column-size"));if(h+=Number(getComputedStyle(document.getElementById(t.id)).getPropertyValue("--column-size")),P<h)return void this._messageService.add({severity:"warn",summary:"Error",detail:"No se puede duplicar componente. El contenedor no tiene espacio suficiente."});i.key=this.generateRandomUniqueId(),i.id=`${i.type}-${this.generateRandomUniqueId()}`,this.duplicateProperty(t,i,"--column-size"),_.fieldGroup.push(i)}this.fieldsForm=[...this.fieldsForm]}duplicateProperty(t,i,e){let a=document.getElementById(t.id);const n=Number(getComputedStyle(a).getPropertyValue(e));setTimeout(()=>{document.getElementById(i.id).style.setProperty(e,`${n}`)},1)}validateEnoughSpace(t){let i=0;return t.fieldGroup.forEach(e=>{i+=Number(e.templateOptions.colSize)}),t.templateOptions.containerCols>i}decreaseColumn(t){let i=document.getElementById(t.id);t.templateOptions.containerCols>1&&this.validateEnoughSpace(t)?(t.templateOptions.containerCols--,i.style.setProperty("--container-columns",`${t.templateOptions.containerCols}`)):this._messageService.add({severity:"warn",summary:"Error",detail:"Se alcanzo el l\xedmite de espacio"}),t.propertiesValues=t.propertiesValues??[],t.propertiesValues.push({name:"form-container-cols",value:t.templateOptions.containerCols}),this.cd.detectChanges()}increaseColumn(t){let i=document.getElementById(t.id);t.templateOptions.containerCols<this.maxNumOfCols?t.templateOptions.containerCols++:this._messageService.add({severity:"warn",summary:"Advertencia",detail:`Solo se admiten m\xe1ximo ${this.maxNumOfCols} elementos por contenedor`}),i.style.setProperty("--container-columns",`${t.templateOptions.containerCols}`),t.propertiesValues=t.propertiesValues??[],t.propertiesValues.push({name:"form-container-cols",value:t.templateOptions.containerCols}),this.cd.detectChanges()}decreaseComponentSize(t,i){t.templateOptions.colSize>2&&t.templateOptions.colSize--}increaseComponentSize(t,i){let e=document.getElementById(t.id);this.validateEnoughSpace(i)?(t.templateOptions.colSize++,e.style.setProperty("--column-size",`${t.templateOptions.colSize}`)):this._messageService.add({severity:"warn",summary:"Error",detail:"No hay espacio en el contenedor."})}generateRandomUniqueId(){return Math.random().toString(36).substring(2,8)+(new Date).getTime().toString(36)}updateProperty(t,i,e){if(this.cd.detectChanges(),e?.listValueId){this.componentField.propertiesValues=this.componentField.propertiesValues??[];const d=this.componentField.propertiesValues.findIndex(P=>P.name===e.name);return void(-1!==d?this.componentField.propertiesValues[d]={...e,property:t}:this.componentField.propertiesValues.push({...e,property:t}))}if(e?.ruleId){this.componentField.propertiesValues=this.componentField.propertiesValues??[];const d=this.componentField.propertiesValues.findIndex(P=>P.name===e.name);return void(-1!==d?this.componentField.propertiesValues[d]={...e,property:t}:this.componentField.propertiesValues.push({...e,property:t}))}this.cd.detectChanges();let a=e;switch("LIST"===t.dataType&&"INPUT_LIST"===t.componentType&&(a=e.value),t.name){case"form-id":this.componentField.id=a;break;case"form-key":this.componentField.key=a;break;case"general-hide":this.componentField.hide=a;break;default:t.parent?this.componentField.templateOptions[t.parent.code][t.code]=a:this.componentField.templateOptions[t.code]=a}this.componentField.propertiesValues=this.componentField.propertiesValues??[];let _,n=this.componentField.propertiesValues.find(d=>d.name===t.name);switch(t.componentType){case"DROPDOWN":_={id:e};break;case"CALENDAR":_=new Date(e);break;default:_=e}n?n.value=_:this.componentField.propertiesValues.push({name:t.name,value:_}),"x-slider"==i.type&&(this.modelForm={[i.key]:[]}),null===e&&(t.parent?delete this.componentField.templateOptions[t.parent.code][t.code]:delete this.componentField.templateOptions[t.code]),"fd-tabs"==i.type&&i.templateOptions.refresh(null),"markColor"===t.code&&document.getElementById(i.id).click(),this.cd.detectChanges()}addExpression(property,component,value){if("hide"===property.code)return value=eval(value),void(this.componentField[property.code]=value);"BOOLEAN"===property.dataType&&(value=eval(value)),this.componentField.templateOptions[property.code]=value}executeActions(t,i){switch(t.name){case"duplicateComponent":case"deleteComponent":case"increaseComponent":case"decreaseComponent":case"increaseContainer":case"decreaseContainer":case"duplicateContainer":case"deleteContainer":this[t.action](this.componentField);break;case"addContainer":this[t.action](!1);break;case"clearForm":this[t.action]();break;default:this._messageService.add({severity:"error",summary:"Error",detail:"acci\xf3n no comtemplada"})}}mapTemplateOptions(t){let i=(t=t.filter(a=>!a.conditionalProperty||t.find(_=>_.name===a.conditionalProperty.name)?.defaultValue===a.conditionalValue))?.map(a=>{let n=null;if("DATE"===a.dataType){let _=a.propertyDefaultValue||a.defaultValue||null;n=_?new Date(_):void 0}else n=a.propertyDefaultValue??a.defaultValue;return{category:a.category,childProperties:a.childProperties?.map(_=>({..._,order:_.id})),code:a.code,label:a.label,status:a.status,order:a.propertyOrder,required:a.propertyRequired||a.required,type:a.dataType,componentType:a.componentType,defaultValue:n,elementList:a.elementList}}),e={};return i.forEach(a=>{a.childProperties?(e[a.code]={},a.childProperties.map(n=>{e[a.code][n.code]=n.defaultValue})):e[a.code]=a.defaultValue}),e}preview(t){this.cd.markForCheck(),this.formInstance.reset(),this.showGalleryPanel=!this.showGalleryPanel;let i=new CustomEvent("hideGalleryPanel",{detail:{showPanel:this.showGalleryPanel}});if(dispatchEvent(i),this.activePreview)this.fieldsForm=this.fieldsBk,this.activePreview=!1;else{this.activePreview=!0,this.formPreview=lodash__WEBPACK_IMPORTED_MODULE_2__.cloneDeep(this.fieldsForm),this.fieldsBk=this.fieldsForm;let e=a=>{a.forEach(n=>{n.fieldGroup&&e(n.fieldGroup),("fd-form-container"===n.type||"fd-panel-container"===n.type||"fd-group-container"===n.type||"fd-accordion"===n.type||"fd-tabs"===n.type)&&(n.templateOptions.mode="view"),"x-label"===n.type&&(n.templateOptions.disabled=!0),n.isForm&&n.propertiesValues?.length>0&&n.propertiesValues.forEach(_=>{_.listValueId&&this._valueListService.getData(_.listValueId,!1).subscribe(d=>{switch(d.listType){case"NUMBERED_DOMAIN":const P=JSON.parse(d.data);P&&(n.templateOptions[_.property?.code]=P.map(M=>({id:M.value,name:M.key,code:M.key,label:M.key,value:M.value}))),this.cd.detectChanges();break;case"RANGE":let h=JSON.parse(d.data);n.templateOptions[_.property?.code]=this.createListValuesRange(h),this.cd.detectChanges()}}),_.ruleId&&(n.templateOptions[_.property?.code]=_.value?.element?.value)})})};e(this.formPreview)}this.cd.detectChanges()}createListValuesRange(t){let i=[];for(let e=t.rangeSince;e<=t.rangeUntil;e++)i.push({id:e,name:e,code:e,label:e,value:e});return i}updateComponentSize(t){let i=e=>{e.forEach(a=>{"x-forms-container"===a.type?(document.getElementById(a.id).style.setProperty("--container-columns",a.templateOptions.containerCols??3),this.cd.detectChanges()):(document.getElementById(a.id).style.setProperty("--column-size",a.templateOptions.colSize??1),this.cd.detectChanges()),a.fieldGroup&&i(a.fieldGroup)})};i(t[0].fieldGroup)}dragContainer(t){this.cd.detectChanges();const i=`${t.type}-${this.generateRandomUniqueId()}`;switch(t.templateOptions={...t.templateOptions,deleteWarnTitle:this._i18n.getI18nResource("zmr-fd_management.confDeleteContainer.label"),deleteWarnDetail:this._i18n.getI18nResource("zmr-fd_management.confDeleteContainer.message"),yesLabel:this._i18n.getI18nResource("x-common-elements.yes.label"),noLabel:this._i18n.getI18nResource("x-common-elements.no.label")},t.type){case"fd-tabs":t.templateOptions.onAdd=this.add.bind(this),t.templateOptions.onDelete=this.delete.bind(this),t.templateOptions.saveLibrary=this.saveLibrary.bind(this),t.templateOptions.onDblClickTab=this.onDblClickTab.bind(this),t.templateOptions.markPosition="bottom",t.templateOptions.minTabsSummary="Advertencia",t.templateOptions.minTabsDetail="Es necesario que el contenedor tenga una pesta\xf1a";break;case"fd-accordion":t.templateOptions.onAdd=this.add.bind(this),t.templateOptions.onDelete=this.delete.bind(this),t.templateOptions.saveLibrary=this.saveLibrary.bind(this),t.templateOptions.onClickAccordion=this.onClickAccordion.bind(this),t.templateOptions.markPosition="bottom",t.templateOptions.minTabsSummary="Advertencia",t.templateOptions.minTabsDetail="Es necesario que el contenedor tenga una pesta\xf1a";break;case"fd-panel-container":t.templateOptions.saveLibrary=this.saveLibrary.bind(this);break;default:t.templateOptions={...t.templateOptions,deleteWarnTitle:this._i18n.getI18nResource("zmr-fd_management.confDeleteComponent.label"),deleteWarnDetail:this._i18n.getI18nResource("zmr-fd_management.confDeleteComponent.message"),yesLabel:this._i18n.getI18nResource("x-common-elements.yes.label"),noLabel:this._i18n.getI18nResource("x-common-elements.no.label")},t.templateOptions.onClickAdd=this.add.bind(this),t.templateOptions.onClickDelete=this.delete.bind(this)}t.key=i,t.id=i,t.fieldGroup=[],t.templateOptions.onClick=this.onClickComponent.bind(this),t.templateOptions.mode="design",t.templateOptions.dropListConnectedTo=this.dropListConnectedTo,t.expressionProperties={"templateOptions.dropListConnectedTo":()=>this.dropListConnectedTo},this.dropListConnectedTo.unshift(i),this.cd.detectChanges(),this.fieldsForm=[...this.fieldsForm]}onClickAccordion(t){this.onClickComponent(t.data)}openPanel(t){let i=new CustomEvent("showPropertiesPanel",{detail:{field:{componentInfo:{code:"uno",id:"64401ea94ad0037aa9d1115f"}},properties:[]}});dispatchEvent(i)}onDblClickTab(t){this.onClickComponent(t.data)}requestFullScreen(){let t=document.querySelector("app-zero-modeler-interface"),i=document.querySelector(".fd-fullscreen-btn");if(this.isFullScreen)document.exitFullscreen(),document.querySelector("html").style.overflow="hidden",this.isFullScreen=!1,document.querySelector(".fd-fullscreen-btn").style.display="none";else{t.style.background="white",i.style.display="block",i.firstElementChild.className="fa-solid fa-compress";var e=t.requestFullScreen||t.webkitRequestFullScreen||t.mozRequestFullScreen||t.msRequestFullScreen;e&&e.call(t),this.isFullScreen=!0}}saveTemplate(){var t=this;return(0,_home_cmelo_git_fd_zero_fd_mf_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_19__.Z)(function*(){let i=t.fieldsForm[0];const e=t.fieldsForm[0]?.componentInfo;if(e&&null!==e.elementId){let n=t._templateService.queryFilter;return n.criteria={id:{equals:e.elementId},type:{equals:"TEMPLATE"}},void(yield t.findElementById(n,"TEMPLATE"))}let a=yield t.openModal(i,_template_template_component__WEBPACK_IMPORTED_MODULE_6__.M);a&&t.fieldsForm[0]?.componentInfo&&(t.fieldsForm[0].componentInfo.elementId=a?.id)})()}saveLibrary(t){var i=this;return(0,_home_cmelo_git_fd_zero_fd_mf_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_19__.Z)(function*(){let e=i.cleanLibrary(t);const a=t.componentInfo;if(a&&a.elementId){let _=i._libraryService.queryFilter;return _.criteria={id:{equals:a.elementId},type:{equals:"LIBRARY"}},void(yield i.findElementById(_,"LIBRARY"))}let n=yield i.openModal(e,_library_library_component__WEBPACK_IMPORTED_MODULE_5__.V);n&&t.componentInfo&&(t.componentInfo.elementId=n?.id,i.cd.detectChanges())})()}cleanLibrary(t){return t.fieldGroup&&(t={id:t.id,type:t.type,componentInfo:t.componentInfo,templateOptions:t.templateOptions,fieldGroup:this.cleanLibraryFieldgroup(t.fieldGroup)}),t}cleanLibraryFieldgroup(t){return t.map(i=>i.fieldGroup?{id:i.id,type:i.type,componentInfo:i.componentInfo,templateOptions:i.templateOptions,fieldGroup:this.cleanLibraryFieldgroup(i.fieldGroup)}:{id:i.id,type:i.type,componentInfo:i.componentInfo,templateOptions:i.templateOptions,properties:i.properties})}openModal(t,i){var e=this;return(0,_home_cmelo_git_fd_zero_fd_mf_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_19__.Z)(function*(){return new Promise(a=>{e._dialogService.open(i,{data:{fieldsToSave:t,moduleId:e.moduleId},showHeader:!1,closeOnEscape:!1,closable:!1,width:"80%"}).onClose.subscribe(_=>{a(_.data)})})})()}findElementById(t,i){var e=this;return(0,_home_cmelo_git_fd_zero_fd_mf_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_19__.Z)(function*(){try{const a=yield(0,rxjs__WEBPACK_IMPORTED_MODULE_3__.firstValueFrom)(e._templateService.findElementCriteria(t));let n=Object.values(a[0].elementVersions).filter(P=>P.id===a[0].currentVersionId),_=null,d=null;return"TEMPLATE"===i?(d="documentId="+a[0].collectionReference+"&version="+n[0].version,_=yield(0,rxjs__WEBPACK_IMPORTED_MODULE_3__.firstValueFrom)(e._templateService.findTemplateVersion(d)),{element:a,template:_}):(d="libraryId="+a[0].collectionReference+"&version="+n[0].version,_=yield(0,rxjs__WEBPACK_IMPORTED_MODULE_3__.firstValueFrom)(e._libraryService.findLibraryVersion(d)),{element:a,template:_})}catch(a){return console.log(a),null}})()}}return CanvasComponent.\u0275fac=function t(i){return new(i||CanvasComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275directiveInject(primeng_api__WEBPACK_IMPORTED_MODULE_8__.MessageService),_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275directiveInject(_angular_core__WEBPACK_IMPORTED_MODULE_0__.ChangeDetectorRef),_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275directiveInject(src_app_shared_services_zmc_designer_service__WEBPACK_IMPORTED_MODULE_9__.P),_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275directiveInject(src_app_shared_common_common_values_service__WEBPACK_IMPORTED_MODULE_10__.F),_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275directiveInject(src_app_shared_services_value_list_service__WEBPACK_IMPORTED_MODULE_11__.y),_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275directiveInject(src_app_shared_services_library_service__WEBPACK_IMPORTED_MODULE_12__.$),_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275directiveInject(src_app_shared_services_cache_service__WEBPACK_IMPORTED_MODULE_13__.Q),_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275directiveInject(primeng_dynamicdialog__WEBPACK_IMPORTED_MODULE_4__.DialogService),_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275directiveInject(src_app_shared_services_template_service__WEBPACK_IMPORTED_MODULE_14__.E),_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275directiveInject(src_app_shared_i18n_services_i18n_service__WEBPACK_IMPORTED_MODULE_15__.D),_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275directiveInject(_angular_router__WEBPACK_IMPORTED_MODULE_16__.Router))},CanvasComponent.\u0275cmp=_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275defineComponent({type:CanvasComponent,selectors:[["app-canvas"]],viewQuery:function t(i,e){if(1&i&&_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275viewQuery(_angular_cdk_drag_drop__WEBPACK_IMPORTED_MODULE_20__.Wj,5),2&i){let a;_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275queryRefresh(a=_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275loadQuery())&&(e.el=a.first)}},features:[_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275ProvidersFeature([primeng_dynamicdialog__WEBPACK_IMPORTED_MODULE_4__.DialogService])],decls:2,vars:2,consts:[["class","col-sm-12 form-designer","id","form-designer",4,"ngIf"],["class","container-preview",4,"ngIf"],["id","form-designer",1,"col-sm-12","form-designer"],[3,"formGroup"],[3,"model","fields","form"],[1,"fd-fullscreen-btn",3,"click"],[1,"fa-solid","fa-expand"],[1,"container-preview"],[3,"model","fields","form","preview"]],template:function t(i,e){1&i&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275template(0,CanvasComponent_div_0_Template,5,4,"div",0),_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275template(1,CanvasComponent_div_1_Template,2,4,"div",1)),2&i&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275property("ngIf",!e.activePreview),_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275advance(1),_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275property("ngIf",e.activePreview))},dependencies:[_angular_common__WEBPACK_IMPORTED_MODULE_17__.NgIf,_angular_forms__WEBPACK_IMPORTED_MODULE_1__.\u0275NgNoValidate,_angular_forms__WEBPACK_IMPORTED_MODULE_1__.NgControlStatusGroup,_angular_forms__WEBPACK_IMPORTED_MODULE_1__.FormGroupDirective,gallery_lib__WEBPACK_IMPORTED_MODULE_21__.T9,_preview_preview_component__WEBPACK_IMPORTED_MODULE_18__.B],styles:["[_nghost-%COMP%]     .pad-check{padding:0!important;padding-bottom:2.6rem!important}[_nghost-%COMP%]     .row{border:none;margin:0}[_nghost-%COMP%]     x-checkbox p-checkbox label{margin-left:.5rem!important;text-align:left}[_nghost-%COMP%]     p-radiobutton label{margin-left:.5rem!important;text-align:left}[_nghost-%COMP%]     .container-preview{padding-top:3rem;padding-left:14rem;padding-right:14rem;background-color:#f3f3f3}@media (max-width: 960px){[_nghost-%COMP%]     .container-preview{padding-inline:6rem}}@media (max-width: 767px){[_nghost-%COMP%]     .container-preview{padding-inline:2rem}}@media (max-width: 575px){[_nghost-%COMP%]     .container-preview{padding-left:0rem;padding-right:0rem}}[_nghost-%COMP%]     .container-preview form{background-color:#fff;box-shadow:0 5px 10px #ccc}[_nghost-%COMP%]     .form-designer{background-color:#fff;position:absolute;height:100%;width:100%;align-content:flex-start}@media (max-width: 767px){[_nghost-%COMP%]     .col, [_nghost-%COMP%]     .col-1, [_nghost-%COMP%]     .col-10, [_nghost-%COMP%]     .col-11, [_nghost-%COMP%]     .col-12, [_nghost-%COMP%]     .col-2, [_nghost-%COMP%]     .col-3, [_nghost-%COMP%]     .col-4, [_nghost-%COMP%]     .col-5, [_nghost-%COMP%]     .col-6, [_nghost-%COMP%]     .col-7, [_nghost-%COMP%]     .col-8, [_nghost-%COMP%]     .col-9, [_nghost-%COMP%]     .col-auto, [_nghost-%COMP%]     .col-lg, [_nghost-%COMP%]     .col-lg-1, [_nghost-%COMP%]     .col-lg-10, [_nghost-%COMP%]     .col-lg-11, [_nghost-%COMP%]     .col-lg-12, [_nghost-%COMP%]     .col-lg-2, [_nghost-%COMP%]     .col-lg-3, [_nghost-%COMP%]     .col-lg-4, [_nghost-%COMP%]     .col-lg-5, [_nghost-%COMP%]     .col-lg-6, [_nghost-%COMP%]     .col-lg-7, [_nghost-%COMP%]     .col-lg-8, [_nghost-%COMP%]     .col-lg-9, [_nghost-%COMP%]     .col-lg-auto, [_nghost-%COMP%]     .col-md, [_nghost-%COMP%]     .col-md-1, [_nghost-%COMP%]     .col-md-10, [_nghost-%COMP%]     .col-md-11, [_nghost-%COMP%]     .col-md-12, [_nghost-%COMP%]     .col-md-2, [_nghost-%COMP%]     .col-md-3, [_nghost-%COMP%]     .col-md-4, [_nghost-%COMP%]     .col-md-5, [_nghost-%COMP%]     .col-md-6, [_nghost-%COMP%]     .col-md-7, [_nghost-%COMP%]     .col-md-8, [_nghost-%COMP%]     .col-md-9, [_nghost-%COMP%]     .col-md-auto, [_nghost-%COMP%]     .col-sm, [_nghost-%COMP%]     .col-sm-1, [_nghost-%COMP%]     .col-sm-10, [_nghost-%COMP%]     .col-sm-11, [_nghost-%COMP%]     .col-sm-12, [_nghost-%COMP%]     .col-sm-2, [_nghost-%COMP%]     .col-sm-3, [_nghost-%COMP%]     .col-sm-4, [_nghost-%COMP%]     .col-sm-5, [_nghost-%COMP%]     .col-sm-6, [_nghost-%COMP%]     .col-sm-7, [_nghost-%COMP%]     .col-sm-8, [_nghost-%COMP%]     .col-sm-9, [_nghost-%COMP%]     .col-sm-auto, [_nghost-%COMP%]     .col-xl, [_nghost-%COMP%]     .col-xl-1, [_nghost-%COMP%]     .col-xl-10, [_nghost-%COMP%]     .col-xl-11, [_nghost-%COMP%]     .col-xl-12, [_nghost-%COMP%]     .col-xl-2, [_nghost-%COMP%]     .col-xl-3, [_nghost-%COMP%]     .col-xl-4, [_nghost-%COMP%]     .col-xl-5, [_nghost-%COMP%]     .col-xl-6, [_nghost-%COMP%]     .col-xl-7, [_nghost-%COMP%]     .col-xl-8, [_nghost-%COMP%]     .col-xl-9, [_nghost-%COMP%]     .col-xl-auto{width:100%}}[_nghost-%COMP%]     .form-placeholder{width:100%;flex:1 0 0%}[_nghost-%COMP%]     .p-tabview-panel .main-container-view{padding-inline:0!important;padding-top:1rem!important}[_nghost-%COMP%]     .fd-fullscreen-btn{position:fixed;right:3rem;bottom:3rem;z-index:9999;width:30px;height:30px;border:1px solid #ccc;font-size:1.5rem;display:none;justify-content:center;align-items:center;color:#a19d9d}"]}),CanvasComponent})()},39858:(t,i,e)=>{e.d(i,{V:()=>x});var a=e(15861),n=e(93071),d=e(13406),h=e(45449),u=e(11177),l=e(74243),m=e(19511),L=e(87602),v=e(57408),U=e(61254),k=e(30161),Y=e(98613),Q=e(10226),D=e(62171),$=e(57303);let x=(()=>{class Z{constructor(r,g,A,w,C,G,f,O,S,W,B){this.ref=r,this.config=g,this._commonValuesService=A,this._library=w,this._cacheService=C,this._categoryService=G,this._organizationService=f,this._organizationalUnitService=O,this._userService=S,this._groupService=W,this._scopesService=B,this.formGestionLibrary=new n.FormGroup({}),this.fieldsGestionLibrary=[],this.modelFormLibrary={id:null,code:"",name:"",categoryId:"",status:"ACTIVE",collectionReference:"",currentVersionId:null,type:"LIBRARY",owner:"ORGANIZATION",organizationId:"",creatorUserId:"",scope:{id:"PRIVATE"},productId:"17d1490a-b5cb-3529-f111-5bd6a0e8cc55",documentation:"",formVersions:[],formScopes:[]}}ngOnInit(){this.observableClear=new d.Subject,this.formGestionLibrary=new n.FormGroup({}),this.config.baseZIndex=1e3,this.config.autoZIndex=!0,this.fieldsToSave=this.config.data.fieldsToSave,this.i18n=this.config.data.i18n,this.moduleId=this.config.data.moduleId,this._cacheService.getContext().subscribe({next:r=>{this.context=r,this.organizationId=r.account.organizationId,this.organizationId||(this.modelFormLibrary.owner="SYSTEM"),this.createFormly()}})}createFormly(){var r=this;return(0,a.Z)(function*(){let g=[{fieldGroupClassName:"row",fieldGroup:[{key:"name",type:"x-input",className:"col-md-4",templateOptions:{label:r.i18n["library.management.name"],maxLength:50,placeholder:r.i18n["library.management.name"],required:!0,disabled:!1},expressionProperties:{"":()=>{r.formGestionLibrary.controls.name?.valueChanges.subscribe(()=>{r.formGestionLibrary.controls.name?.dirty&&r.setCode()})}}},{key:"code",type:"x-input",className:"col-md-4",templateOptions:{label:r.i18n["library.management.code"],maxLength:50,placeholder:r.i18n["library.management.code"],required:!0,disabled:!1}},{key:"status",type:"x-button-group",className:"col-md-2",templateOptions:{label:r.i18n["library.management.status"],optionsToggle:r._commonValuesService.internationalize("OPTIONS_STATUS",r.i18n,"library.management.status"),required:!0,radioGroup:"typeC",disabled:!1}},{key:"showLabel",type:"x-button-group",className:"col-md-2",templateOptions:{label:r.i18n["library.management.show.label"],optionsToggle:r._commonValuesService.internationalize("OPTIONS_YES_NOT",r.i18n,"library.management.show.label"),required:!0,radioGroup:"type",disabled:!1}},{key:"icon",type:"x-icon-picker",className:"col-md-4",templateOptions:{label:r.i18n["library.management.icon"],required:!0,disabled:!1}},{key:"label",type:"x-input",className:"col-md-4",templateOptions:{label:r.i18n["library.management.label"],placeholder:r.i18n["library.management.label"],maxLength:100,required:!0,disabled:!1},hideExpression:()=>"YES"!==r.modelFormLibrary.showLabel},{key:"labelPosition",type:"x-dropdown",className:"col-md-4",templateOptions:{label:r.i18n["library.management.label.position"],placeholder:r.i18n["library.management.label.position"],filter:!1,dataDisplay:["label"],optionsList:r._commonValuesService.internationalize("OPTIONS_LABEL_POSITION",r.i18n,"library.management.label.position"),required:!0,disabled:!1,settings:{searchApi:!1,emptyMessage:"No existen registros relacionados"}},hideExpression:()=>"YES"!==r.modelFormLibrary.showLabel},{key:"categoryId",type:"x-dropdown",className:"col-md-4",templateOptions:{label:r.i18n["library.management.category"],placeholder:r.i18n["library.management.category"],placeholderSearch:"",parametersDefault:{status:{equals:r._commonValuesService.ACTIVE_STATUS},moduleId:{equals:r.moduleId},organizationId:{equals:r.organizationId},predecessorId:{specified:!1}},dataDisplay:["","name"],idData:"id",code:"code",searchBy:["code","name"],queryMethod:["getLstCategories"],service:r._categoryService,observableClear:r.observableClear,required:!0,concatCode:!0,disabled:!1,settings:{searchApi:!0,emptyMessage:"No hay registros",singleSelection:!0}}},{key:"scope",type:"x-dropdown",className:"col-md-4",templateOptions:{label:r.i18n["library.management.scope"],placeholder:r.i18n["library.management.scope"],dataDisplay:["description"],required:!0,disabled:!1,optionsList:r._commonValuesService.internationalize("OPTIONS_SCOPE",r.i18n,"library.management.scope"),settings:{searchApi:!1,emptyMessage:"No hay registros",singleSelection:!0},onChange:yield r.setformScopesOptions.bind(r)}},{key:"formScopes",type:"x-multiselect",className:"col-md-4",templateOptions:{label:r.i18n["library.management.scope.elements"],placeholder:r.i18n["library.management.scope.elements"],dataDisplay:["description"],required:!0,disabled:!1,optionsList:yield(0,d.firstValueFrom)(r._scopesService.elementScopeOptions$),settings:{searchApi:!1,emptyMessage:"No hay registros",singleSelection:!0},onChange:r.setCanEditOptions.bind(r)},hideExpression:()=>"PRIVATE"===r.modelFormLibrary.scope.id,expressionProperties:{"":()=>{r.formGestionLibrary.controls.formScopes&&r.formGestionLibrary.controls.formScopes.touched&&r.modelFormLibrary.formScopes.length>0&&(r.createFormly(),r.formGestionLibrary.controls.formScopes.markAsUntouched())}}},{key:"canEdit",type:"x-multiselect",className:"col-md-4",templateOptions:{label:r.i18n["library.management.scope.elements.can_edit"],placeholder:r.i18n["library.management.scope.elements.can_edit"],dataDisplay:["name"],required:!0,disabled:!1,optionsList:yield(0,d.firstValueFrom)(r._scopesService.canEditOptions$),settings:{searchApi:!1,emptyMessage:"No hay registros",singleSelection:!1}},hideExpression:()=>0===r.modelFormLibrary.formScopes.length},{key:"documentation",type:"x-editor",className:"col-md-12",templateOptions:{label:r.i18n["library.management.documentation"],placeholder:r.i18n["library.management.documentation"],required:!1,disabled:!1,style:{height:"100px"}}}]}];r.fieldsGestionLibrary=[{key:"formulario-gestion-profile",type:"x-form-management",className:"col-12",templateOptions:{required:!1,element:{},fieldTitle:r.i18n["library.management.registry.library"],typeManagement:"ADD",tableTitle:r.i18n["library.management.library"],fieldsForm:g,modelForm:r.modelFormLibrary,disableButtons:!1,onCancel:r.close.bind(r),onSave:r.addLibrary.bind(r),"xformManagement.register":"Registrar","xformManagement.delete":"Eliminar","xformManagement.cancel":"Cancelar","xformManagement.save":"Guardar","xformManagement.edit":"Editar","xformManagement.alertAddTitle":"Agregar","xformManagement.alertAddText":"\xbfDesea guardar la librer\xeda?","xformManagement.alertEditTitle":"Editar","xformManagement.alertEditText":"Editar","xformManagement.alertDeleteTitle":"Borrar","xformManagement.alertDeleteText":"Borrar","xformManagement.alertCancelTitle":"Cancelar","xformManagement.alertCancelText":"Cancelar","xformManagement.alertYes":"Aceptar","xformManagement.alertNot":"Cancelar","xformManagement.detail":"Detalle"}}]})()}setCode(){let r=this.modelFormLibrary?.name===this.modelFormLibrary?.name.toUpperCase()?this.modelFormLibrary?.name.toLowerCase():this.modelFormLibrary?.name;r=r.normalize("NFD").replace(/[\u0300-\u036f]/g,"");let g=r.toLowerCase().replace(/\W+/g," ").split(/ |\B(?=[A-Z])/).map(A=>A.toLowerCase()).join("_");g.length>20&&(g=g.substring(0,20)),this.formGestionLibrary.controls.code?.setValue(g)}close(){this.ref.close({mensaje:"cerrado",data:null})}addLibrary(){var r=this;return(0,a.Z)(function*(){let g={code:r.modelFormLibrary.code,name:r.modelFormLibrary.name,categoryId:r.modelFormLibrary.categoryId.id,status:r.modelFormLibrary.status,collectionReference:"",currentVersionId:null,type:r.modelFormLibrary.type,owner:r.modelFormLibrary.owner,organizationId:r.context.account.organizationId,creatorUserId:r.context.session.sub,scope:r.modelFormLibrary.scope?.id,productId:r.modelFormLibrary.productId,documentation:r.modelFormLibrary.documentation,formVersions:[],formScopes:[]},A={version:null,code:r.modelFormLibrary.code,name:r.modelFormLibrary.name,label:r.modelFormLibrary.label,icon:r.modelFormLibrary.icon,status:r.modelFormLibrary.status?.id,sourceModel:[r.fieldsToSave],showLabel:r.modelFormLibrary.showLabel=!0,labelPosition:r.modelFormLibrary.labelPosition?.id},w=yield(0,d.firstValueFrom)(r._library.addElementLibrary(g)),C={element:w,libraryTemplateVersion:A};yield(0,d.firstValueFrom)(r._library.addElementLibraryVersion(C));let G=r._library.queryFilter;G.criteria={id:{equals:w.id},type:{equals:"LIBRARY"}};let f=yield(0,d.firstValueFrom)(r._library.findElementCriteria(G)),O=Object.values(f[0].formVersions)[0];Object.values(f[0].formVersions).map(S=>{S.element={id:f[0].id}}),f[0].currentVersionId=O.id,yield(0,d.firstValueFrom)(r._library.updateElementTemplate(f[0])),r.addScopeElements(f[0]),r.ref.close({mensaje:"close",data:g})})()}addScopeElements(r){var g=this;return(0,a.Z)(function*(){g.modelFormLibrary.formScopes.length>0&&(g.modelFormLibrary.formScopes.forEach(A=>{const w=g.modelFormLibrary?.canEdit.find(G=>G.id===A.id);r.formScopes.push({idElement:r.id,scopeReferenceId:A.id,canEdit:w?"YES":"NOT"})}),yield(0,d.firstValueFrom)(g._library.updateElementTemplate(r)))})()}getElementsScopesOptions(){const r={criteria:{organizationId:{equals:this.organizationId}},unpaged:!0};return new Promise(g=>{switch(this.modelFormLibrary.scope?.id){case"PUBLIC":this._organizationService.getLstOrganizations(null).subscribe({next:A=>{g(this.mapToObject(A))}});break;case"REST_USERS":this._userService.getLstUsers(r).subscribe({next:A=>{const w=A.filter(C=>C.id!=this.context.session.sub);g(this.mapToObject(w))}});break;case"REST_GROUPS":this._groupService.getLstGroups(null).subscribe({next:A=>{g(this.mapToObject(A))}});break;case"REST_ORGANIZATION_UNITS":this._organizationalUnitService.getLstOrganizationsUnit(r).subscribe({next:A=>{g(this.mapToObject(A))}});break;default:g([])}})}mapToObject(r){return r.map(g=>({id:g.id,description:g?.name||g?.username}))}setformScopesOptions(){var r=this;return(0,a.Z)(function*(){r.modelFormLibrary.formScopes=[],r._scopesService.setElementScopeOptions([]);const g=yield r.getElementsScopesOptions();r._scopesService.setElementScopeOptions(g),r.createFormly()})()}setCanEditOptions(){this._scopesService.setCanEditOptions(this.modelFormLibrary.formScopes)}}return Z.\u0275fac=function(r){return new(r||Z)(h.\u0275\u0275directiveInject(u.DynamicDialogRef),h.\u0275\u0275directiveInject(u.DynamicDialogConfig),h.\u0275\u0275directiveInject(l.F),h.\u0275\u0275directiveInject(m.$),h.\u0275\u0275directiveInject(L.Q),h.\u0275\u0275directiveInject(v.H),h.\u0275\u0275directiveInject(U.M),h.\u0275\u0275directiveInject(k.d),h.\u0275\u0275directiveInject(Y.K),h.\u0275\u0275directiveInject(Q.l),h.\u0275\u0275directiveInject(D.k))},Z.\u0275cmp=h.\u0275\u0275defineComponent({type:Z,selectors:[["app-library"]],decls:2,vars:4,consts:[[3,"formGroup"],[3,"form","fields","model"]],template:function(r,g){1&r&&(h.\u0275\u0275elementStart(0,"form",0),h.\u0275\u0275element(1,"gallery-lib",1),h.\u0275\u0275elementEnd()),2&r&&(h.\u0275\u0275property("formGroup",g.formGestionLibrary),h.\u0275\u0275advance(1),h.\u0275\u0275property("form",g.formGestionLibrary)("fields",g.fieldsGestionLibrary)("model",g.modelFormLibrary))},dependencies:[n.\u0275NgNoValidate,n.NgControlStatusGroup,n.FormGroupDirective,$.T9]}),Z})()},49073:(t,i,e)=>{e.r(i),e.d(i,{MainRoutingModule:()=>M});var a=e(10730),_=e(4735),d=e(45449);const h=[{path:"view/:id",component:_.CanvasComponent,data:{label:"View"}}];let M=(()=>{class u{}return u.\u0275fac=function(l){return new(l||u)},u.\u0275mod=d.\u0275\u0275defineNgModule({type:u}),u.\u0275inj=d.\u0275\u0275defineInjector({imports:[a.RouterModule.forChild(h),a.RouterModule]}),u})()},81603:(t,i,e)=>{e.d(i,{B:()=>b});var a=e(93071),_=e(45449),P=e(90944),M=e(57303);function u(l,m){if(1&l){const L=_.\u0275\u0275getCurrentView();_.\u0275\u0275elementStart(0,"form",1),_.\u0275\u0275listener("ngSubmit",function(U){_.\u0275\u0275restoreView(L);const k=_.\u0275\u0275nextContext();return _.\u0275\u0275resetView(k.submit(U))}),_.\u0275\u0275element(1,"gallery-lib",2),_.\u0275\u0275elementEnd()}if(2&l){const L=_.\u0275\u0275nextContext();_.\u0275\u0275property("formGroup",L.form),_.\u0275\u0275advance(1),_.\u0275\u0275property("model",L.model)("fields",L.fields)("form",L.form)}}let b=(()=>{class l{constructor(){this.preview=!1,this.form=new a.FormGroup({}),this.model={},this.fields=[]}ngOnInit(){}submit(L){L.preventDefault()}}return l.\u0275fac=function(L){return new(L||l)},l.\u0275cmp=_.\u0275\u0275defineComponent({type:l,selectors:[["app-preview"]],inputs:{preview:"preview",form:"form",model:"model",fields:"fields"},decls:1,vars:1,consts:[["class","x-fd-container-preview",3,"formGroup","ngSubmit",4,"ngIf"],[1,"x-fd-container-preview",3,"formGroup","ngSubmit"],[3,"model","fields","form"]],template:function(L,v){1&L&&_.\u0275\u0275template(0,u,2,4,"form",0),2&L&&_.\u0275\u0275property("ngIf",v.preview)},dependencies:[P.NgIf,a.\u0275NgNoValidate,a.NgControlStatusGroup,a.FormGroupDirective,M.T9],styles:["[_nghost-%COMP%]     .col-md-4{flex:0 0 auto;width:33.33333333%;padding:0rem!important}[_nghost-%COMP%]     .main-container-view{padding-inline:2rem!important;padding-top:3rem!important;padding-bottom:5rem!important;background-color:#fff!important;position:relative!important}[_nghost-%COMP%]     .x-fd-container-preview{background-color:#fff!important;box-shadow:0 5px 10px #ccc!important;position:relative!important}"]}),l})()},86361:(t,i,e)=>{e.d(i,{M:()=>x});var a=e(15861),n=e(45449),d=e(93071),h=e(13406),u=e(11177),l=e(74243),m=e(23733),L=e(87602),v=e(57408),U=e(61254),k=e(30161),Y=e(98613),Q=e(10226),D=e(62171),$=e(57303);let x=(()=>{class Z{constructor(r,g,A,w,C,G,f,O,S,W,B,o){this.ref=r,this.config=g,this.cd=A,this._commonValuesService=w,this._template=C,this._cacheService=G,this._categoryService=f,this._organizationService=O,this._organizationalUnitService=S,this._userService=W,this._groupService=B,this._scopesService=o,this.fieldsGestionTemplate=[],this.modelTemplate={id:null,code:"",name:"",categoryId:"",status:"ACTIVE",collectionReference:"",currentVersionId:null,type:"TEMPLATE",owner:"ORGANIZATION",organizationId:"",creatorUserId:"",scope:{id:"PRIVATE"},productId:"17d1490a-b5cb-3529-f111-5bd6a0e8cc55",documentation:"",formVersions:[],formScopes:[]}}ngOnInit(){this.observableClear=new h.Subject,this.formTemplate=new d.FormGroup({}),this.config.baseZIndex=1e3,this.config.autoZIndex=!0,this.fieldsToSave=this.config.data.fieldsToSave,this.i18n=this.config.data.i18n,this.moduleId=this.config.data.moduleId,this._cacheService.getContext().subscribe({next:r=>{this.context=r,this.organizationId=r.account.organizationId,console.log(r),this.organizationId||(this.modelTemplate.owner="SYSTEM"),this.createFormly()}}),this.cd.detectChanges()}createFormly(){var r=this;return(0,a.Z)(function*(){let g=[{fieldGroupClassName:"row",fieldGroup:[{key:"name",type:"x-input",className:"col-md-4",templateOptions:{label:r.i18n["library.management.name"],maxLength:50,placeholder:r.i18n["library.management.name"],required:!0,disabled:!1},expressionProperties:{"":()=>{r.formTemplate.controls.name?.valueChanges.subscribe(()=>{r.formTemplate.controls.name?.dirty&&r.setCode()})}}},{key:"code",type:"x-input",className:"col-md-4",templateOptions:{label:r.i18n["library.management.code"],maxLength:50,placeholder:r.i18n["library.management.code"],required:!0,disabled:!1}},{key:"status",type:"x-button-group",className:"col-md-2",templateOptions:{label:r.i18n["library.management.status"],optionsToggle:r._commonValuesService.internationalize("OPTIONS_STATUS",r.i18n,"library.management.status"),required:!0,radioGroup:"typeC",disabled:!1}},{key:"categoryId",type:"x-dropdown",className:"col-md-4",templateOptions:{label:r.i18n["library.management.category"],placeholder:r.i18n["library.management.category"],placeholderSearch:"",parametersDefault:{status:{equals:r._commonValuesService.ACTIVE_STATUS},moduleId:{equals:r.moduleId},organizationId:{equals:r.organizationId},predecessorId:{specified:!1}},dataDisplay:["","name"],idData:"id",code:"code",searchBy:["code","name"],queryMethod:["getLstCategories"],service:r._categoryService,observableClear:r.observableClear,required:!0,concatCode:!0,disabled:!1,settings:{searchApi:!0,emptyMessage:"No hay registros",singleSelection:!0}}},{key:"scope",type:"x-dropdown",className:"col-md-4",templateOptions:{label:r.i18n["library.management.scope"],placeholder:r.i18n["library.management.scope"],dataDisplay:["description"],required:!0,disabled:!1,optionsList:r._commonValuesService.internationalize("OPTIONS_SCOPE",r.i18n,"library.management.scope"),settings:{searchApi:!1,emptyMessage:"No hay registros",singleSelection:!0},onChange:yield r.setformScopesOptions.bind(r)}},{key:"formScopes",type:"x-multiselect",className:"col-md-4",templateOptions:{label:r.i18n["library.management.scope.elements"],placeholder:r.i18n["library.management.scope.elements"],dataDisplay:["description"],required:!0,disabled:!1,optionsList:yield(0,h.firstValueFrom)(r._scopesService.elementScopeOptions$),settings:{searchApi:!1,emptyMessage:"No hay registros",singleSelection:!0},onChange:r.setCanEditOptions.bind(r)},hideExpression:()=>"PRIVATE"===r.modelTemplate.scope?.id,expressionProperties:{"":()=>{r.formTemplate.controls.formScopes&&r.formTemplate.controls.formScopes.touched&&r.modelTemplate.formScopes.length>0&&(r.createFormly(),r.formTemplate.controls.formScopes.markAsUntouched())}}},{key:"canEdit",type:"x-multiselect",className:"col-md-4",templateOptions:{label:r.i18n["library.management.scope.elements.can_edit"],placeholder:r.i18n["library.management.scope.elements.can_edit"],dataDisplay:["name"],required:!0,disabled:!1,optionsList:yield(0,h.firstValueFrom)(r._scopesService.canEditOptions$),settings:{searchApi:!1,emptyMessage:"No hay registros",singleSelection:!1}},hideExpression:()=>0===r.modelTemplate.formScopes?.length},{key:"documentation",type:"x-editor",className:"col-md-12",templateOptions:{label:r.i18n["library.management.documentation"],placeholder:r.i18n["library.management.documentation"],required:!1,disabled:!1,style:{height:"100px"}}}]}];r.fieldsGestionTemplate=[{key:"form-template",type:"x-form-management",className:"col-12",templateOptions:{required:!1,element:{},fieldTitle:r.i18n["library.management.registry.template"],typeManagement:"ADD",tableTitle:r.i18n["library.management.template"],fieldsForm:g,modelForm:r.modelTemplate,disableButtons:!1,onCancel:r.close.bind(r),onSave:r.onSaveElementTemplate.bind(r),"xformManagement.register":"Registrar","xformManagement.delete":"Eliminar","xformManagement.cancel":"Cancelar","xformManagement.save":"Guardar","xformManagement.edit":"Editar","xformManagement.alertAddTitle":"Agregar","xformManagement.alertAddText":"\xbfDesea guardar la plantilla?","xformManagement.alertEditTitle":"Editar","xformManagement.alertEditText":"Editar","xformManagement.alertDeleteTitle":"Eliminar","xformManagement.alertDeleteText":"Eliminar","xformManagement.alertCancelTitle":"Cancelar","xformManagement.alertCancelText":"Cancelar","xformManagement.alertYes":"Aceptar","xformManagement.alertNot":"Cancelar","xformManagement.detail":"Detalle"}}]})()}setCode(){let r=this.modelTemplate?.name===this.modelTemplate?.name.toUpperCase()?this.modelTemplate?.name.toLowerCase():this.modelTemplate?.name;r=r.normalize("NFD").replace(/[\u0300-\u036f]/g,"");let g=r.toLowerCase().replace(/\W+/g," ").split(/ |\B(?=[A-Z])/).map(A=>A.toLowerCase()).join("_");g.length>20&&(g=g.substring(0,20)),this.formTemplate.controls.code?.setValue(g)}close(){this.ref.close({mensaje:"cerrado",data:null}),this.cd.detectChanges()}onSaveElementTemplate(){var r=this;return(0,a.Z)(function*(){r.modelTemplate.scope=r.modelTemplate.scope?.id,r.modelTemplate.creatorUserId=r.context.session.sub,r.modelTemplate.organizationId=r.organizationId,r.modelTemplate.categoryId=r.modelTemplate.categoryId.id;const{id:g,canEdit:A,...w}=r.modelTemplate;w.formScopes=[];let C=yield(0,h.firstValueFrom)(r._template.addElementTemplate(w));null==C&&r.ref.close({mensaje:"close",data:null}),r.fieldsToSave.componentInfo={elementId:C.id};let G={form:C,formTemplateVersion:{version:null,template:[r.fieldsToSave]}};yield(0,h.firstValueFrom)(r._template.addElementTemplateVersion(G));let f=r._template.queryFilter;f.criteria={id:{equals:C.id},type:{equals:"TEMPLATE"}};let O=yield(0,h.firstValueFrom)(r._template.findElementCriteria(f)),S=Object.values(O[0].formVersions)[0];Object.values(O[0].formVersions).map(W=>{W.element={id:O[0].id}}),O[0].currentVersionId=S.id,yield(0,h.firstValueFrom)(r._template.updateElementTemplate(O[0])),r.addScopeElements(O[0]),r.ref.close({mensaje:"close",data:C})})()}addScopeElements(r){var g=this;return(0,a.Z)(function*(){g.modelTemplate.formScopes.length>0&&(g.modelTemplate.formScopes.forEach(A=>{const w=g.modelTemplate?.canEdit.find(G=>G.id===A.id);r.formScopes.push({idElement:r.id,scopeReferenceId:A.id,canEdit:w?"YES":"NOT"})}),yield(0,h.firstValueFrom)(g._template.updateElementTemplate(r)))})()}getElementsScopesOptions(){const r={criteria:{organizationId:{equals:this.organizationId}},unpaged:!0};return new Promise(g=>{switch(this.modelTemplate.scope?.id){case"PUBLIC":this._organizationService.getLstOrganizations(null).subscribe({next:A=>{g(this.mapToObject(A))}});break;case"REST_USERS":this._userService.getLstUsers(r).subscribe({next:A=>{const w=A.filter(C=>C.id!=this.context.session.sub);g(this.mapToObject(w))}});break;case"REST_GROUPS":this._groupService.getLstGroups(null).subscribe({next:A=>{g(this.mapToObject(A))}});break;case"REST_ORGANIZATION_UNITS":this._organizationalUnitService.getLstOrganizationsUnit(r).subscribe({next:A=>{g(this.mapToObject(A))}});break;default:g([])}})}mapToObject(r){return r.map(g=>({id:g.id,description:g?.name||g?.username}))}setformScopesOptions(){var r=this;return(0,a.Z)(function*(){r.modelTemplate.formScopes=[],r._scopesService.setElementScopeOptions([]);const g=yield r.getElementsScopesOptions();r._scopesService.setElementScopeOptions(g),r.createFormly()})()}setCanEditOptions(){this._scopesService.setCanEditOptions(this.modelTemplate.formScopes)}}return Z.\u0275fac=function(r){return new(r||Z)(n.\u0275\u0275directiveInject(u.DynamicDialogRef),n.\u0275\u0275directiveInject(u.DynamicDialogConfig),n.\u0275\u0275directiveInject(n.ChangeDetectorRef),n.\u0275\u0275directiveInject(l.F),n.\u0275\u0275directiveInject(m.E),n.\u0275\u0275directiveInject(L.Q),n.\u0275\u0275directiveInject(v.H),n.\u0275\u0275directiveInject(U.M),n.\u0275\u0275directiveInject(k.d),n.\u0275\u0275directiveInject(Y.K),n.\u0275\u0275directiveInject(Q.l),n.\u0275\u0275directiveInject(D.k))},Z.\u0275cmp=n.\u0275\u0275defineComponent({type:Z,selectors:[["app-template"]],decls:2,vars:4,consts:[[3,"formGroup"],[3,"form","fields","model"]],template:function(r,g){1&r&&(n.\u0275\u0275elementStart(0,"form",0),n.\u0275\u0275element(1,"gallery-lib",1),n.\u0275\u0275elementEnd()),2&r&&(n.\u0275\u0275property("formGroup",g.formTemplate),n.\u0275\u0275advance(1),n.\u0275\u0275property("form",g.formTemplate)("fields",g.fieldsGestionTemplate)("model",g.modelTemplate))},dependencies:[d.\u0275NgNoValidate,d.NgControlStatusGroup,d.FormGroupDirective,$.T9]}),Z})()},70764:(t,i,e)=>{e.r(i),e.d(i,{ZeroFdModule:()=>Q});var a=e(90944),n=e(10730),_=e(15861),d=e(45449),P=e(86116);const M=[{path:"",children:[{path:"designer",loadChildren:()=>Promise.resolve().then(e.bind(e,49073)).then(D=>D.MainRoutingModule)}],resolve:{i18n:(()=>{class D{constructor(x){this._i18n=x}resolve(){var x=this;return(0,_.Z)(function*(){return yield x._i18n.setI18InSessionStorage()})()}}return D.\u0275fac=function(x){return new(x||D)(d.\u0275\u0275inject(P.D))},D.\u0275prov=d.\u0275\u0275defineInjectable({token:D,factory:D.\u0275fac,providedIn:"root"}),D})()}}];let u=(()=>{class D{}return D.\u0275fac=function(x){return new(x||D)},D.\u0275mod=d.\u0275\u0275defineNgModule({type:D}),D.\u0275inj=d.\u0275\u0275defineInjector({imports:[n.RouterModule.forChild(M),n.RouterModule]}),D})();var b=e(14289),l=e(49073),m=e(93071),L=e(79070),v=e(11177),U=e(13406);let k=(()=>{class D{constructor(){this.components=[],this.components$=new U.Subject}get getComponents(){return this.components}get getComponents$(){return this.components$.asObservable()}addComponent(x){this.components.push(x),this.components$.next(this.components)}}return D.\u0275fac=function(x){return new(x||D)},D.\u0275prov=d.\u0275\u0275defineInjectable({token:D,factory:D.\u0275fac}),D})(),Y=(()=>{class D{}return D.\u0275fac=function(x){return new(x||D)},D.\u0275mod=d.\u0275\u0275defineNgModule({type:D}),D.\u0275inj=d.\u0275\u0275defineInjector({providers:[k,v.DynamicDialogRef],imports:[a.CommonModule,l.MainRoutingModule,b.m,L.ProgressSpinnerModule,m.FormsModule,m.ReactiveFormsModule]}),D})(),Q=(()=>{class D{}return D.\u0275fac=function(x){return new(x||D)},D.\u0275mod=d.\u0275\u0275defineNgModule({type:D}),D.\u0275inj=d.\u0275\u0275defineInjector({imports:[a.CommonModule,u,b.m,Y]}),D})()},74243:(t,i,e)=>{e.d(i,{F:()=>_});var a=e(45449);let _=(()=>{class d{constructor(){this.PANEL_CONTAINER="form-panel-container",this.GROUP_CONTAINER="form-group-container",this.GENERAL_CONTAINER_NAME="container",this.ACTIVE_STATUS="ACTIVE",this.OPTIONS_STATUS=[],this.OPTIONS_OWNER=[],this.OPTIONS_YES_NOT=[],this.OPTIONS_STATUS=[{value:"ACTIVE",description:"active",label:"active"},{value:"INACTIVE",description:"inactive",label:"inactive"}],this.OPTIONS_SCOPE=[{id:"PRIVATE",code:"PRIVATE",description:"private",label:"private"},{id:"PUBLIC",code:"PUBLIC",description:"public",label:"public"},{id:"REST_USERS",code:"REST_USERS",description:"user",label:"user"},{id:"REST_GROUPS",code:"REST_GROUPS",description:"groups",label:"groups"},{id:"REST_ORGANIZATION_UNITS",code:"REST_ORGANIZATION_UNITS",description:"organizationunits",label:"organizationunits"}],this.OPTIONS_CATEGORY_LIBRARIES=[{id:"3b56553d-f8ed-4d3f-940b-715727bb5974",code:"DD-CAT1",label:"Art\xedculos"},{id:"2425bf24-636c-4041-a8ef-99efd5ecb7e4",code:"DD-CAT2",label:"P\xe1rrafos"}],this.OPTIONS_CATEGORY_TEMPLATES=[{id:"67ca645f-f2d4-48ad-9090-fd9f3e460bde",code:"DD-CAT3",label:"Plantillas"}],this.OPTIONS_OWNER=[{value:"ORGANIZATION",description:"organization",label:"organization"},{value:"SYSTEM",description:"owner",label:"system"}],this.OPTIONS_YES_NOT=[{value:"YES",description:"yes",label:"yes"},{value:"NOT",description:"not",label:"not"}],this.OPTIONS_LABEL_POSITION=[{id:"START",code:"Start",description:"start",label:"start"},{id:"END",code:"End",description:"start",label:"end"},{id:"TOP",code:"Top",description:"start",label:"top"},{id:"BOTTOM",code:"Bottom",description:"start",label:"bottom"}]}internationalize(h,M,u){return this[h].map(b=>({...b,description:M[`${u}.${b.label}`],label:M[`${u}.${b.label}`]}))}}return d.\u0275fac=function(h){return new(h||d)},d.\u0275prov=a.\u0275\u0275defineInjectable({token:d,factory:d.\u0275fac,providedIn:"root"}),d})()},86116:(t,i,e)=>{e.d(i,{D:()=>B});var a=e(15861);function n(o){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(s){return typeof s}:function(s){return s&&"function"==typeof Symbol&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s})(o)}function _(o,s){if(!(o instanceof s))throw new TypeError("Cannot call a class as a function")}function d(o,s){for(var c=0;c<s.length;c++){var p=s[c];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(o,p.key,p)}}function P(o,s,c){return s&&d(o.prototype,s),c&&d(o,c),Object.defineProperty(o,"prototype",{writable:!1}),o}function M(o){return(M=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(c){return c.__proto__||Object.getPrototypeOf(c)})(o)}function u(o,s){return(u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(p,E){return p.__proto__=E,p})(o,s)}function b(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function l(o,s,c){return(l=b()?Reflect.construct.bind():function(E,y,T){var F=[null];F.push.apply(F,y);var j=new(Function.bind.apply(E,F));return T&&u(j,T.prototype),j}).apply(null,arguments)}function L(o){var s="function"==typeof Map?new Map:void 0;return L=function(p){if(null===p||!function m(o){return-1!==Function.toString.call(o).indexOf("[native code]")}(p))return p;if("function"!=typeof p)throw new TypeError("Super expression must either be null or a function");if(typeof s<"u"){if(s.has(p))return s.get(p);s.set(p,E)}function E(){return l(p,arguments,M(this).constructor)}return E.prototype=Object.create(p.prototype,{constructor:{value:E,enumerable:!1,writable:!0,configurable:!0}}),u(E,p)},L(o)}function U(o,s){if(s&&("object"==typeof s||"function"==typeof s))return s;if(void 0!==s)throw new TypeError("Derived constructors may only return object or undefined");return function v(o){if(void 0===o)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return o}(o)}function $(o,s){if(o){if("string"==typeof o)return x(o,s);var c=Object.prototype.toString.call(o).slice(8,-1);if("Object"===c&&o.constructor&&(c=o.constructor.name),"Map"===c||"Set"===c)return Array.from(o);if("Arguments"===c||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c))return x(o,s)}}function x(o,s){(null==s||s>o.length)&&(s=o.length);for(var c=0,p=new Array(s);c<s;c++)p[c]=o[c];return p}var r=Object.prototype.hasOwnProperty;function g(o,s){return(o=o.slice()).push(s),o}function A(o,s){return(s=s.slice()).unshift(o),s}var w=function(o){!function h(o,s){if("function"!=typeof s&&null!==s)throw new TypeError("Super expression must either be null or a function");o.prototype=Object.create(s&&s.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),Object.defineProperty(o,"prototype",{writable:!1}),s&&u(o,s)}(c,o);var s=function k(o){var s=b();return function(){var E,p=M(o);if(s){var y=M(this).constructor;E=Reflect.construct(p,arguments,y)}else E=p.apply(this,arguments);return U(this,E)}}(c);function c(p){var E;return _(this,c),(E=s.call(this,'JSONPath should not be called with "new" (it prevents return of (unwrapped) scalar values)')).avoidNew=!0,E.value=p,E.name="NewError",E}return P(c)}(L(Error));function C(o,s,c,p,E){if(!(this instanceof C))try{return new C(o,s,c,p,E)}catch(R){if(!R.avoidNew)throw R;return R.value}"string"==typeof o&&(E=p,p=c,c=s,s=o,o=null);var y=o&&"object"===n(o);if(this.json=(o=o||{}).json||c,this.path=o.path||s,this.resultType=o.resultType||"value",this.flatten=o.flatten||!1,this.wrap=!r.call(o,"wrap")||o.wrap,this.sandbox=o.sandbox||{},this.preventEval=o.preventEval||!1,this.parent=o.parent||null,this.parentProperty=o.parentProperty||null,this.callback=o.callback||p||null,this.otherTypeCallback=o.otherTypeCallback||E||function(){throw new TypeError("You must supply an otherTypeCallback callback option with the @other() operator.")},!1!==o.autostart){var T={path:y?o.path:s};y?"json"in o&&(T.json=o.json):T.json=c;var F=this.evaluate(T);if(!F||"object"!==n(F))throw new w(F);return F}}C.prototype.evaluate=function(o,s,c,p){var E=this,y=this.parent,T=this.parentProperty,F=this.flatten,R=this.wrap;if(this.currResultType=this.resultType,this.currPreventEval=this.preventEval,this.currSandbox=this.sandbox,c=c||this.callback,this.currOtherTypeCallback=p||this.otherTypeCallback,s=s||this.json,(o=o||this.path)&&"object"===n(o)&&!Array.isArray(o)){if(!o.path&&""!==o.path)throw new TypeError('You must supply a "path" property when providing an object argument to JSONPath.evaluate().');if(!r.call(o,"json"))throw new TypeError('You must supply a "json" property when providing an object argument to JSONPath.evaluate().');s=o.json,F=r.call(o,"flatten")?o.flatten:F,this.currResultType=r.call(o,"resultType")?o.resultType:this.currResultType,this.currSandbox=r.call(o,"sandbox")?o.sandbox:this.currSandbox,R=r.call(o,"wrap")?o.wrap:R,this.currPreventEval=r.call(o,"preventEval")?o.preventEval:this.currPreventEval,c=r.call(o,"callback")?o.callback:c,this.currOtherTypeCallback=r.call(o,"otherTypeCallback")?o.otherTypeCallback:this.currOtherTypeCallback,y=r.call(o,"parent")?o.parent:y,T=r.call(o,"parentProperty")?o.parentProperty:T,o=o.path}if(y=y||null,T=T||null,Array.isArray(o)&&(o=C.toPathString(o)),(o||""===o)&&s){var I=C.toPathArray(o);"$"===I[0]&&I.length>1&&I.shift(),this._hasParentSelector=null;var K=this._trace(I,s,["$"],y,T,c).filter(function(N){return N&&!N.isParentSelector});return K.length?R||1!==K.length||K[0].hasArrExpr?K.reduce(function(N,z){var q=E._getPreferredOutput(z);return F&&Array.isArray(q)?N=N.concat(q):N.push(q),N},[]):this._getPreferredOutput(K[0]):R?[]:void 0}},C.prototype._getPreferredOutput=function(o){var s=this.currResultType;switch(s){case"all":var c=Array.isArray(o.path)?o.path:C.toPathArray(o.path);return o.pointer=C.toPointer(c),o.path="string"==typeof o.path?o.path:C.toPathString(o.path),o;case"value":case"parent":case"parentProperty":return o[s];case"path":return C.toPathString(o[s]);case"pointer":return C.toPointer(o.path);default:throw new TypeError("Unknown result type")}},C.prototype._handleCallback=function(o,s,c){if(s){var p=this._getPreferredOutput(o);o.path="string"==typeof o.path?o.path:C.toPathString(o.path),s(p,c,o)}},C.prototype._trace=function(o,s,c,p,E,y,T,F){var j,R=this;if(!o.length)return this._handleCallback(j={path:c,value:s,parent:p,parentProperty:E,hasArrExpr:T},y,"value"),j;var I=o[0],K=o.slice(1),N=[];function z(V){Array.isArray(V)?V.forEach(function(ce){N.push(ce)}):N.push(V)}if(("string"!=typeof I||F)&&s&&r.call(s,I))z(this._trace(K,s[I],g(c,I),s,I,y,T));else if("*"===I)this._walk(s,function(V){z(R._trace(K,s[V],g(c,V),s,V,y,!0,!0))});else if(".."===I)z(this._trace(K,s,c,p,E,y,T)),this._walk(s,function(V){"object"===n(s[V])&&z(R._trace(o.slice(),s[V],g(c,V),s,V,y,!0))});else{if("^"===I)return this._hasParentSelector=!0,{path:c.slice(0,-1),expr:K,isParentSelector:!0};if("~"===I)return j={path:g(c,I),value:E,parent:p,parentProperty:null},this._handleCallback(j,y,"property"),j;if("$"===I)z(this._trace(K,s,c,null,null,y,T));else if(/^(\x2D?[0-9]*):(\x2D?[0-9]*):?([0-9]*)$/.test(I))z(this._slice(I,K,s,c,p,E,y));else if(0===I.indexOf("?(")){if(this.currPreventEval)throw new Error("Eval [?(expr)] prevented in JSONPath expression.");var q=I.replace(/^\?\(((?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*?)\)$/,"$1");this._walk(s,function(V){R._eval(q,s[V],V,c,p,E)&&z(R._trace(K,s[V],g(c,V),s,V,y,!0))})}else if("("===I[0]){if(this.currPreventEval)throw new Error("Eval [(expr)] prevented in JSONPath expression.");z(this._trace(A(this._eval(I,s,c[c.length-1],c.slice(0,-1),p,E),K),s,c,p,E,y,T))}else if("@"===I[0]){var H=!1,te=I.slice(1,-2);switch(te){case"scalar":(!s||!["object","function"].includes(n(s)))&&(H=!0);break;case"boolean":case"string":case"undefined":case"function":n(s)===te&&(H=!0);break;case"integer":Number.isFinite(s)&&!(s%1)&&(H=!0);break;case"number":Number.isFinite(s)&&(H=!0);break;case"nonFinite":"number"==typeof s&&!Number.isFinite(s)&&(H=!0);break;case"object":s&&n(s)===te&&(H=!0);break;case"array":Array.isArray(s)&&(H=!0);break;case"other":H=this.currOtherTypeCallback(s,c,p,E);break;case"null":null===s&&(H=!0);break;default:throw new TypeError("Unknown value type "+te)}if(H)return this._handleCallback(j={path:c,value:s,parent:p,parentProperty:E},y,"value"),j}else if("`"===I[0]&&s&&r.call(s,I.slice(1))){var oe=I.slice(1);z(this._trace(K,s[oe],g(c,oe),s,oe,y,T,!0))}else if(I.includes(",")){var ae,re=function J(o,s){var c=typeof Symbol<"u"&&o[Symbol.iterator]||o["@@iterator"];if(!c){if(Array.isArray(o)||(c=$(o))||s&&o&&"number"==typeof o.length){c&&(o=c);var p=0,E=function(){};return{s:E,n:function(){return p>=o.length?{done:!0}:{done:!1,value:o[p++]}},e:function(R){throw R},f:E}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var F,y=!0,T=!1;return{s:function(){c=c.call(o)},n:function(){var R=c.next();return y=R.done,R},e:function(R){T=!0,F=R},f:function(){try{!y&&null!=c.return&&c.return()}finally{if(T)throw F}}}}(I.split(","));try{for(re.s();!(ae=re.n()).done;)z(this._trace(A(ae.value,K),s,c,p,E,y,!0))}catch(V){re.e(V)}finally{re.f()}}else!F&&s&&r.call(s,I)&&z(this._trace(K,s[I],g(c,I),s,I,y,T,!0))}if(this._hasParentSelector)for(var X=0;X<N.length;X++){var ne=N[X];if(ne&&ne.isParentSelector){var ee=this._trace(ne.expr,s,ne.path,p,E,y,T);if(Array.isArray(ee)){N[X]=ee[0];for(var _e=ee.length,ie=1;ie<_e;ie++)X++,N.splice(X,0,ee[ie])}else N[X]=ee}}return N},C.prototype._walk=function(o,s){if(Array.isArray(o))for(var c=o.length,p=0;p<c;p++)s(p);else o&&"object"===n(o)&&Object.keys(o).forEach(function(E){s(E)})},C.prototype._slice=function(o,s,c,p,E,y,T){if(Array.isArray(c)){var F=c.length,R=o.split(":"),j=R[2]&&Number.parseInt(R[2])||1,I=R[0]&&Number.parseInt(R[0])||0,K=R[1]&&Number.parseInt(R[1])||F;I=I<0?Math.max(0,I+F):Math.min(F,I),K=K<0?Math.max(0,K+F):Math.min(F,K);for(var N=[],z=I;z<K;z+=j)this._trace(A(z,s),c,p,E,y,T,!0).forEach(function(H){N.push(H)});return N}},C.prototype._eval=function(o,s,c,p,E,y){this.currSandbox._$_parentProperty=y,this.currSandbox._$_parent=E,this.currSandbox._$_property=c,this.currSandbox._$_root=this.json,this.currSandbox._$_v=s;var T=o.includes("@path");T&&(this.currSandbox._$_path=C.toPathString(p.concat([c])));var F="script:"+o;if(!C.cache[F]){var R=o.replace(/@parentProperty/g,"_$_parentProperty").replace(/@parent/g,"_$_parent").replace(/@property/g,"_$_property").replace(/@root/g,"_$_root").replace(/@([\t-\r \)\.\[\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF])/g,"_$_v$1");T&&(R=R.replace(/@path/g,"_$_path")),C.cache[F]=new this.vm.Script(R)}try{return C.cache[F].runInNewContext(this.currSandbox)}catch(j){throw new Error("jsonPath: "+j.message+": "+o)}},C.cache={},C.toPathString=function(o){for(var s=o,c=s.length,p="$",E=1;E<c;E++)/^(~|\^|@(?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*?\(\))$/.test(s[E])||(p+=/^[\*0-9]+$/.test(s[E])?"["+s[E]+"]":"['"+s[E]+"']");return p},C.toPointer=function(o){for(var s=o,c=s.length,p="",E=1;E<c;E++)/^(~|\^|@(?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*?\(\))$/.test(s[E])||(p+="/"+s[E].toString().replace(/~/g,"~0").replace(/\//g,"~1"));return p},C.toPathArray=function(o){var s=C.cache;if(s[o])return s[o].concat();var c=[],E=o.replace(/@(?:null|boolean|number|string|integer|undefined|nonFinite|scalar|array|object|function|other)\(\)/g,";$&;").replace(/['\[](\??\((?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*?\))['\]]/g,function(y,T){return"[#"+(c.push(T)-1)+"]"}).replace(/\[["']((?:(?!['\]])[\s\S])*)["']\]/g,function(y,T){return"['"+T.replace(/\./g,"%@%").replace(/~/g,"%%@@%%")+"']"}).replace(/~/g,";~;").replace(/["']?\.["']?(?!(?:(?!\[)[\s\S])*\])|\[["']?/g,";").replace(/%@%/g,".").replace(/%%@@%%/g,"~").replace(/(?:;)?(\^+)(?:;)?/g,function(y,T){return";"+T.split("").join(";")+";"}).replace(/;;;|;;/g,";..;").replace(/;$|'?\]|'$/g,"").split(";").map(function(y){var T=y.match(/#([0-9]+)/);return T&&T[1]?c[T[1]]:y});return s[o]=E,s[o].concat()},C.prototype.vm={Script:function(){function o(s){_(this,o),this.code=s}return P(o,[{key:"runInNewContext",value:function(c){var p=this.code,E=Object.keys(c),y=[];!function(s,c,p){for(var E=s.length,y=0;y<E;y++)p(s[y])&&c.push(s.splice(y--,1)[0])}(E,y,function(I){return"function"==typeof c[I]});var T=E.map(function(I,K){return c[I]}),F=y.reduce(function(I,K){var N=c[K].toString();return/function/.test(N)||(N="function "+N),"var "+K+"="+N+";"+I},"");!/(["'])use strict\1/.test(p=F+p)&&!E.includes("arguments")&&(p="var arguments = undefined;"+p);var R=(p=p.replace(/;[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*$/,"")).lastIndexOf(";"),j=R>-1?p.slice(0,R+1)+" return "+p.slice(R+1):" return "+p;return l(Function,E.concat([j])).apply(void 0,function Y(o){return function Q(o){if(Array.isArray(o))return x(o)}(o)||function D(o){if(typeof Symbol<"u"&&null!=o[Symbol.iterator]||null!=o["@@iterator"])return Array.from(o)}(o)||$(o)||function Z(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(T))}}]),o}()};var O=e(92340),S=e(45449),W=e(59584);let B=(()=>{class o{constructor(c){this.http=c,this.contextSystem=`/${O.N.CONTEXT_SYSTEM_KEY}/`,this.paramResource="@.ir.resources",this.urlCache=`${O.N.apiUrl}zero-cache/api/cache`}getI18nResource(c){const[p,E,y]=c.split(".");let T=sessionStorage.getItem("i18n");if(T){let R=C({path:`$.${p}.${E}`,json:JSON.parse(T)});return null!=R[0]?R[0][y]:`${p}.${E}`}}setI18InSessionStorage(){var c=this;return(0,a.Z)(function*(){if(!sessionStorage.getItem("i18n")){let p=encodeURI(`${c.paramResource}`),E=yield c.getCache(p),y=Object.assign(E.response.GLC[O.N.LANGUAGE],E.response.GUI[O.N.LANGUAGE],E.response.FUN[O.N.LANGUAGE]);sessionStorage.setItem("i18n",JSON.stringify(y))}})()}getCache(c){return new Promise(p=>{this.http.get(`${this.urlCache}${this.contextSystem}${c}`).subscribe({next:y=>{p(y)},error:y=>{console.error(y)}})})}}return o.\u0275fac=function(c){return new(c||o)(S.\u0275\u0275inject(W.HttpClient))},o.\u0275prov=S.\u0275\u0275defineInjectable({token:o,factory:o.\u0275fac,providedIn:"root"}),o})()},87602:(t,i,e)=>{e.d(i,{Q:()=>l});var a=e(59584),_=e(13406),P=e(92340),h=e(45449),u=e(72489);let l=(()=>{class m{constructor(v,U){this.http=v,this._keycloakService=U,this._url=`${P.N.apiUrlMc}`}getCache(v){return this.http.get(this._url+"/"+v).pipe((0,_.catchError)(U=>this.errorHandler(U)))}getContext(){return this.http.get(this._url+"/usr_"+this._keycloakService.getKeycloakInstance().tokenParsed?.sub)}errorHandler(v){let U;return v instanceof a.HttpErrorResponse&&ErrorEvent,U=v,(0,_.throwError)(()=>v)}save(v){this.http.post(this._url,v).subscribe(U=>{})}update(v){this.http.put(this._url,v).subscribe({next:U=>{},error:U=>{}})}delete(v){return this.http.delete(`${this._url}/${v}`)}}return m.\u0275fac=function(v){return new(v||m)(h.\u0275\u0275inject(a.HttpClient),h.\u0275\u0275inject(u.KeycloakService))},m.\u0275prov=h.\u0275\u0275defineInjectable({token:m,factory:m.\u0275fac,providedIn:"root"}),m})()},57408:(t,i,e)=>{e.d(i,{H:()=>M});var a=e(92340),n=e(45449),d=e(59584),h=e(20657);let M=(()=>{class u{constructor(l,m){this._http=l,this._helpersService=m,this._url=`${a.N.apiUrlGe}category`}getLstCategories(l){let m=this._helpersService.createHttpParamsString(l);return this._http.get(this._url,{params:m})}setCategorySelected(l){this._categorySelected=l}addCategory(l){return this._http.post(this._url,l)}updateCategory(l){return this._http.put(this._url,l)}deleteCategory(l){return this._http.delete(`${this._url}/${l.id}`)}get configurationSelected(){return this._categorySelected}setQueryFilter(l){this._queryFilter=l}get queryFilter(){return this._queryFilter}setModelFilter(l){this._modelFilter=l}get modelFilter(){return this._modelFilter}}return u.\u0275fac=function(l){return new(l||u)(n.\u0275\u0275inject(d.HttpClient),n.\u0275\u0275inject(h.$))},u.\u0275prov=n.\u0275\u0275defineInjectable({token:u,factory:u.\u0275fac,providedIn:"root"}),u})()},10226:(t,i,e)=>{e.d(i,{l:()=>M});var a=e(92340),n=e(45449),d=e(59584),h=e(20657);let M=(()=>{class u{constructor(l,m){this._http=l,this._helpersService=m,this._url=`${a.N.apiUrlAs}keycloak-group`}getLstGroups(l){let m=this._helpersService.createHttpParamsString(l);return this._http.get(this._url,{params:m})}}return u.\u0275fac=function(l){return new(l||u)(n.\u0275\u0275inject(d.HttpClient),n.\u0275\u0275inject(h.$))},u.\u0275prov=n.\u0275\u0275defineInjectable({token:u,factory:u.\u0275fac,providedIn:"root"}),u})()},20657:(t,i,e)=>{e.d(i,{$:()=>G});var a=e(59584),n=e(15861);let _={};const d={},P={};let h=!1;function M(f,O){return u.apply(this,arguments)}function u(){return(u=(0,n.Z)(function*(f,O){return(yield d[f].get(O))()})).apply(this,arguments)}function b(f,O){return l.apply(this,arguments)}function l(){return(l=(0,n.Z)(function*(f,O){return P[O]||(h||(yield e.I("default"),h=!0),yield f.init(e.S.default),P[O]=!0),f})).apply(this,arguments)}function m(f,O){return L.apply(this,arguments)}function L(){return(L=(0,n.Z)(function*(f,O){if("string"==typeof f)return yield k(f,O);if("script"===f.type){const S=f;return yield k(S.remoteEntry,S.remoteName)}"module"===f.type&&(yield v(f.remoteEntry))})).apply(this,arguments)}function v(f){return U.apply(this,arguments)}function U(){return(U=(0,n.Z)(function*(f){return d[f]?Promise.resolve():yield import(f).then(O=>{b(O,f),d[f]=O})})).apply(this,arguments)}function k(f,O){return Y.apply(this,arguments)}function Y(){return(Y=(0,n.Z)(function*(f,O){return new Promise((S,W)=>{if(d[O])return void S();const B=document.createElement("script");B.src=f,B.onerror=W,B.onload=()=>{const o=window[O];b(o,O),d[O]=o,S()},document.body.appendChild(B)})})).apply(this,arguments)}function D(){return(D=(0,n.Z)(function*(f){let O,S,W;if(f.type||(f.type="script"),"manifest"===f.type){const B=_[f.remoteName];if(!B)throw new Error("Manifest does not contain "+f.remoteName);f={type:B.type,exposedModule:f.exposedModule,remoteEntry:B.remoteEntry,remoteName:"script"===B.type?f.remoteName:void 0},W=B.remoteEntry}else W=f.remoteEntry;return"script"===f.type?(O={type:"script",remoteEntry:f.remoteEntry,remoteName:f.remoteName},S=f.remoteName):"module"===f.type&&(O={type:"module",remoteEntry:f.remoteEntry},S=f.remoteEntry),W&&(yield m(O)),yield M(S,f.exposedModule)})).apply(this,arguments)}var C=e(45449);let G=(()=>{class f{constructor(){}createHttpParamsString(S){let W=this.changeObjectToDotNotationFormat(S,null,null),B=new a.HttpParams;for(let o in W){let s=W[o],c=o.replace("criteria.","");c=c.replace("pageable.",""),B=B.set(c,s)}return B}changeObjectToDotNotationFormat(S,W,B){const o=B||{};for(let s in S){let c=S[s],p=W?`${W}.${s}`:s;c&&"object"==typeof c?this.changeObjectToDotNotationFormat(c,p,o):o[p]=c}return o}getRemoteComponent(S,W){return function Q(f){return D.apply(this,arguments)}({remoteEntry:S,type:"module",exposedModule:W})}}return f.\u0275fac=function(S){return new(S||f)},f.\u0275prov=C.\u0275\u0275defineInjectable({token:f,factory:f.\u0275fac,providedIn:"root"}),f})()},19511:(t,i,e)=>{e.d(i,{$:()=>M});var a=e(92340),n=e(45449),d=e(59584),h=e(20657);let M=(()=>{class u{constructor(l,m){this._http=l,this._helpersService=m,this._url=`${a.N.apiUrl}zero-fd/api/`,this._queryFilter={criteria:{}}}addElementLibrary(l){let m=this._url.concat("form");return this._http.post(m,l)}findElementById(l){let m=this._url.concat("form/"+l);return this._http.get(m)}addElementLibraryVersion(l){let m=this._url.concat("library-template/create-update");return this._http.put(m,l)}findLibraryVersion(l){let m=this._url.concat("library-template/find-library-version?"+l);return this._http.get(m)}findElementCriteria(l){let m=this._helpersService.createHttpParamsString(l),L=this._url.concat("form");return this._http.get(L,{params:m})}updateElementTemplate(l){let m=this._url.concat("form");return this._http.put(m,l)}setQueryFilter(l){this._queryFilter=l}get queryFilter(){return this._queryFilter}generateTree(l){return this._http.post(`${this._url}form/generate-tree`,l)}}return u.\u0275fac=function(l){return new(l||u)(n.\u0275\u0275inject(d.HttpClient),n.\u0275\u0275inject(h.$))},u.\u0275prov=n.\u0275\u0275defineInjectable({token:u,factory:u.\u0275fac,providedIn:"root"}),u})()},61254:(t,i,e)=>{e.d(i,{M:()=>l});var a=e(92340),n=e(59584),h=(e(13406),e(45449)),u=e(20657),b=e(74243);let l=(()=>{class m{constructor(v,U,k){this._http=v,this._helpersService=U,this._commonValuesService=k,this._url=`${a.N.apiUrlOm}organizations`}getLstOrganizations(v){let U=this._helpersService.createHttpParamsString(v);return this._http.get(this._url,{params:U})}getOrganizationById(v){return this._http.get(this._url+"/"+v)}deleteOrganization(v){return this._http.delete(`${this._url}/${v.id}`)}addOrganization(v){return this._http.post(this._url,v)}updateOrganization(v){return this._http.put(this._url,v)}setQueryFilter(v){this._queryFilter=v}get queryFilter(){return this._queryFilter}setModelFilter(v){this._modelFilter=v}get modelFilter(){return this._modelFilter}}return m.\u0275fac=function(v){return new(v||m)(h.\u0275\u0275inject(n.HttpClient),h.\u0275\u0275inject(u.$),h.\u0275\u0275inject(b.F))},m.\u0275prov=h.\u0275\u0275defineInjectable({token:m,factory:m.\u0275fac,providedIn:"root"}),m})()},30161:(t,i,e)=>{e.d(i,{d:()=>M});var a=e(92340),n=e(45449),d=e(59584),h=e(20657);let M=(()=>{class u{constructor(l,m){this._http=l,this._helpersService=m,this._url=`${a.N.apiUrlOm}organizational-units`}getLstOrganizationsUnit(l){let m=this._helpersService.createHttpParamsString(l);return this._http.get(this._url,{params:m})}getOrganizationUnit(l){return this._http.get(`${this._url}/${l}`)}}return u.\u0275fac=function(l){return new(l||u)(n.\u0275\u0275inject(d.HttpClient),n.\u0275\u0275inject(h.$))},u.\u0275prov=n.\u0275\u0275defineInjectable({token:u,factory:u.\u0275fac,providedIn:"root"}),u})()},62171:(t,i,e)=>{e.d(i,{k:()=>P});var a=e(13406),_=e(45449);let P=(()=>{class h{constructor(){this.elementScopeOptions=new a.BehaviorSubject([]),this.elementScopeOptions$=this.elementScopeOptions.asObservable(),this.canEditOptions=new a.BehaviorSubject([]),this.canEditOptions$=this.canEditOptions.asObservable()}setElementScopeOptions(u){this.elementScopeOptions.next(u)}setCanEditOptions(u){this.canEditOptions.next(u)}}return h.\u0275fac=function(u){return new(u||h)},h.\u0275prov=_.\u0275\u0275defineInjectable({token:h,factory:h.\u0275fac,providedIn:"root"}),h})()},23733:(t,i,e)=>{e.d(i,{E:()=>M});var a=e(92340),n=e(45449),d=e(59584),h=e(20657);let M=(()=>{class u{constructor(l,m){this._http=l,this._helpersService=m,this._url=`${a.N.apiUrl}zero-fd/api/`,this._queryFilter={criteria:{}}}addElementTemplate(l){let m=this._url.concat("form");return this._http.post(m,l)}findElementCriteria(l){let m=this._helpersService.createHttpParamsString(l),L=this._url.concat("form");return this._http.get(L,{params:m})}addElementTemplateVersion(l){let m=this._url.concat("form-template/create-update");return this._http.put(m,l)}findTemplateVersion(l){let m=this._url.concat("form-template/find-form-version?"+l);return this._http.get(m)}updateElementTemplate(l){let m=this._url.concat("form");return this._http.put(m,l)}usageCaseElement(l){let m=this._url.concat();return this._http.post(m,l)}setQueryFilter(l){this._queryFilter=l}get queryFilter(){return this._queryFilter}}return u.\u0275fac=function(l){return new(l||u)(n.\u0275\u0275inject(d.HttpClient),n.\u0275\u0275inject(h.$))},u.\u0275prov=n.\u0275\u0275defineInjectable({token:u,factory:u.\u0275fac,providedIn:"root"}),u})()},98613:(t,i,e)=>{e.d(i,{K:()=>M});var a=e(92340),n=e(45449),d=e(59584),h=e(20657);let M=(()=>{class u{constructor(l,m){this._http=l,this._helpersService=m,this._url=`${a.N.apiUrlAs}user-account`}getLstUsers(l){let m=this._helpersService.createHttpParamsString(l);return this._http.get(this._url,{params:m})}addUser(l){return l.sendResetPassword=l.sendResetPassword?l.sendResetPassword:"NOT",l.sendVerificationLink=l.sendVerificationLink?l.sendVerificationLink:"NOT",console.log(l),this._http.post(this._url,l)}updateUser(l){return l.sendResetPassword=l.sendResetPassword?l.sendResetPassword:"NOT",l.sendVerificationLink=l.sendVerificationLink?l.sendVerificationLink:"NOT",console.log(l),this._http.put(this._url,l)}deleteUser(l){return this._http.delete(`${this._url}/${l.userId}`)}setQueryFilter(l){this._queryFilter=l}get queryFilter(){return this._queryFilter}setModelFilter(l){this._modelFilter=l}get modelFilter(){return this._modelFilter}}return u.\u0275fac=function(l){return new(l||u)(n.\u0275\u0275inject(d.HttpClient),n.\u0275\u0275inject(h.$))},u.\u0275prov=n.\u0275\u0275defineInjectable({token:u,factory:u.\u0275fac,providedIn:"root"}),u})()},75341:(t,i,e)=>{e.d(i,{y:()=>u});var a=e(92340),n=e(45449),d=e(59584),h=e(20657),M=e(74243);let u=(()=>{class b{constructor(m,L,v){this._http=m,this._helpersService=L,this._commonValuesService=v,this._url=`${a.N.apiUrlGe}list-of-values`}getLstValueList(m){let L=this._helpersService.createHttpParamsString(m);return this._http.get(this._url,{params:L})}deleteValueList(m){return this._http.delete(`${this._url}/${m.id}`)}addValueList(m){return this._http.post(this._url,m)}updateValueList(m){return this._http.put(this._url,m)}countValueList(m){let L=this._helpersService.createHttpParamsString(m);return this._http.get([this._url,"count"].join("/"),{params:L})}getData(m,L=!0){return this._http.get([this._url,"get-data",m].join("/"),{params:{showSpiner:L}})}setQueryFilter(m){this._queryFilter=m}get queryFilter(){return this._queryFilter}setModelFilter(m){this._modelFilter=m}get modelFilter(){return this._modelFilter}}return b.\u0275fac=function(m){return new(m||b)(n.\u0275\u0275inject(d.HttpClient),n.\u0275\u0275inject(h.$),n.\u0275\u0275inject(M.F))},b.\u0275prov=n.\u0275\u0275defineInjectable({token:b,factory:b.\u0275fac,providedIn:"root"}),b})()},82019:(t,i,e)=>{e.d(i,{P:()=>M});var a=e(92340),n=e(45449),d=e(59584),h=e(20657);let M=(()=>{class u{constructor(l,m){this._http=l,this._helpersService=m,this._url=`${a.N.apiUrl}zero-zm/api/designer`}getLstComponent(l){return this._http.get([this._url,"components",l].join("/"))}get configurationSelected(){return this._testTypeSelected}setQueryFilter(l){this._queryFilter=l}get queryFilter(){return this._queryFilter}setModelFilter(l){this._modelFilter=l}get modelFilter(){return this._modelFilter}}return u.\u0275fac=function(l){return new(l||u)(n.\u0275\u0275inject(d.HttpClient),n.\u0275\u0275inject(h.$))},u.\u0275prov=n.\u0275\u0275defineInjectable({token:u,factory:u.\u0275fac,providedIn:"root"}),u})()},23491:t=>{t.exports=JSON.parse('{"HM":"fd-panel-container","V":"fd-group-container"}')}}]);