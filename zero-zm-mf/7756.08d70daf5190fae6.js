(self.webpackChunkzero_zm_mf=self.webpackChunkzero_zm_mf||[]).push([[7756,5365],{5343:(n,h)=>{h.byteLength=function H(y){var R=A(y),P=R[1];return 3*(R[0]+P)/4-P},h.toByteArray=function T(y){var R,d,U=A(y),P=U[0],X=U[1],p=new _(function I(y,R,U){return 3*(R+U)/4-U}(0,P,X)),e=0,u=X>0?P-4:P;for(d=0;d<u;d+=4)R=s[y.charCodeAt(d)]<<18|s[y.charCodeAt(d+1)]<<12|s[y.charCodeAt(d+2)]<<6|s[y.charCodeAt(d+3)],p[e++]=R>>16&255,p[e++]=R>>8&255,p[e++]=255&R;return 2===X&&(R=s[y.charCodeAt(d)]<<2|s[y.charCodeAt(d+1)]>>4,p[e++]=255&R),1===X&&(R=s[y.charCodeAt(d)]<<10|s[y.charCodeAt(d+1)]<<4|s[y.charCodeAt(d+2)]>>2,p[e++]=R>>8&255,p[e++]=255&R),p},h.fromByteArray=function C(y){for(var R,U=y.length,P=U%3,X=[],p=16383,e=0,u=U-P;e<u;e+=p)X.push(b(y,e,e+p>u?u:e+p));return 1===P?X.push(k[(R=y[U-1])>>2]+k[R<<4&63]+"=="):2===P&&X.push(k[(R=(y[U-2]<<8)+y[U-1])>>10]+k[R>>4&63]+k[R<<2&63]+"="),X.join("")};for(var k=[],s=[],_=typeof Uint8Array<"u"?Uint8Array:Array,c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",S=0,f=c.length;S<f;++S)k[S]=c[S],s[c.charCodeAt(S)]=S;function A(y){var R=y.length;if(R%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var U=y.indexOf("=");return-1===U&&(U=R),[U,U===R?0:4-U%4]}function M(y){return k[y>>18&63]+k[y>>12&63]+k[y>>6&63]+k[63&y]}function b(y,R,U){for(var X=[],p=R;p<U;p+=3)X.push(M((y[p]<<16&16711680)+(y[p+1]<<8&65280)+(255&y[p+2])));return X.join("")}s["-".charCodeAt(0)]=62,s["_".charCodeAt(0)]=63},1520:(module,exports,__webpack_require__)=>{var __WEBPACK_AMD_DEFINE_RESULT__;(function(){"use strict";var ERROR="input is invalid type",WINDOW="object"==typeof window,root=WINDOW?window:{};root.JS_SHA256_NO_WINDOW&&(WINDOW=!1);var WEB_WORKER=!WINDOW&&"object"==typeof self,NODE_JS=!root.JS_SHA256_NO_NODE_JS&&"object"==typeof process&&process.versions&&process.versions.node;NODE_JS?root=global:WEB_WORKER&&(root=self);var COMMON_JS=!root.JS_SHA256_NO_COMMON_JS&&module.exports,AMD=__webpack_require__.amdO,ARRAY_BUFFER=!root.JS_SHA256_NO_ARRAY_BUFFER&&typeof ArrayBuffer<"u",HEX_CHARS="0123456789abcdef".split(""),EXTRA=[-2147483648,8388608,32768,128],SHIFT=[24,16,8,0],K=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],OUTPUT_TYPES=["hex","array","digest","arrayBuffer"],blocks=[];(root.JS_SHA256_NO_NODE_JS||!Array.isArray)&&(Array.isArray=function(n){return"[object Array]"===Object.prototype.toString.call(n)}),ARRAY_BUFFER&&(root.JS_SHA256_NO_ARRAY_BUFFER_IS_VIEW||!ArrayBuffer.isView)&&(ArrayBuffer.isView=function(n){return"object"==typeof n&&n.buffer&&n.buffer.constructor===ArrayBuffer});var createOutputMethod=function(n,h){return function(k){return new Sha256(h,!0).update(k)[n]()}},createMethod=function(n){var h=createOutputMethod("hex",n);NODE_JS&&(h=nodeWrap(h,n)),h.create=function(){return new Sha256(n)},h.update=function(_){return h.create().update(_)};for(var k=0;k<OUTPUT_TYPES.length;++k){var s=OUTPUT_TYPES[k];h[s]=createOutputMethod(s,n)}return h},nodeWrap=function(method,is224){var crypto=eval("require('crypto')"),Buffer=eval("require('buffer').Buffer"),algorithm=is224?"sha224":"sha256",nodeMethod=function(n){if("string"==typeof n)return crypto.createHash(algorithm).update(n,"utf8").digest("hex");if(null==n)throw new Error(ERROR);return n.constructor===ArrayBuffer&&(n=new Uint8Array(n)),Array.isArray(n)||ArrayBuffer.isView(n)||n.constructor===Buffer?crypto.createHash(algorithm).update(new Buffer(n)).digest("hex"):method(n)};return nodeMethod},createHmacOutputMethod=function(n,h){return function(k,s){return new HmacSha256(k,h,!0).update(s)[n]()}},createHmacMethod=function(n){var h=createHmacOutputMethod("hex",n);h.create=function(_){return new HmacSha256(_,n)},h.update=function(_,c){return h.create(_).update(c)};for(var k=0;k<OUTPUT_TYPES.length;++k){var s=OUTPUT_TYPES[k];h[s]=createHmacOutputMethod(s,n)}return h};function Sha256(n,h){h?(blocks[0]=blocks[16]=blocks[1]=blocks[2]=blocks[3]=blocks[4]=blocks[5]=blocks[6]=blocks[7]=blocks[8]=blocks[9]=blocks[10]=blocks[11]=blocks[12]=blocks[13]=blocks[14]=blocks[15]=0,this.blocks=blocks):this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],n?(this.h0=3238371032,this.h1=914150663,this.h2=812702999,this.h3=4144912697,this.h4=4290775857,this.h5=1750603025,this.h6=1694076839,this.h7=3204075428):(this.h0=1779033703,this.h1=3144134277,this.h2=1013904242,this.h3=2773480762,this.h4=1359893119,this.h5=2600822924,this.h6=528734635,this.h7=1541459225),this.block=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0,this.is224=n}function HmacSha256(n,h,k){var s,_=typeof n;if("string"===_){var A,c=[],S=n.length,f=0;for(s=0;s<S;++s)(A=n.charCodeAt(s))<128?c[f++]=A:A<2048?(c[f++]=192|A>>6,c[f++]=128|63&A):A<55296||A>=57344?(c[f++]=224|A>>12,c[f++]=128|A>>6&63,c[f++]=128|63&A):(A=65536+((1023&A)<<10|1023&n.charCodeAt(++s)),c[f++]=240|A>>18,c[f++]=128|A>>12&63,c[f++]=128|A>>6&63,c[f++]=128|63&A);n=c}else{if("object"!==_)throw new Error(ERROR);if(null===n)throw new Error(ERROR);if(ARRAY_BUFFER&&n.constructor===ArrayBuffer)n=new Uint8Array(n);else if(!(Array.isArray(n)||ARRAY_BUFFER&&ArrayBuffer.isView(n)))throw new Error(ERROR)}n.length>64&&(n=new Sha256(h,!0).update(n).array());var H=[],I=[];for(s=0;s<64;++s){var T=n[s]||0;H[s]=92^T,I[s]=54^T}Sha256.call(this,h,k),this.update(I),this.oKeyPad=H,this.inner=!0,this.sharedMemory=k}Sha256.prototype.update=function(n){if(!this.finalized){var h,k=typeof n;if("string"!==k){if("object"!==k)throw new Error(ERROR);if(null===n)throw new Error(ERROR);if(ARRAY_BUFFER&&n.constructor===ArrayBuffer)n=new Uint8Array(n);else if(!(Array.isArray(n)||ARRAY_BUFFER&&ArrayBuffer.isView(n)))throw new Error(ERROR);h=!0}for(var s,c,_=0,S=n.length,f=this.blocks;_<S;){if(this.hashed&&(this.hashed=!1,f[0]=this.block,f[16]=f[1]=f[2]=f[3]=f[4]=f[5]=f[6]=f[7]=f[8]=f[9]=f[10]=f[11]=f[12]=f[13]=f[14]=f[15]=0),h)for(c=this.start;_<S&&c<64;++_)f[c>>2]|=n[_]<<SHIFT[3&c++];else for(c=this.start;_<S&&c<64;++_)(s=n.charCodeAt(_))<128?f[c>>2]|=s<<SHIFT[3&c++]:s<2048?(f[c>>2]|=(192|s>>6)<<SHIFT[3&c++],f[c>>2]|=(128|63&s)<<SHIFT[3&c++]):s<55296||s>=57344?(f[c>>2]|=(224|s>>12)<<SHIFT[3&c++],f[c>>2]|=(128|s>>6&63)<<SHIFT[3&c++],f[c>>2]|=(128|63&s)<<SHIFT[3&c++]):(s=65536+((1023&s)<<10|1023&n.charCodeAt(++_)),f[c>>2]|=(240|s>>18)<<SHIFT[3&c++],f[c>>2]|=(128|s>>12&63)<<SHIFT[3&c++],f[c>>2]|=(128|s>>6&63)<<SHIFT[3&c++],f[c>>2]|=(128|63&s)<<SHIFT[3&c++]);this.lastByteIndex=c,this.bytes+=c-this.start,c>=64?(this.block=f[16],this.start=c-64,this.hash(),this.hashed=!0):this.start=c}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this}},Sha256.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var n=this.blocks,h=this.lastByteIndex;n[16]=this.block,n[h>>2]|=EXTRA[3&h],this.block=n[16],h>=56&&(this.hashed||this.hash(),n[0]=this.block,n[16]=n[1]=n[2]=n[3]=n[4]=n[5]=n[6]=n[7]=n[8]=n[9]=n[10]=n[11]=n[12]=n[13]=n[14]=n[15]=0),n[14]=this.hBytes<<3|this.bytes>>>29,n[15]=this.bytes<<3,this.hash()}},Sha256.prototype.hash=function(){var H,b,R,U,P,X,n=this.h0,h=this.h1,k=this.h2,s=this.h3,_=this.h4,c=this.h5,S=this.h6,f=this.h7,A=this.blocks;for(H=16;H<64;++H)A[H]=A[H-16]+(((b=A[H-15])>>>7|b<<25)^(b>>>18|b<<14)^b>>>3)+A[H-7]+(((b=A[H-2])>>>17|b<<15)^(b>>>19|b<<13)^b>>>10)<<0;for(X=h&k,H=0;H<64;H+=4)this.first?(this.is224?(R=300032,f=(b=A[0]-1413257819)-150054599<<0,s=b+24177077<<0):(R=704751109,f=(b=A[0]-210244248)-1521486534<<0,s=b+143694565<<0),this.first=!1):(f=s+(b=f+((_>>>6|_<<26)^(_>>>11|_<<21)^(_>>>25|_<<7))+(_&c^~_&S)+K[H]+A[H])<<0,s=b+(((n>>>2|n<<30)^(n>>>13|n<<19)^(n>>>22|n<<10))+((R=n&h)^n&k^X))<<0),S=k+(b=S+((f>>>6|f<<26)^(f>>>11|f<<21)^(f>>>25|f<<7))+(f&_^~f&c)+K[H+1]+A[H+1])<<0,k=b+(((s>>>2|s<<30)^(s>>>13|s<<19)^(s>>>22|s<<10))+((U=s&n)^s&h^R))<<0,c=h+(b=c+((S>>>6|S<<26)^(S>>>11|S<<21)^(S>>>25|S<<7))+(S&f^~S&_)+K[H+2]+A[H+2])<<0,h=b+(((k>>>2|k<<30)^(k>>>13|k<<19)^(k>>>22|k<<10))+((P=k&s)^k&n^U))<<0,_=n+(b=_+((c>>>6|c<<26)^(c>>>11|c<<21)^(c>>>25|c<<7))+(c&S^~c&f)+K[H+3]+A[H+3])<<0,n=b+(((h>>>2|h<<30)^(h>>>13|h<<19)^(h>>>22|h<<10))+((X=h&k)^h&s^P))<<0;this.h0=this.h0+n<<0,this.h1=this.h1+h<<0,this.h2=this.h2+k<<0,this.h3=this.h3+s<<0,this.h4=this.h4+_<<0,this.h5=this.h5+c<<0,this.h6=this.h6+S<<0,this.h7=this.h7+f<<0},Sha256.prototype.hex=function(){this.finalize();var n=this.h0,h=this.h1,k=this.h2,s=this.h3,_=this.h4,c=this.h5,S=this.h6,f=this.h7,A=HEX_CHARS[n>>28&15]+HEX_CHARS[n>>24&15]+HEX_CHARS[n>>20&15]+HEX_CHARS[n>>16&15]+HEX_CHARS[n>>12&15]+HEX_CHARS[n>>8&15]+HEX_CHARS[n>>4&15]+HEX_CHARS[15&n]+HEX_CHARS[h>>28&15]+HEX_CHARS[h>>24&15]+HEX_CHARS[h>>20&15]+HEX_CHARS[h>>16&15]+HEX_CHARS[h>>12&15]+HEX_CHARS[h>>8&15]+HEX_CHARS[h>>4&15]+HEX_CHARS[15&h]+HEX_CHARS[k>>28&15]+HEX_CHARS[k>>24&15]+HEX_CHARS[k>>20&15]+HEX_CHARS[k>>16&15]+HEX_CHARS[k>>12&15]+HEX_CHARS[k>>8&15]+HEX_CHARS[k>>4&15]+HEX_CHARS[15&k]+HEX_CHARS[s>>28&15]+HEX_CHARS[s>>24&15]+HEX_CHARS[s>>20&15]+HEX_CHARS[s>>16&15]+HEX_CHARS[s>>12&15]+HEX_CHARS[s>>8&15]+HEX_CHARS[s>>4&15]+HEX_CHARS[15&s]+HEX_CHARS[_>>28&15]+HEX_CHARS[_>>24&15]+HEX_CHARS[_>>20&15]+HEX_CHARS[_>>16&15]+HEX_CHARS[_>>12&15]+HEX_CHARS[_>>8&15]+HEX_CHARS[_>>4&15]+HEX_CHARS[15&_]+HEX_CHARS[c>>28&15]+HEX_CHARS[c>>24&15]+HEX_CHARS[c>>20&15]+HEX_CHARS[c>>16&15]+HEX_CHARS[c>>12&15]+HEX_CHARS[c>>8&15]+HEX_CHARS[c>>4&15]+HEX_CHARS[15&c]+HEX_CHARS[S>>28&15]+HEX_CHARS[S>>24&15]+HEX_CHARS[S>>20&15]+HEX_CHARS[S>>16&15]+HEX_CHARS[S>>12&15]+HEX_CHARS[S>>8&15]+HEX_CHARS[S>>4&15]+HEX_CHARS[15&S];return this.is224||(A+=HEX_CHARS[f>>28&15]+HEX_CHARS[f>>24&15]+HEX_CHARS[f>>20&15]+HEX_CHARS[f>>16&15]+HEX_CHARS[f>>12&15]+HEX_CHARS[f>>8&15]+HEX_CHARS[f>>4&15]+HEX_CHARS[15&f]),A},Sha256.prototype.toString=Sha256.prototype.hex,Sha256.prototype.digest=function(){this.finalize();var n=this.h0,h=this.h1,k=this.h2,s=this.h3,_=this.h4,c=this.h5,S=this.h6,f=this.h7,A=[n>>24&255,n>>16&255,n>>8&255,255&n,h>>24&255,h>>16&255,h>>8&255,255&h,k>>24&255,k>>16&255,k>>8&255,255&k,s>>24&255,s>>16&255,s>>8&255,255&s,_>>24&255,_>>16&255,_>>8&255,255&_,c>>24&255,c>>16&255,c>>8&255,255&c,S>>24&255,S>>16&255,S>>8&255,255&S];return this.is224||A.push(f>>24&255,f>>16&255,f>>8&255,255&f),A},Sha256.prototype.array=Sha256.prototype.digest,Sha256.prototype.arrayBuffer=function(){this.finalize();var n=new ArrayBuffer(this.is224?28:32),h=new DataView(n);return h.setUint32(0,this.h0),h.setUint32(4,this.h1),h.setUint32(8,this.h2),h.setUint32(12,this.h3),h.setUint32(16,this.h4),h.setUint32(20,this.h5),h.setUint32(24,this.h6),this.is224||h.setUint32(28,this.h7),n},HmacSha256.prototype=new Sha256,HmacSha256.prototype.finalize=function(){if(Sha256.prototype.finalize.call(this),this.inner){this.inner=!1;var n=this.array();Sha256.call(this,this.is224,this.sharedMemory),this.update(this.oKeyPad),this.update(n),Sha256.prototype.finalize.call(this)}};var exports=createMethod();exports.sha256=exports,exports.sha224=createMethod(!0),exports.sha256.hmac=createHmacMethod(),exports.sha224.hmac=createHmacMethod(!0),COMMON_JS?module.exports=exports:(root.sha256=exports.sha256,root.sha224=exports.sha224,AMD&&(__WEBPACK_AMD_DEFINE_RESULT__=function(){return exports}.call(exports,__webpack_require__,exports,module),void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)))})()},27756:(n,h,k)=>{k.r(h),k.d(h,{CoreModule:()=>P,KeycloakAngularModule:()=>X,KeycloakAuthGuard:()=>y,KeycloakBearerInterceptor:()=>U,KeycloakEventType:()=>C,KeycloakService:()=>R});var s=k(15861),_=k(45449),c=k(59584),S=k(13406),f=k(60097),A=k(5343),H=k(1520);if(typeof Promise>"u")throw Error("Keycloak requires an environment that supports Promises. Make sure that you include the appropriate polyfill.");var I=!1;function T(){I||(I=!0,console.warn("[KEYCLOAK] Usage of legacy style promise methods such as `.error()` and `.success()` has been deprecated and support will be removed in future versions. Use standard style promise methods such as `.then() and `.catch()` instead."))}function M(p){if(!(this instanceof M))return new M(p);for(var u,F,e=this,d=[],w={enable:!0,callbackList:[],interval:5},B=document.getElementsByTagName("script"),N=0;N<B.length;N++)(-1!==B[N].src.indexOf("keycloak.js")||-1!==B[N].src.indexOf("keycloak.min.js"))&&-1!==B[N].src.indexOf("version=")&&(e.iframeVersion=B[N].src.substring(B[N].src.indexOf("version=")+8).split("&")[0]);var Y=!0,j=ue(console.info),G=ue(console.warn);function ae(r,t){for(var i=function le(r){var t=null,i=window.crypto||window.msCrypto;if(i&&i.getRandomValues&&window.Uint8Array)return t=new Uint8Array(r),i.getRandomValues(t),t;t=new Array(r);for(var l=0;l<t.length;l++)t[l]=Math.floor(256*Math.random());return t}(r),l=new Array(r),a=0;a<r;a++)l[a]=t.charCodeAt(i[a]%t.length);return String.fromCharCode.apply(null,l)}function z(){if(typeof e.authServerUrl<"u")return"/"==e.authServerUrl.charAt(e.authServerUrl.length-1)?e.authServerUrl+"realms/"+encodeURIComponent(e.realm):e.authServerUrl+"/realms/"+encodeURIComponent(e.realm)}function V(r,t){var i=r.code,l=r.error,a=r.prompt,o=(new Date).getTime();if(r.kc_action_status&&e.onActionUpdate&&e.onActionUpdate(r.kc_action_status),l)if("none"!=a){var v={error:l,error_description:r.error_description};e.onAuthError&&e.onAuthError(v),t&&t.setError(v)}else t&&t.setSuccess();else if("standard"!=e.flow&&(r.access_token||r.id_token)&&E(r.access_token,null,r.id_token,!0),"implicit"!=e.flow&&i){var m="code="+i+"&grant_type=authorization_code",g=e.endpoints.token(),x=new XMLHttpRequest;x.open("POST",g,!0),x.setRequestHeader("Content-type","application/x-www-form-urlencoded"),m+="&client_id="+encodeURIComponent(e.clientId),m+="&redirect_uri="+r.redirectUri,r.pkceCodeVerifier&&(m+="&code_verifier="+r.pkceCodeVerifier),x.withCredentials=!0,x.onreadystatechange=function(){if(4==x.readyState)if(200==x.status){var L=JSON.parse(x.responseText);E(L.access_token,L.refresh_token,L.id_token,"standard"===e.flow),re()}else e.onAuthError&&e.onAuthError(),t&&t.setError()},x.send(m)}function E(L,J,D,W){$(L,J,D,o=(o+(new Date).getTime())/2),Y&&(e.tokenParsed&&e.tokenParsed.nonce!=r.storedNonce||e.refreshTokenParsed&&e.refreshTokenParsed.nonce!=r.storedNonce||e.idTokenParsed&&e.idTokenParsed.nonce!=r.storedNonce)?(j("[KEYCLOAK] Invalid nonce, clearing token"),e.clearToken(),t&&t.setError()):W&&(e.onAuthSuccess&&e.onAuthSuccess(),t&&t.setSuccess())}}function se(r){return 0==r.status&&r.responseText&&r.responseURL.startsWith("file:")}function $(r,t,i,l){if(e.tokenTimeoutHandle&&(clearTimeout(e.tokenTimeoutHandle),e.tokenTimeoutHandle=null),t?(e.refreshToken=t,e.refreshTokenParsed=q(t)):(delete e.refreshToken,delete e.refreshTokenParsed),i?(e.idToken=i,e.idTokenParsed=q(i)):(delete e.idToken,delete e.idTokenParsed),r){if(e.token=r,e.tokenParsed=q(r),e.sessionId=e.tokenParsed.session_state,e.authenticated=!0,e.subject=e.tokenParsed.sub,e.realmAccess=e.tokenParsed.realm_access,e.resourceAccess=e.tokenParsed.resource_access,l&&(e.timeSkew=Math.floor(l/1e3)-e.tokenParsed.iat),null!=e.timeSkew&&(j("[KEYCLOAK] Estimated time difference between browser and server is "+e.timeSkew+" seconds"),e.onTokenExpired)){var a=1e3*(e.tokenParsed.exp-(new Date).getTime()/1e3+e.timeSkew);j("[KEYCLOAK] Token expires in "+Math.round(a/1e3)+" s"),a<=0?e.onTokenExpired():e.tokenTimeoutHandle=setTimeout(e.onTokenExpired,a)}}else delete e.token,delete e.tokenParsed,delete e.subject,delete e.realmAccess,delete e.resourceAccess,e.authenticated=!1}function q(r){switch((r=(r=(r=r.split(".")[1]).replace(/-/g,"+")).replace(/_/g,"/")).length%4){case 0:break;case 2:r+="==";break;case 3:r+="=";break;default:throw"Invalid token"}return r=decodeURIComponent(escape(atob(r))),JSON.parse(r)}function ie(){var r="0123456789abcdef",t=ae(36,r).split("");return t[14]="4",t[19]=r.substr(3&t[19]|8,1),t[8]=t[13]=t[18]=t[23]="-",t.join("")}function Z(r){var t=function ke(r){var t;switch(e.flow){case"standard":t=["code","state","session_state","kc_action_status"];break;case"implicit":t=["access_token","token_type","id_token","state","session_state","expires_in","kc_action_status"];break;case"hybrid":t=["access_token","token_type","id_token","code","state","session_state","expires_in","kc_action_status"]}t.push("error"),t.push("error_description"),t.push("error_uri");var a,o,i=r.indexOf("?"),l=r.indexOf("#");if("query"===e.responseMode&&-1!==i?(a=r.substring(0,i),""!==(o=ce(r.substring(i+1,-1!==l?l:r.length),t)).paramsString&&(a+="?"+o.paramsString),-1!==l&&(a+=r.substring(l))):"fragment"===e.responseMode&&-1!==l&&(a=r.substring(0,l),""!==(o=ce(r.substring(l+1),t)).paramsString&&(a+="#"+o.paramsString)),o&&o.oauthParams)if("standard"===e.flow||"hybrid"===e.flow){if((o.oauthParams.code||o.oauthParams.error)&&o.oauthParams.state)return o.oauthParams.newUrl=a,o.oauthParams}else if("implicit"===e.flow&&(o.oauthParams.access_token||o.oauthParams.error)&&o.oauthParams.state)return o.oauthParams.newUrl=a,o.oauthParams}(r);if(t){var i=F.get(t.state);return i&&(t.valid=!0,t.redirectUri=i.redirectUri,t.storedNonce=i.nonce,t.prompt=i.prompt,t.pkceCodeVerifier=i.pkceCodeVerifier),t}}function ce(r,t){for(var i=r.split("&"),l={paramsString:"",oauthParams:{}},a=0;a<i.length;a++){var o=i[a].indexOf("="),v=i[a].slice(0,o);-1!==t.indexOf(v)?l.oauthParams[v]=i[a].slice(o+1):(""!==l.paramsString&&(l.paramsString+="&"),l.paramsString+=i[a])}return l}function O(){var r={setSuccess:function(t){r.resolve(t)},setError:function(t){r.reject(t)}};return r.promise=new Promise(function(t,i){r.resolve=t,r.reject=i}),r.promise.success=function(t){return T(),this.then(function(l){t(l)}),this},r.promise.error=function(t){return T(),this.catch(function(l){t(l)}),this},r}function ee(){var r=O();if(!w.enable||w.iframe)return r.setSuccess(),r.promise;var t=document.createElement("iframe");w.iframe=t,t.onload=function(){var a=e.endpoints.authorize();w.iframeOrigin="/"===a.charAt(0)?function pe(){return window.location.origin?window.location.origin:window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"")}():a.substring(0,a.indexOf("/",8)),r.setSuccess()};var i=e.endpoints.checkSessionIframe();return t.setAttribute("src",i),t.setAttribute("title","keycloak-session-iframe"),t.style.display="none",document.body.appendChild(t),window.addEventListener("message",function(a){if(a.origin===w.iframeOrigin&&w.iframe.contentWindow===a.source&&("unchanged"==a.data||"changed"==a.data||"error"==a.data)){"unchanged"!=a.data&&e.clearToken();for(var o=w.callbackList.splice(0,w.callbackList.length),v=o.length-1;v>=0;--v){var m=o[v];"error"==a.data?m.setError():m.setSuccess("unchanged"==a.data)}}},!1),r.promise}function re(){w.enable&&e.token&&setTimeout(function(){Q().then(function(r){r&&re()})},1e3*w.interval)}function Q(){var r=O();if(w.iframe&&w.iframeOrigin){var t=e.clientId+" "+(e.sessionId?e.sessionId:"");w.callbackList.push(r),1==w.callbackList.length&&w.iframe.contentWindow.postMessage(t,w.iframeOrigin)}else r.setSuccess();return r.promise}function xe(){var r=O();if(w.enable||e.silentCheckSsoRedirectUri){var t=document.createElement("iframe");t.setAttribute("src",e.endpoints.thirdPartyCookiesIframe()),t.setAttribute("title","keycloak-3p-check-iframe"),t.style.display="none",document.body.appendChild(t);var i=function(l){t.contentWindow===l.source&&("supported"!==l.data&&"unsupported"!==l.data||("unsupported"===l.data&&(w.enable=!1,e.silentCheckSsoFallback&&(e.silentCheckSsoRedirectUri=!1),G("[KEYCLOAK] 3rd party cookies aren't supported by this browser. checkLoginIframe and silent check-sso are not available.")),document.body.removeChild(t),window.removeEventListener("message",i),r.setSuccess()))};window.addEventListener("message",i,!1)}else r.setSuccess();return function me(r,t,i){var l=null,a=new Promise(function(o,v){l=setTimeout(function(){v({error:i||"Promise is not settled within timeout of "+t+"ms"})},t)});return Promise.race([r,a]).finally(function(){clearTimeout(l)})}(r.promise,e.messageReceiveTimeout,"Timeout when waiting for 3rd party check iframe message.")}function te(r){if(!r||"default"==r)return{login:function(o){return window.location.replace(e.createLoginUrl(o)),O().promise},logout:function(o){return window.location.replace(e.createLogoutUrl(o)),O().promise},register:function(o){return window.location.replace(e.createRegisterUrl(o)),O().promise},accountManagement:function(){var o=e.createAccountUrl();if(!(typeof o<"u"))throw"Not supported by the OIDC server";return window.location.href=o,O().promise},redirectUri:function(o,v){return o&&o.redirectUri?o.redirectUri:e.redirectUri?e.redirectUri:location.href}};if("cordova"==r){w.enable=!1;var t=function(o,v,m){return window.cordova&&window.cordova.InAppBrowser?window.cordova.InAppBrowser.open(o,v,m):window.open(o,v,m)},a=function(o){var v=function(o){return o&&o.cordovaOptions?Object.keys(o.cordovaOptions).reduce(function(v,m){return v[m]=o.cordovaOptions[m],v},{}):{}}(o);return v.location="no",o&&"none"==o.prompt&&(v.hidden="yes"),function(o){return Object.keys(o).reduce(function(v,m){return v.push(m+"="+o[m]),v},[]).join(",")}(v)};return{login:function(o){var v=O(),m=a(o),g=e.createLoginUrl(o),x=t(g,"_blank",m),E=!1,L=!1,J=function(){L=!0,x.close()};return x.addEventListener("loadstart",function(D){0==D.url.indexOf("http://localhost")&&(V(Z(D.url),v),J(),E=!0)}),x.addEventListener("loaderror",function(D){E||(0==D.url.indexOf("http://localhost")?(V(Z(D.url),v),J(),E=!0):(v.setError(),J()))}),x.addEventListener("exit",function(D){L||v.setError({reason:"closed_by_user"})}),v.promise},logout:function(o){var x,v=O(),m=e.createLogoutUrl(o),g=t(m,"_blank","location=no,hidden=yes,clearcache=yes");return g.addEventListener("loadstart",function(E){0==E.url.indexOf("http://localhost")&&g.close()}),g.addEventListener("loaderror",function(E){0==E.url.indexOf("http://localhost")||(x=!0),g.close()}),g.addEventListener("exit",function(E){x?v.setError():(e.clearToken(),v.setSuccess())}),v.promise},register:function(o){var v=O(),m=e.createRegisterUrl(),g=a(o),x=t(m,"_blank",g);return x.addEventListener("loadstart",function(E){0==E.url.indexOf("http://localhost")&&(x.close(),V(Z(E.url),v))}),v.promise},accountManagement:function(){var o=e.createAccountUrl();if(!(typeof o<"u"))throw"Not supported by the OIDC server";var v=t(o,"_blank","location=no");v.addEventListener("loadstart",function(m){0==m.url.indexOf("http://localhost")&&v.close()})},redirectUri:function(o){return"http://localhost"}}}if("cordova-native"==r)return w.enable=!1,{login:function(o){var v=O(),m=e.createLoginUrl(o);return universalLinks.subscribe("keycloak",function(g){universalLinks.unsubscribe("keycloak"),window.cordova.plugins.browsertab.close(),V(Z(g.url),v)}),window.cordova.plugins.browsertab.openUrl(m),v.promise},logout:function(o){var v=O(),m=e.createLogoutUrl(o);return universalLinks.subscribe("keycloak",function(g){universalLinks.unsubscribe("keycloak"),window.cordova.plugins.browsertab.close(),e.clearToken(),v.setSuccess()}),window.cordova.plugins.browsertab.openUrl(m),v.promise},register:function(o){var v=O(),m=e.createRegisterUrl(o);return universalLinks.subscribe("keycloak",function(g){universalLinks.unsubscribe("keycloak"),window.cordova.plugins.browsertab.close(),V(Z(g.url),v)}),window.cordova.plugins.browsertab.openUrl(m),v.promise},accountManagement:function(){var o=e.createAccountUrl();if(!(typeof o<"u"))throw"Not supported by the OIDC server";window.cordova.plugins.browsertab.openUrl(o)},redirectUri:function(o){return o&&o.redirectUri?o.redirectUri:e.redirectUri?e.redirectUri:"http://localhost"}};throw"invalid adapter type: "+r}e.init=function(r){if(e.authenticated=!1,F=function _e(){try{return new ne}catch{}return new oe}(),u=r&&["default","cordova","cordova-native"].indexOf(r.adapter)>-1?te(r.adapter):r&&"object"==typeof r.adapter?r.adapter:window.Cordova||window.cordova?te("cordova"):te(),r){if(typeof r.useNonce<"u"&&(Y=r.useNonce),typeof r.checkLoginIframe<"u"&&(w.enable=r.checkLoginIframe),r.checkLoginIframeInterval&&(w.interval=r.checkLoginIframeInterval),"login-required"===r.onLoad&&(e.loginRequired=!0),r.responseMode){if("query"!==r.responseMode&&"fragment"!==r.responseMode)throw"Invalid value for responseMode";e.responseMode=r.responseMode}if(r.flow){switch(r.flow){case"standard":e.responseType="code";break;case"implicit":e.responseType="id_token token";break;case"hybrid":e.responseType="code id_token token";break;default:throw"Invalid value for flow"}e.flow=r.flow}if(null!=r.timeSkew&&(e.timeSkew=r.timeSkew),r.redirectUri&&(e.redirectUri=r.redirectUri),r.silentCheckSsoRedirectUri&&(e.silentCheckSsoRedirectUri=r.silentCheckSsoRedirectUri),e.silentCheckSsoFallback="boolean"!=typeof r.silentCheckSsoFallback||r.silentCheckSsoFallback,r.pkceMethod){if("S256"!==r.pkceMethod)throw"Invalid value for pkceMethod";e.pkceMethod=r.pkceMethod}e.enableLogging="boolean"==typeof r.enableLogging&&r.enableLogging,"string"==typeof r.scope&&(e.scope=r.scope),e.messageReceiveTimeout="number"==typeof r.messageReceiveTimeout&&r.messageReceiveTimeout>0?r.messageReceiveTimeout:1e4}e.responseMode||(e.responseMode="fragment"),e.responseType||(e.responseType="code",e.flow="standard");var i=O(),l=O();l.promise.then(function(){e.onReady&&e.onReady(e.authenticated),i.setSuccess(e.authenticated)}).catch(function(g){i.setError(g)});var a=function ve(r){var i,t=O();function l(x){e.endpoints=x?{authorize:function(){return x.authorization_endpoint},token:function(){return x.token_endpoint},logout:function(){if(!x.end_session_endpoint)throw"Not supported by the OIDC server";return x.end_session_endpoint},checkSessionIframe:function(){if(!x.check_session_iframe)throw"Not supported by the OIDC server";return x.check_session_iframe},register:function(){throw'Redirection to "Register user" page not supported in standard OIDC mode'},userinfo:function(){if(!x.userinfo_endpoint)throw"Not supported by the OIDC server";return x.userinfo_endpoint}}:{authorize:function(){return z()+"/protocol/openid-connect/auth"},token:function(){return z()+"/protocol/openid-connect/token"},logout:function(){return z()+"/protocol/openid-connect/logout"},checkSessionIframe:function(){var E=z()+"/protocol/openid-connect/login-status-iframe.html";return e.iframeVersion&&(E=E+"?version="+e.iframeVersion),E},thirdPartyCookiesIframe:function(){var E=z()+"/protocol/openid-connect/3p-cookies/step1.html";return e.iframeVersion&&(E=E+"?version="+e.iframeVersion),E},register:function(){return z()+"/protocol/openid-connect/registrations"},userinfo:function(){return z()+"/protocol/openid-connect/userinfo"}}}if(p?"string"==typeof p&&(i=p):i="keycloak.json",i)(a=new XMLHttpRequest).open("GET",i,!0),a.setRequestHeader("Accept","application/json"),a.onreadystatechange=function(){if(4==a.readyState)if(200==a.status||se(a)){var x=JSON.parse(a.responseText);e.authServerUrl=x["auth-server-url"],e.realm=x.realm,e.clientId=x.resource,l(null),t.setSuccess()}else t.setError()},a.send();else{if(!p.clientId)throw"clientId missing";e.clientId=p.clientId;var o=p.oidcProvider;if(o)if("string"==typeof o){var g,a;g="/"==o.charAt(o.length-1)?o+".well-known/openid-configuration":o+"/.well-known/openid-configuration",(a=new XMLHttpRequest).open("GET",g,!0),a.setRequestHeader("Accept","application/json"),a.onreadystatechange=function(){4==a.readyState&&(200==a.status||se(a)?(l(JSON.parse(a.responseText)),t.setSuccess()):t.setError())},a.send()}else l(o),t.setSuccess();else{if(!p.url)for(var v=document.getElementsByTagName("script"),m=0;m<v.length;m++)if(v[m].src.match(/.*keycloak\.js/)){p.url=v[m].src.substr(0,v[m].src.indexOf("/js/keycloak.js"));break}if(!p.realm)throw"realm missing";e.authServerUrl=p.url,e.realm=p.realm,l(null),t.setSuccess()}}return t.promise}();function o(){var g=function(L){L||(E.prompt="none"),e.login(E).then(function(){l.setSuccess()}).catch(function(J){l.setError(J)})},x=function(){var L=document.createElement("iframe"),J=e.createLoginUrl({prompt:"none",redirectUri:e.silentCheckSsoRedirectUri});L.setAttribute("src",J),L.setAttribute("title","keycloak-silent-check-sso"),L.style.display="none",document.body.appendChild(L);var D=function(W){W.origin===window.location.origin&&L.contentWindow===W.source&&(V(Z(W.data),l),document.body.removeChild(L),window.removeEventListener("message",D))};window.addEventListener("message",D)},E={};switch(r.onLoad){case"check-sso":w.enable?ee().then(function(){Q().then(function(L){L?l.setSuccess():e.silentCheckSsoRedirectUri?x():g(!1)}).catch(function(L){l.setError(L)})}):e.silentCheckSsoRedirectUri?x():g(!1);break;case"login-required":g(!0);break;default:throw"Invalid value for onLoad"}}function v(){var g=Z(window.location.href);if(g&&window.history.replaceState(window.history.state,null,g.newUrl),g&&g.valid)return ee().then(function(){V(g,l)}).catch(function(x){l.setError(x)});r?r.token&&r.refreshToken?($(r.token,r.refreshToken,r.idToken),w.enable?ee().then(function(){Q().then(function(x){x?(e.onAuthSuccess&&e.onAuthSuccess(),l.setSuccess(),re()):l.setSuccess()}).catch(function(x){l.setError(x)})}):e.updateToken(-1).then(function(){e.onAuthSuccess&&e.onAuthSuccess(),l.setSuccess()}).catch(function(x){e.onAuthError&&e.onAuthError(),r.onLoad?o():l.setError(x)})):r.onLoad?o():l.setSuccess():l.setSuccess()}return a.then(function(){(function m(){var g=O(),x=function(){("interactive"===document.readyState||"complete"===document.readyState)&&(document.removeEventListener("readystatechange",x),g.setSuccess())};return document.addEventListener("readystatechange",x),x(),g.promise})().then(xe).then(v).catch(function(g){i.setError(g)})}),a.catch(function(g){i.setError(g)}),i.promise},e.login=function(r){return u.login(r)},e.createLoginUrl=function(r){var o,t=ie(),i=ie(),l=u.redirectUri(r),a={state:t,nonce:i,redirectUri:encodeURIComponent(l)};r&&r.prompt&&(a.prompt=r.prompt),o=r&&"register"==r.action?e.endpoints.register():e.endpoints.authorize();var v=r&&r.scope||e.scope;v?-1===v.indexOf("openid")&&(v="openid "+v):v="openid";var m=o+"?client_id="+encodeURIComponent(e.clientId)+"&redirect_uri="+encodeURIComponent(l)+"&state="+encodeURIComponent(t)+"&response_mode="+encodeURIComponent(e.responseMode)+"&response_type="+encodeURIComponent(e.responseType)+"&scope="+encodeURIComponent(v);if(Y&&(m=m+"&nonce="+encodeURIComponent(i)),r&&r.prompt&&(m+="&prompt="+encodeURIComponent(r.prompt)),r&&r.maxAge&&(m+="&max_age="+encodeURIComponent(r.maxAge)),r&&r.loginHint&&(m+="&login_hint="+encodeURIComponent(r.loginHint)),r&&r.idpHint&&(m+="&kc_idp_hint="+encodeURIComponent(r.idpHint)),r&&r.action&&"register"!=r.action&&(m+="&kc_action="+encodeURIComponent(r.action)),r&&r.locale&&(m+="&ui_locales="+encodeURIComponent(r.locale)),r&&r.acr){var g=function he(r){return JSON.stringify({id_token:{acr:r}})}(r.acr);m+="&claims="+encodeURIComponent(g)}if(e.pkceMethod){var x=function fe(r){return ae(r,"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789")}(96);a.pkceCodeVerifier=x;var E=function de(r,t){if("S256"===r){var i=new Uint8Array(H.arrayBuffer(t));return A.fromByteArray(i).replace(/\+/g,"-").replace(/\//g,"_").replace(/\=/g,"")}throw"Invalid value for pkceMethod"}(e.pkceMethod,x);m+="&code_challenge="+E,m+="&code_challenge_method="+e.pkceMethod}return F.add(a),m},e.logout=function(r){return u.logout(r)},e.createLogoutUrl=function(r){return e.endpoints.logout()+"?post_logout_redirect_uri="+encodeURIComponent(u.redirectUri(r,!1))+"&id_token_hint="+encodeURIComponent(e.idToken)},e.register=function(r){return u.register(r)},e.createRegisterUrl=function(r){return r||(r={}),r.action="register",e.createLoginUrl(r)},e.createAccountUrl=function(r){var t=z(),i=void 0;return typeof t<"u"&&(i=t+"/account?referrer="+encodeURIComponent(e.clientId)+"&referrer_uri="+encodeURIComponent(u.redirectUri(r))),i},e.accountManagement=function(){return u.accountManagement()},e.hasRealmRole=function(r){var t=e.realmAccess;return!!t&&t.roles.indexOf(r)>=0},e.hasResourceRole=function(r,t){if(!e.resourceAccess)return!1;var i=e.resourceAccess[t||e.clientId];return!!i&&i.roles.indexOf(r)>=0},e.loadUserProfile=function(){var r=z()+"/account",t=new XMLHttpRequest;t.open("GET",r,!0),t.setRequestHeader("Accept","application/json"),t.setRequestHeader("Authorization","bearer "+e.token);var i=O();return t.onreadystatechange=function(){4==t.readyState&&(200==t.status?(e.profile=JSON.parse(t.responseText),i.setSuccess(e.profile)):i.setError())},t.send(),i.promise},e.loadUserInfo=function(){var r=e.endpoints.userinfo(),t=new XMLHttpRequest;t.open("GET",r,!0),t.setRequestHeader("Accept","application/json"),t.setRequestHeader("Authorization","bearer "+e.token);var i=O();return t.onreadystatechange=function(){4==t.readyState&&(200==t.status?(e.userInfo=JSON.parse(t.responseText),i.setSuccess(e.userInfo)):i.setError())},t.send(),i.promise},e.isTokenExpired=function(r){if(!e.tokenParsed||!e.refreshToken&&"implicit"!=e.flow)throw"Not authenticated";if(null==e.timeSkew)return j("[KEYCLOAK] Unable to determine if token is expired as timeskew is not set"),!0;var t=e.tokenParsed.exp-Math.ceil((new Date).getTime()/1e3)+e.timeSkew;if(r){if(isNaN(r))throw"Invalid minValidity";t-=r}return t<0},e.updateToken=function(r){var t=O();if(!e.refreshToken)return t.setError(),t.promise;r=r||5;var i=function(){var a=!1;if(-1==r?(a=!0,j("[KEYCLOAK] Refreshing token: forced refresh")):(!e.tokenParsed||e.isTokenExpired(r))&&(a=!0,j("[KEYCLOAK] Refreshing token: token expired")),a){var o="grant_type=refresh_token&refresh_token="+e.refreshToken,v=e.endpoints.token();if(d.push(t),1==d.length){var m=new XMLHttpRequest;m.open("POST",v,!0),m.setRequestHeader("Content-type","application/x-www-form-urlencoded"),m.withCredentials=!0,o+="&client_id="+encodeURIComponent(e.clientId);var g=(new Date).getTime();m.onreadystatechange=function(){if(4==m.readyState)if(200==m.status){j("[KEYCLOAK] Token refreshed"),g=(g+(new Date).getTime())/2;var x=JSON.parse(m.responseText);$(x.access_token,x.refresh_token,x.id_token,g),e.onAuthRefreshSuccess&&e.onAuthRefreshSuccess();for(var E=d.pop();null!=E;E=d.pop())E.setSuccess(!0)}else for(G("[KEYCLOAK] Failed to refresh token"),400==m.status&&e.clearToken(),e.onAuthRefreshError&&e.onAuthRefreshError(),E=d.pop();null!=E;E=d.pop())E.setError(!0)},m.send(o)}}else t.setSuccess(!1)};return w.enable?Q().then(function(){i()}).catch(function(a){t.setError(a)}):i(),t.promise},e.clearToken=function(){e.token&&($(null,null,null),e.onAuthLogout&&e.onAuthLogout(),e.loginRequired&&e.login())};var ne=function(){if(!(this instanceof ne))return new ne;function t(){for(var i=(new Date).getTime(),l=0;l<localStorage.length;l++){var a=localStorage.key(l);if(a&&0==a.indexOf("kc-callback-")){var o=localStorage.getItem(a);if(o)try{var v=JSON.parse(o).expires;(!v||v<i)&&localStorage.removeItem(a)}catch{localStorage.removeItem(a)}}}}localStorage.setItem("kc-test","test"),localStorage.removeItem("kc-test"),this.get=function(i){if(i){var l="kc-callback-"+i,a=localStorage.getItem(l);return a&&(localStorage.removeItem(l),a=JSON.parse(a)),t(),a}},this.add=function(i){t();var l="kc-callback-"+i.state;i.expires=(new Date).getTime()+36e5,localStorage.setItem(l,JSON.stringify(i))}},oe=function(){if(!(this instanceof oe))return new oe;var r=this;r.get=function(a){if(a){var o=i("kc-callback-"+a);if(l("kc-callback-"+a,"",t(-100)),o)return JSON.parse(o)}},r.add=function(a){l("kc-callback-"+a.state,JSON.stringify(a),t(60))},r.removeItem=function(a){l(a,"",t(-100))};var t=function(a){var o=new Date;return o.setTime(o.getTime()+60*a*1e3),o},i=function(a){for(var o=a+"=",v=document.cookie.split(";"),m=0;m<v.length;m++){for(var g=v[m];" "==g.charAt(0);)g=g.substring(1);if(0==g.indexOf(o))return g.substring(o.length,g.length)}return""},l=function(a,o,v){var m=a+"="+o+"; expires="+v.toUTCString()+"; ";document.cookie=m}};function ue(r){return function(){e.enableLogging&&r.apply(console,Array.prototype.slice.call(arguments))}}}var b=k(90944),C=(()=>{return(p=C||(C={}))[p.OnAuthError=0]="OnAuthError",p[p.OnAuthLogout=1]="OnAuthLogout",p[p.OnAuthRefreshError=2]="OnAuthRefreshError",p[p.OnAuthRefreshSuccess=3]="OnAuthRefreshSuccess",p[p.OnAuthSuccess=4]="OnAuthSuccess",p[p.OnReady=5]="OnReady",p[p.OnTokenExpired=6]="OnTokenExpired",p[p.OnActionUpdate=7]="OnActionUpdate",C;var p})();class y{constructor(e,u){this.router=e,this.keycloakAngular=u}canActivate(e,u){var d=this;return(0,s.Z)(function*(){try{return d.authenticated=yield d.keycloakAngular.isLoggedIn(),d.roles=yield d.keycloakAngular.getUserRoles(!0),yield d.isAccessAllowed(e,u)}catch(F){throw new Error("An error happened during access validation. Details:"+F)}})()}}let R=(()=>{class p{constructor(){this._keycloakEvents$=new S.Subject}bindsKeycloakEvents(){this._instance.onAuthError=u=>{this._keycloakEvents$.next({args:u,type:C.OnAuthError})},this._instance.onAuthLogout=()=>{this._keycloakEvents$.next({type:C.OnAuthLogout})},this._instance.onAuthRefreshSuccess=()=>{this._keycloakEvents$.next({type:C.OnAuthRefreshSuccess})},this._instance.onAuthRefreshError=()=>{this._keycloakEvents$.next({type:C.OnAuthRefreshError})},this._instance.onAuthSuccess=()=>{this._keycloakEvents$.next({type:C.OnAuthSuccess})},this._instance.onTokenExpired=()=>{this._keycloakEvents$.next({type:C.OnTokenExpired})},this._instance.onActionUpdate=u=>{this._keycloakEvents$.next({args:u,type:C.OnActionUpdate})},this._instance.onReady=u=>{this._keycloakEvents$.next({args:u,type:C.OnReady})}}loadExcludedUrls(u){const d=[];for(const F of u){let w;w="string"==typeof F?{urlPattern:new RegExp(F,"i"),httpMethods:[]}:{urlPattern:new RegExp(F.url,"i"),httpMethods:F.httpMethods},d.push(w)}return d}initServiceValues({enableBearerInterceptor:u=!0,loadUserProfileAtStartUp:d=!1,bearerExcludedUrls:F=[],authorizationHeaderName:w="Authorization",bearerPrefix:B="Bearer",initOptions:N,updateMinValidity:Y=20,shouldAddToken:j=(()=>!0),shouldUpdateToken:G=(()=>!0)}){this._enableBearerInterceptor=u,this._loadUserProfileAtStartUp=d,this._authorizationHeaderName=w,this._bearerPrefix=B.trim().concat(" "),this._excludedUrls=this.loadExcludedUrls(F),this._silentRefresh=!!N&&"implicit"===N.flow,this._updateMinValidity=Y,this.shouldAddToken=j,this.shouldUpdateToken=G}init(u={}){var d=this;return(0,s.Z)(function*(){d.initServiceValues(u);const{config:F,initOptions:w}=u;d._instance=M(F),d.bindsKeycloakEvents();const B=yield d._instance.init(w);return B&&d._loadUserProfileAtStartUp&&(yield d.loadUserProfile()),B})()}login(u={}){var d=this;return(0,s.Z)(function*(){yield d._instance.login(u),d._loadUserProfileAtStartUp&&(yield d.loadUserProfile())})()}logout(u){var d=this;return(0,s.Z)(function*(){const F={redirectUri:u};yield d._instance.logout(F),d._userProfile=void 0})()}register(u={action:"register"}){var d=this;return(0,s.Z)(function*(){yield d._instance.register(u)})()}isUserInRole(u,d){let F;return F=this._instance.hasResourceRole(u,d),F||(F=this._instance.hasRealmRole(u)),F}getUserRoles(u=!0){let d=[];if(this._instance.resourceAccess)for(const F in this._instance.resourceAccess)this._instance.resourceAccess.hasOwnProperty(F)&&(d=d.concat(this._instance.resourceAccess[F].roles||[]));return u&&this._instance.realmAccess&&d.push(...this._instance.realmAccess.roles||[]),d}isLoggedIn(){var u=this;return(0,s.Z)(function*(){return!!u._instance&&u._instance.authenticated})()}isTokenExpired(u=0){return this._instance.isTokenExpired(u)}updateToken(u=this._updateMinValidity){var d=this;return(0,s.Z)(function*(){try{if(d._silentRefresh){if(d.isTokenExpired())throw new Error("Failed to refresh the token, or the session is expired");return!0}if(!d._instance)throw new Error("Keycloak Angular library is not initialized.");return yield d._instance.updateToken(u)}catch{return!1}})()}loadUserProfile(u=!1){var d=this;return(0,s.Z)(function*(){if(d._userProfile&&!u)return d._userProfile;if(!d._instance.authenticated)throw new Error("The user profile was not loaded as the user is not logged in.");return d._userProfile=yield d._instance.loadUserProfile()})()}getToken(){var u=this;return(0,s.Z)(function*(){return u._instance.token})()}getUsername(){if(!this._userProfile)throw new Error("User not logged in or user profile was not loaded.");return this._userProfile.username}clearToken(){this._instance.clearToken()}addTokenToHeader(u=new c.HttpHeaders){return(0,S.from)(this.getToken()).pipe((0,f.map)(d=>d?u.set(this._authorizationHeaderName,this._bearerPrefix+d):u))}getKeycloakInstance(){return this._instance}get excludedUrls(){return this._excludedUrls}get enableBearerInterceptor(){return this._enableBearerInterceptor}get keycloakEvents$(){return this._keycloakEvents$}}return p.\u0275fac=function(u){return new(u||p)},p.\u0275prov=_.\u0275\u0275defineInjectable({token:p,factory:p.\u0275fac}),p})(),U=(()=>{class p{constructor(u){this.keycloak=u}conditionallyUpdateToken(u){var d=this;return(0,s.Z)(function*(){return!d.keycloak.shouldUpdateToken(u)||(yield d.keycloak.updateToken())})()}isUrlExcluded({method:u,url:d},{urlPattern:F,httpMethods:w}){const B=0===w.length||w.join().indexOf(u.toUpperCase())>-1,N=F.test(d);return B&&N}intercept(u,d){const{enableBearerInterceptor:F,excludedUrls:w}=this.keycloak;return!F||!this.keycloak.shouldAddToken(u)||w.findIndex(N=>this.isUrlExcluded(u,N))>-1?d.handle(u):(0,S.combineLatest)([this.conditionallyUpdateToken(u),this.keycloak.isLoggedIn()]).pipe((0,f.mergeMap)(([N,Y])=>Y?this.handleRequestWithTokenHeader(u,d):d.handle(u)))}handleRequestWithTokenHeader(u,d){return this.keycloak.addTokenToHeader(u.headers).pipe((0,f.mergeMap)(F=>{const w=u.clone({headers:F});return d.handle(w)}))}}return p.\u0275fac=function(u){return new(u||p)(_.\u0275\u0275inject(R))},p.\u0275prov=_.\u0275\u0275defineInjectable({token:p,factory:p.\u0275fac}),p})(),P=(()=>{class p{}return p.\u0275fac=function(u){return new(u||p)},p.\u0275mod=_.\u0275\u0275defineNgModule({type:p}),p.\u0275inj=_.\u0275\u0275defineInjector({providers:[R,{provide:c.HTTP_INTERCEPTORS,useClass:U,multi:!0}],imports:[[b.CommonModule]]}),p})(),X=(()=>{class p{}return p.\u0275fac=function(u){return new(u||p)},p.\u0275mod=_.\u0275\u0275defineNgModule({type:p}),p.\u0275inj=_.\u0275\u0275defineInjector({imports:[[P]]}),p})()},15861:(n,h,k)=>{function s(c,S,f,A,H,I,T){try{var M=c[I](T),b=M.value}catch(C){return void f(C)}M.done?S(b):Promise.resolve(b).then(A,H)}function _(c){return function(){var S=this,f=arguments;return new Promise(function(A,H){var I=c.apply(S,f);function T(b){s(I,A,H,T,M,"next",b)}function M(b){s(I,A,H,T,M,"throw",b)}T(void 0)})}}k.d(h,{Z:()=>_})}}]);